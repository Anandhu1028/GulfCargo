{
    "sourceFile": "resources/views/branches/addtoship/deliverylistptint.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1733209310305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733209338558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,107 +31,112 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                            <tr>\n-                                                <th>SL NO</th>\n-                                                <th>INVOICE NO</th>\n-                                                <th>NO OF PCs</th>\n-                                                <th>WEIGHT </th>\n-                                                <th>CONSIGNEE ADDRESS</th>\n-                                                <th>STATE</th>\n-                                                <th>BOX NUMBER </th>\n-                                            </tr>\n+                                        <tr>\n+                                            <th>SL NO</th>\n+                                            <th>INVOICE NO</th>\n+                                            <th>NO OF PCs</th>\n+                                            <th>WEIGHT </th>\n+                                            <th>CONSIGNEE ADDRESS</th>\n+                                            <th>STATE</th>\n+                                            <th>BOX NUMBER </th>\n+\n+                                        </tr>\n                                         </thead>\n-                                        <tbody id=\"bookingData\">\n-                                            <?php\n-                                            $tot_weight_exist = 0;\n-                                            $tot_value_exist = 0;\n-                                            $tot_temp_exist = 0;\n-                                            $totalPieces = 0;\n+                                        <tbody  id=\"bookingData\">\n+                                        <?php\n+\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist =0;\n+                                        $totalPieces =0;\n+                                        $boxList = [];\n+                                        $book_no = null;\n+                                        $noofpc = 0;\n+                                        foreach( $delivery_list as $index=>$booking) {\n+                                            $tot_temp_exist= $booking->weight;\n+\n+                                            $tot_weight_exist +=$tot_temp_exist;\n+                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n                                             $boxList = [];\n-                                            $book_no = null;\n-                                            $noofpc = 0;\n-                                            foreach ($delivery_list as $index => $booking) {\n-                                                $tot_temp_exist = $booking->weight;\n-                                                $tot_weight_exist += $tot_temp_exist;\n-                                                $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                                $totalPieces += 1;\n-                                                $List = '';\n-                                                $ListValue = '';\n-                                                $boxList = [];\n-                                                $boxListValue = [];\n-                                    \n-                                                $status = '';\n-                                                $lastStatus = '';\n-                                                if (($booking->boxStatuses != null)) {\n-                                                    $status = collect($booking->boxStatuses)->last();\n-                                                    $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                    $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n-                                                    if ($lastStatus == 'Pending') {\n-                                                        $style = \"background-color:#ec1616e6;\";\n-                                                        $disabled = \"disabled='disabled'\";\n-                                                        $newClass = \"k-state-disabled\";\n-                                                    } else if ($lastStatus == 'Shipment on hold') {\n-                                                        $style = \"background-color:#ffdb00;\";\n-                                                        $disabled = \"disabled='disabled'\";\n-                                                        $newClass = \"k-state-disabled\";\n-                                                    } else {\n-                                                        $style = \"background-color:none;\";\n-                                                        $disabled = \"\";\n-                                                        $newClass = \"k-checkbox\";\n-                                                    }\n+                                            $boxListValue = [];\n+\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if(($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n+                                                if($lastStatus == 'Pending') {\n+                                                    $style= \"background-color:#ec1616e6;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else if ($lastStatus == 'Shipment on hold') {\n+                                                    $style= \"background-color:#ffdb00;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else {\n+                                                    $style= \"background-color:none;\";\n+                                                    $disabled = \"\";\n+                                                    $newClass = \"k-checkbox\";\n                                                 }\n-                                                $nofpc = 0;\n-                                                $tot_weight = 0;\n-                                                $adress = null;\n-                                                $state = null;\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc = $nofpc + 1;\n-                                                        $tot_weight = $tot_weight + $value->weight;\n-                                                        $adress = $value->shipment->receiver->name . \", \" .\n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                    }\n+                                            }\n+                                            $nofpc = 0;\n+                                            $tot_weight = 0;\n+                                            $adress = null;\n+                                            $state = null;\n+                                            foreach ($ship_bookingsList as $key => $value) {\n+                                                if($value->shipment->booking_number == $booking->booking_number){\n+                                                    $nofpc = $nofpc + 1;\n+                                                    $tot_weight = $tot_weight + $value->weight;\n+                                                    $adress = $value->shipment->receiver->name.\", \".\n+                                                        $value->shipment->receiver->address->address.\", \".\n+                                                        $value->shipment->receiver->post.\", \".\n+                                                        $value->shipment->receiver->city_name.\", \".\n+                                                        $value->shipment->receiver->address->district->name.\", \".\n+                                                        $value->shipment->receiver->address->state->name .\", \".\n+                                                        $value->shipment->receiver->address->country->name.\", \".\n+                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n+                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n+                                                    // $state = $value->shipment->receiver->address->state->name;\n                                                 }\n-                                    \n-                                                $boxes = $booking->boxes;\n-                                                // Check if there is more than one box\n-                                                $boxCount = count($boxes);\n-                                                foreach ($boxes as $boxIndex => $box) {\n-                                                    ?>\n-                                                    <tr>\n-                                                        <td style=\"text-align:center\"><?php echo $index + 1; ?></td>\n-                                                        <td style=\"text-align:center\"><?php echo $booking->booking_number; ?></td>\n-                                                        <td style=\"text-align:center\"><?php echo $nofpc; ?></td>\n-                                                        <td style=\"text-align:center\"><?php echo $tot_weight; ?></td>\n-                                                        <td style=\"text-align:center; text-transform: uppercase;\"><?php echo strtoupper($adress); ?></td>\n-                                                        <td style=\"text-align:center\"><?php echo strtoupper($booking->receiver->address->state->name ?? ''); ?></td>\n-                                                        <td style=\"text-align:center\"><?php echo $box->box_name; ?></td>\n-                                                    </tr>\n-                                                    <?php\n-                                                    // If there are more boxes, create a new row for the rest of the boxes\n-                                                    if ($boxCount > 1 && $boxIndex < $boxCount - 1) {\n-                                                        ?>\n-                                                        <tr>\n-                                                            <td colspan=\"6\"></td>\n-                                                            <td style=\"text-align:center\"><?php echo $box->box_name; ?></td>\n-                                                        </tr>\n-                                                        <?php\n-                                                    }\n-                                                }\n                                             }\n+\n+\n+\n                                             ?>\n+                                            <tr style=\"\">\n+                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n+                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n+                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n+                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n+                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n+                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n+                                                {{-- <td style=\"text-align:center\">\n+                                                    @foreach ($booking->packages as $item)\n+                                                        {{$item->description}}-{{$item->quantity}},\n+                                                    @endforeach\n+                                                </td> --}}\n+                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n+                                                <td style=\"text-align:center\">\n+                                                    @foreach($booking->boxes as $box)\n+                                                        @if ($box->ship_id == $shipId)\n+                                                            {{$box->box_name}},\n+                                                        @endif\n+                                                    @endforeach\n+                                                </td>\n+\n+                                            </tr>\n+                                        <?php\n+                                        }\n+                                        ?>\n+\n                                         </tbody>\n                                     </table>\n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733209480640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,112 +31,100 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                        <tr>\n-                                            <th>SL NO</th>\n-                                            <th>INVOICE NO</th>\n-                                            <th>NO OF PCs</th>\n-                                            <th>WEIGHT </th>\n-                                            <th>CONSIGNEE ADDRESS</th>\n-                                            <th>STATE</th>\n-                                            <th>BOX NUMBER </th>\n-\n-                                        </tr>\n+                                            <tr>\n+                                                <th>SL NO</th>\n+                                                <th>INVOICE NO</th>\n+                                                <th>NO OF PCs</th>\n+                                                <th>WEIGHT </th>\n+                                                <th>CONSIGNEE ADDRESS</th>\n+                                                <th>STATE</th>\n+                                                <th>BOX NUMBER </th>\n+                                            </tr>\n                                         </thead>\n-                                        <tbody  id=\"bookingData\">\n-                                        <?php\n-\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist =0;\n-                                        $totalPieces =0;\n-                                        $boxList = [];\n-                                        $book_no = null;\n-                                        $noofpc = 0;\n-                                        foreach( $delivery_list as $index=>$booking) {\n-                                            $tot_temp_exist= $booking->weight;\n-\n-                                            $tot_weight_exist +=$tot_temp_exist;\n-                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n+                                        <tbody id=\"bookingData\">\n+                                            <?php\n+                                            $tot_weight_exist = 0;\n+                                            $tot_value_exist = 0;\n+                                            $tot_temp_exist = 0;\n+                                            $totalPieces = 0;\n                                             $boxList = [];\n-                                            $boxListValue = [];\n-\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if(($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n-                                                if($lastStatus == 'Pending') {\n-                                                    $style= \"background-color:#ec1616e6;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else if ($lastStatus == 'Shipment on hold') {\n-                                                    $style= \"background-color:#ffdb00;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else {\n-                                                    $style= \"background-color:none;\";\n-                                                    $disabled = \"\";\n-                                                    $newClass = \"k-checkbox\";\n+                                            $book_no = null;\n+                                            $noofpc = 0;\n+                                            foreach ($delivery_list as $index => $booking) {\n+                                                $tot_temp_exist = $booking->weight;\n+                                                $tot_weight_exist += $tot_temp_exist;\n+                                                $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n+                                                $totalPieces += 1;\n+                                                $List = '';\n+                                                $ListValue = '';\n+                                                $boxList = [];\n+                                                $boxListValue = [];\n+                                    \n+                                                $status = '';\n+                                                $lastStatus = '';\n+                                                if (($booking->boxStatuses != null)) {\n+                                                    $status = collect($booking->boxStatuses)->last();\n+                                                    $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                    $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n+                                                    if ($lastStatus == 'Pending') {\n+                                                        $style = \"background-color:#ec1616e6;\";\n+                                                        $disabled = \"disabled='disabled'\";\n+                                                        $newClass = \"k-state-disabled\";\n+                                                    } else if ($lastStatus == 'Shipment on hold') {\n+                                                        $style = \"background-color:#ffdb00;\";\n+                                                        $disabled = \"disabled='disabled'\";\n+                                                        $newClass = \"k-state-disabled\";\n+                                                    } else {\n+                                                        $style = \"background-color:none;\";\n+                                                        $disabled = \"\";\n+                                                        $newClass = \"k-checkbox\";\n+                                                    }\n                                                 }\n-                                            }\n-                                            $nofpc = 0;\n-                                            $tot_weight = 0;\n-                                            $adress = null;\n-                                            $state = null;\n-                                            foreach ($ship_bookingsList as $key => $value) {\n-                                                if($value->shipment->booking_number == $booking->booking_number){\n-                                                    $nofpc = $nofpc + 1;\n-                                                    $tot_weight = $tot_weight + $value->weight;\n-                                                    $adress = $value->shipment->receiver->name.\", \".\n-                                                        $value->shipment->receiver->address->address.\", \".\n-                                                        $value->shipment->receiver->post.\", \".\n-                                                        $value->shipment->receiver->city_name.\", \".\n-                                                        $value->shipment->receiver->address->district->name.\", \".\n-                                                        $value->shipment->receiver->address->state->name .\", \".\n-                                                        $value->shipment->receiver->address->country->name.\", \".\n-                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n-                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n-                                                    // $state = $value->shipment->receiver->address->state->name;\n+                                                $nofpc = 0;\n+                                                $tot_weight = 0;\n+                                                $adress = null;\n+                                                $state = null;\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc = $nofpc + 1;\n+                                                        $tot_weight = $tot_weight + $value->weight;\n+                                                        $adress = $value->shipment->receiver->name . \", \" .\n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        // $state = $value->shipment->receiver->address->state->name;\n+                                                    }\n                                                 }\n+                                    \n+                                                // Create a row for each box number\n+                                                $boxCount = count($booking->boxes); // Determine the number of boxes\n+                                                foreach ($booking->boxes as $indexBox => $box) {\n+                                                    ?>\n+                                                    <tr>\n+                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $index + 1 }}</td>\n+                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $booking->booking_number }}</td>\n+                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $nofpc }}</td>\n+                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center; text-transform: uppercase;\" rowspan=\"{{ $boxCount }}\">{!! strtoupper($adress) !!}</td>\n+                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n+                                                        <td style=\"text-align:center\">\n+                                                            {{ $box->box_name }}\n+                                                        </td>\n+                                                    </tr>\n+                                                    <?php\n+                                                }\n                                             }\n-\n-\n-\n                                             ?>\n-                                            <tr style=\"\">\n-                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n-                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n-                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n-                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n-                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n-                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n-                                                {{-- <td style=\"text-align:center\">\n-                                                    @foreach ($booking->packages as $item)\n-                                                        {{$item->description}}-{{$item->quantity}},\n-                                                    @endforeach\n-                                                </td> --}}\n-                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n-                                                <td style=\"text-align:center\">\n-                                                    @foreach($booking->boxes as $box)\n-                                                        @if ($box->ship_id == $shipId)\n-                                                            {{$box->box_name}},\n-                                                        @endif\n-                                                    @endforeach\n-                                                </td>\n-\n-                                            </tr>\n-                                        <?php\n-                                        }\n-                                        ?>\n-\n                                         </tbody>\n                                     </table>\n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733209537866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,100 +31,112 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                            <tr>\n-                                                <th>SL NO</th>\n-                                                <th>INVOICE NO</th>\n-                                                <th>NO OF PCs</th>\n-                                                <th>WEIGHT </th>\n-                                                <th>CONSIGNEE ADDRESS</th>\n-                                                <th>STATE</th>\n-                                                <th>BOX NUMBER </th>\n-                                            </tr>\n+                                        <tr>\n+                                            <th>SL NO</th>\n+                                            <th>INVOICE NO</th>\n+                                            <th>NO OF PCs</th>\n+                                            <th>WEIGHT </th>\n+                                            <th>CONSIGNEE ADDRESS</th>\n+                                            <th>STATE</th>\n+                                            <th>BOX NUMBER </th>\n+\n+                                        </tr>\n                                         </thead>\n-                                        <tbody id=\"bookingData\">\n-                                            <?php\n-                                            $tot_weight_exist = 0;\n-                                            $tot_value_exist = 0;\n-                                            $tot_temp_exist = 0;\n-                                            $totalPieces = 0;\n+                                        <tbody  id=\"bookingData\">\n+                                        <?php\n+\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist =0;\n+                                        $totalPieces =0;\n+                                        $boxList = [];\n+                                        $book_no = null;\n+                                        $noofpc = 0;\n+                                        foreach( $delivery_list as $index=>$booking) {\n+                                            $tot_temp_exist= $booking->weight;\n+\n+                                            $tot_weight_exist +=$tot_temp_exist;\n+                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n                                             $boxList = [];\n-                                            $book_no = null;\n-                                            $noofpc = 0;\n-                                            foreach ($delivery_list as $index => $booking) {\n-                                                $tot_temp_exist = $booking->weight;\n-                                                $tot_weight_exist += $tot_temp_exist;\n-                                                $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                                $totalPieces += 1;\n-                                                $List = '';\n-                                                $ListValue = '';\n-                                                $boxList = [];\n-                                                $boxListValue = [];\n-                                    \n-                                                $status = '';\n-                                                $lastStatus = '';\n-                                                if (($booking->boxStatuses != null)) {\n-                                                    $status = collect($booking->boxStatuses)->last();\n-                                                    $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                    $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n-                                                    if ($lastStatus == 'Pending') {\n-                                                        $style = \"background-color:#ec1616e6;\";\n-                                                        $disabled = \"disabled='disabled'\";\n-                                                        $newClass = \"k-state-disabled\";\n-                                                    } else if ($lastStatus == 'Shipment on hold') {\n-                                                        $style = \"background-color:#ffdb00;\";\n-                                                        $disabled = \"disabled='disabled'\";\n-                                                        $newClass = \"k-state-disabled\";\n-                                                    } else {\n-                                                        $style = \"background-color:none;\";\n-                                                        $disabled = \"\";\n-                                                        $newClass = \"k-checkbox\";\n-                                                    }\n+                                            $boxListValue = [];\n+\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if(($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n+                                                if($lastStatus == 'Pending') {\n+                                                    $style= \"background-color:#ec1616e6;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else if ($lastStatus == 'Shipment on hold') {\n+                                                    $style= \"background-color:#ffdb00;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else {\n+                                                    $style= \"background-color:none;\";\n+                                                    $disabled = \"\";\n+                                                    $newClass = \"k-checkbox\";\n                                                 }\n-                                                $nofpc = 0;\n-                                                $tot_weight = 0;\n-                                                $adress = null;\n-                                                $state = null;\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc = $nofpc + 1;\n-                                                        $tot_weight = $tot_weight + $value->weight;\n-                                                        $adress = $value->shipment->receiver->name . \", \" .\n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        // $state = $value->shipment->receiver->address->state->name;\n-                                                    }\n+                                            }\n+                                            $nofpc = 0;\n+                                            $tot_weight = 0;\n+                                            $adress = null;\n+                                            $state = null;\n+                                            foreach ($ship_bookingsList as $key => $value) {\n+                                                if($value->shipment->booking_number == $booking->booking_number){\n+                                                    $nofpc = $nofpc + 1;\n+                                                    $tot_weight = $tot_weight + $value->weight;\n+                                                    $adress = $value->shipment->receiver->name.\", \".\n+                                                        $value->shipment->receiver->address->address.\", \".\n+                                                        $value->shipment->receiver->post.\", \".\n+                                                        $value->shipment->receiver->city_name.\", \".\n+                                                        $value->shipment->receiver->address->district->name.\", \".\n+                                                        $value->shipment->receiver->address->state->name .\", \".\n+                                                        $value->shipment->receiver->address->country->name.\", \".\n+                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n+                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n+                                                    // $state = $value->shipment->receiver->address->state->name;\n                                                 }\n-                                    \n-                                                // Create a row for each box number\n-                                                $boxCount = count($booking->boxes); // Determine the number of boxes\n-                                                foreach ($booking->boxes as $indexBox => $box) {\n-                                                    ?>\n-                                                    <tr>\n-                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $index + 1 }}</td>\n-                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $booking->booking_number }}</td>\n-                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ $tot_weight }}</td>\n-                                                        <td style=\"text-align:center; text-transform: uppercase;\" rowspan=\"{{ $boxCount }}\">{!! strtoupper($adress) !!}</td>\n-                                                        <td style=\"text-align:center\" rowspan=\"{{ $boxCount }}\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n-                                                        <td style=\"text-align:center\">\n-                                                            {{ $box->box_name }}\n-                                                        </td>\n-                                                    </tr>\n-                                                    <?php\n-                                                }\n                                             }\n+\n+\n+\n                                             ?>\n+                                            <tr style=\"\">\n+                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n+                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n+                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n+                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n+                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n+                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n+                                                {{-- <td style=\"text-align:center\">\n+                                                    @foreach ($booking->packages as $item)\n+                                                        {{$item->description}}-{{$item->quantity}},\n+                                                    @endforeach\n+                                                </td> --}}\n+                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n+                                                <td style=\"text-align:center\">\n+                                                    @foreach($booking->boxes as $box)\n+                                                        @if ($box->ship_id == $shipId)\n+                                                            {{$box->box_name}},\n+                                                        @endif\n+                                                    @endforeach\n+                                                </td>\n+\n+                                            </tr>\n+                                        <?php\n+                                        }\n+                                        ?>\n+\n                                         </tbody>\n                                     </table>\n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733209672708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,112 +31,62 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                        <tr>\n-                                            <th>SL NO</th>\n-                                            <th>INVOICE NO</th>\n-                                            <th>NO OF PCs</th>\n-                                            <th>WEIGHT </th>\n-                                            <th>CONSIGNEE ADDRESS</th>\n-                                            <th>STATE</th>\n-                                            <th>BOX NUMBER </th>\n-\n-                                        </tr>\n+                                            <tr>\n+                                                <th>SL NO</th>\n+                                                <th>INVOICE NO</th>\n+                                                <th>NO OF PCs</th>\n+                                                <th>WEIGHT</th>\n+                                                <th>CONSIGNEE ADDRESS</th>\n+                                                <th>STATE</th>\n+                                                <th>BOX NUMBER</th>\n+                                            </tr>\n                                         </thead>\n-                                        <tbody  id=\"bookingData\">\n-                                        <?php\n-\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist =0;\n-                                        $totalPieces =0;\n-                                        $boxList = [];\n-                                        $book_no = null;\n-                                        $noofpc = 0;\n-                                        foreach( $delivery_list as $index=>$booking) {\n-                                            $tot_temp_exist= $booking->weight;\n-\n-                                            $tot_weight_exist +=$tot_temp_exist;\n-                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n-                                            $boxList = [];\n-                                            $boxListValue = [];\n-\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if(($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n-                                                if($lastStatus == 'Pending') {\n-                                                    $style= \"background-color:#ec1616e6;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else if ($lastStatus == 'Shipment on hold') {\n-                                                    $style= \"background-color:#ffdb00;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else {\n-                                                    $style= \"background-color:none;\";\n-                                                    $disabled = \"\";\n-                                                    $newClass = \"k-checkbox\";\n+                                        <tbody id=\"bookingData\">\n+                                            <?php\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n                                                 }\n-                                            }\n-                                            $nofpc = 0;\n-                                            $tot_weight = 0;\n-                                            $adress = null;\n-                                            $state = null;\n-                                            foreach ($ship_bookingsList as $key => $value) {\n-                                                if($value->shipment->booking_number == $booking->booking_number){\n-                                                    $nofpc = $nofpc + 1;\n-                                                    $tot_weight = $tot_weight + $value->weight;\n-                                                    $adress = $value->shipment->receiver->name.\", \".\n-                                                        $value->shipment->receiver->address->address.\", \".\n-                                                        $value->shipment->receiver->post.\", \".\n-                                                        $value->shipment->receiver->city_name.\", \".\n-                                                        $value->shipment->receiver->address->district->name.\", \".\n-                                                        $value->shipment->receiver->address->state->name .\", \".\n-                                                        $value->shipment->receiver->address->country->name.\", \".\n-                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n-                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n-                                                    // $state = $value->shipment->receiver->address->state->name;\n+                                    \n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    ?>\n+                                                    <tr>\n+                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n+                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n+                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n+                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n+                                                    </tr>\n+                                                    <?php\n                                                 }\n                                             }\n-\n-\n-\n                                             ?>\n-                                            <tr style=\"\">\n-                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n-                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n-                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n-                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n-                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n-                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n-                                                {{-- <td style=\"text-align:center\">\n-                                                    @foreach ($booking->packages as $item)\n-                                                        {{$item->description}}-{{$item->quantity}},\n-                                                    @endforeach\n-                                                </td> --}}\n-                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n-                                                <td style=\"text-align:center\">\n-                                                    @foreach($booking->boxes as $box)\n-                                                        @if ($box->ship_id == $shipId)\n-                                                            {{$box->box_name}},\n-                                                        @endif\n-                                                    @endforeach\n-                                                </td>\n-\n-                                            </tr>\n-                                        <?php\n-                                        }\n-                                        ?>\n-\n                                         </tbody>\n                                     </table>\n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733209789224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,41 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n+                                            foreach($delivery_list as $index => $booking) {\n                                                 $address = null;\n-                                                $state = null;\n                                                 \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    // Calculate weight and number of pieces for each box\n+                                                    $box_weight = 0;\n+                                                    $nofpc = 0;\n+                                                    $address = null;\n+                                    \n+                                                    // Get the shipments related to the current box\n+                                                    foreach ($ship_bookingsList as $key => $value) {\n+                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                                                            $nofpc++;\n+                                                            $box_weight += $value->weight;\n+                                                            $address = $value->shipment->receiver->name . \", \" . \n+                                                                $value->shipment->receiver->address->address . \", \" .\n+                                                                $value->shipment->receiver->post . \", \" .\n+                                                                $value->shipment->receiver->city_name . \", \" .\n+                                                                $value->shipment->receiver->address->district->name . \", \" .\n+                                                                $value->shipment->receiver->address->state->name . \", \" .\n+                                                                $value->shipment->receiver->address->country->name . \", \" .\n+                                                                'PIN:-' . $value->shipment->receiver->address->zip_code . \n+                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        }\n                                                     }\n-                                                }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,8 +87,9 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733209797156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,41 +43,39 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach($delivery_list as $index => $booking) {\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n                                                 $address = null;\n+                                                $state = null;\n                                                 \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n+                                                }\n+                                    \n                                                 // Loop through boxes and display each one in a separate row\n                                                 foreach ($booking->boxes as $box) {\n-                                                    // Calculate weight and number of pieces for each box\n-                                                    $box_weight = 0;\n-                                                    $nofpc = 0;\n-                                                    $address = null;\n-                                    \n-                                                    // Get the shipments related to the current box\n-                                                    foreach ($ship_bookingsList as $key => $value) {\n-                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                                                            $nofpc++;\n-                                                            $box_weight += $value->weight;\n-                                                            $address = $value->shipment->receiver->name . \", \" . \n-                                                                $value->shipment->receiver->address->address . \", \" .\n-                                                                $value->shipment->receiver->post . \", \" .\n-                                                                $value->shipment->receiver->city_name . \", \" .\n-                                                                $value->shipment->receiver->address->district->name . \", \" .\n-                                                                $value->shipment->receiver->address->state->name . \", \" .\n-                                                                $value->shipment->receiver->address->country->name . \", \" .\n-                                                                'PIN:-' . $value->shipment->receiver->address->zip_code . \n-                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        }\n-                                                    }\n-                                    \n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -87,9 +85,8 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210028535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,38 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                            foreach ($delivery_list as $index => $booking) {\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    $box_weight = 0;\n+                                                    $nofpc = 0;\n+                                                    $address = null;\n+                                                    \n+                                                    // Calculate weight and number of pieces for the current box\n+                                                    foreach ($ship_bookingsList as $key => $value) {\n+                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                                                            $nofpc++;\n+                                                            $box_weight += $value->weight;\n+                                                            $address = $value->shipment->receiver->name . \", \" .\n+                                                                $value->shipment->receiver->address->address . \", \" .\n+                                                                $value->shipment->receiver->post . \", \" .\n+                                                                $value->shipment->receiver->city_name . \", \" .\n+                                                                $value->shipment->receiver->address->district->name . \", \" .\n+                                                                $value->shipment->receiver->address->state->name . \", \" .\n+                                                                $value->shipment->receiver->address->country->name . \", \" .\n+                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        }\n                                                     }\n-                                                }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,8 +84,9 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210041616,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,38 +43,39 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach ($delivery_list as $index => $booking) {\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n+                                                }\n+                                    \n                                                 // Loop through boxes and display each one in a separate row\n                                                 foreach ($booking->boxes as $box) {\n-                                                    $box_weight = 0;\n-                                                    $nofpc = 0;\n-                                                    $address = null;\n-                                                    \n-                                                    // Calculate weight and number of pieces for the current box\n-                                                    foreach ($ship_bookingsList as $key => $value) {\n-                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                                                            $nofpc++;\n-                                                            $box_weight += $value->weight;\n-                                                            $address = $value->shipment->receiver->name . \", \" .\n-                                                                $value->shipment->receiver->address->address . \", \" .\n-                                                                $value->shipment->receiver->post . \", \" .\n-                                                                $value->shipment->receiver->city_name . \", \" .\n-                                                                $value->shipment->receiver->address->district->name . \", \" .\n-                                                                $value->shipment->receiver->address->state->name . \", \" .\n-                                                                $value->shipment->receiver->address->country->name . \", \" .\n-                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        }\n-                                                    }\n-                                    \n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -84,9 +85,8 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210232732,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,8 @@\n \n                             <div class=\"body p-2\">\n                                 <div class=\"table-responsive\">\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n-\n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n                                             <tr>\n                                                 <th>SL NO</th>\n@@ -43,39 +42,38 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                            foreach($delivery_list as $index => $booking) {\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    $box_weight = 0;\n+                                                    $nofpc = 0;\n+                                                    $address = null;\n+                                                    \n+                                                    // Calculate weight and number of pieces for the current box\n+                                                    foreach ($ship_bookingsList as $key => $value) {\n+                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                                                            $nofpc++;\n+                                                            $box_weight += $value->weight;  // Add weight for this specific box\n+                                                            $address = $value->shipment->receiver->name . \", \" .\n+                                                                $value->shipment->receiver->address->address . \", \" .\n+                                                                $value->shipment->receiver->post . \", \" .\n+                                                                $value->shipment->receiver->city_name . \", \" .\n+                                                                $value->shipment->receiver->address->district->name . \", \" .\n+                                                                $value->shipment->receiver->address->state->name . \", \" .\n+                                                                $value->shipment->receiver->address->country->name . \", \" .\n+                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        }\n                                                     }\n-                                                }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Display box-specific weight -->\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,8 +83,9 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210242915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,64 +28,64 @@\n \n                             <div class=\"body p-2\">\n                                 <div class=\"table-responsive\">\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n-                                    <table id=\"table1\" class=\"table center-aligned-table\">\n-                                        <thead class=\"text-center\">\n-                                            <tr>\n-                                                <th>SL NO</th>\n-                                                <th>INVOICE NO</th>\n-                                                <th>NO OF PCs</th>\n-                                                <th>WEIGHT</th>\n-                                                <th>CONSIGNEE ADDRESS</th>\n-                                                <th>STATE</th>\n-                                                <th>BOX NUMBER</th>\n-                                            </tr>\n-                                        </thead>\n-                                        <tbody id=\"bookingData\">\n-                                            <?php\n-                                            foreach($delivery_list as $index => $booking) {\n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n-                                                    $box_weight = 0;\n-                                                    $nofpc = 0;\n-                                                    $address = null;\n-                                                    \n-                                                    // Calculate weight and number of pieces for the current box\n-                                                    foreach ($ship_bookingsList as $key => $value) {\n-                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                                                            $nofpc++;\n-                                                            $box_weight += $value->weight;  // Add weight for this specific box\n-                                                            $address = $value->shipment->receiver->name . \", \" .\n-                                                                $value->shipment->receiver->address->address . \", \" .\n-                                                                $value->shipment->receiver->post . \", \" .\n-                                                                $value->shipment->receiver->city_name . \", \" .\n-                                                                $value->shipment->receiver->address->district->name . \", \" .\n-                                                                $value->shipment->receiver->address->state->name . \", \" .\n-                                                                $value->shipment->receiver->address->country->name . \", \" .\n-                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        }\n-                                                    }\n+<table id=\"table1\" class=\"table center-aligned-table\">\n+    <thead class=\"text-center\">\n+        <tr>\n+            <th>SL NO</th>\n+            <th>INVOICE NO</th>\n+            <th>NO OF PCs</th>\n+            <th>WEIGHT</th>\n+            <th>CONSIGNEE ADDRESS</th>\n+            <th>STATE</th>\n+            <th>BOX NUMBER</th>\n+        </tr>\n+    </thead>\n+    <tbody id=\"bookingData\">\n+        <?php\n+        foreach($delivery_list as $index => $booking) {\n+            // Loop through boxes and display each one in a separate row\n+            foreach ($booking->boxes as $box) {\n+                $box_weight = 0;\n+                $nofpc = 0;\n+                $address = null;\n+                \n+                // Calculate weight and number of pieces for the current box\n+                foreach ($ship_bookingsList as $key => $value) {\n+                    if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                        $nofpc++;\n+                        $box_weight += $value->weight;  // Add weight for this specific box\n+                        $address = $value->shipment->receiver->name . \", \" .\n+                            $value->shipment->receiver->address->address . \", \" .\n+                            $value->shipment->receiver->post . \", \" .\n+                            $value->shipment->receiver->city_name . \", \" .\n+                            $value->shipment->receiver->address->district->name . \", \" .\n+                            $value->shipment->receiver->address->state->name . \", \" .\n+                            $value->shipment->receiver->address->country->name . \", \" .\n+                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                    }\n+                }\n+\n+                ?>\n+                <tr>\n+                    <td style=\"text-align:center\">{{ $index + 1 }}</td>\n+                    <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n+                    <td style=\"text-align:center\">{{ $nofpc }}</td>\n+                    <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Display box-specific weight -->\n+                    <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n+                    <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n+                    <td style=\"text-align:center\">{{ $box->box_name }}</td>\n+                </tr>\n+                <?php\n+            }\n+        }\n+        ?>\n+    </tbody>\n+</table>\n+\n                                     \n-                                                    ?>\n-                                                    <tr>\n-                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n-                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n-                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Display box-specific weight -->\n-                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n-                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n-                                                    </tr>\n-                                                    <?php\n-                                                }\n-                                            }\n-                                            ?>\n-                                        </tbody>\n-                                    </table>\n-                                    \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210430810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,64 +28,65 @@\n \n                             <div class=\"body p-2\">\n                                 <div class=\"table-responsive\">\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n-<table id=\"table1\" class=\"table center-aligned-table\">\n-    <thead class=\"text-center\">\n-        <tr>\n-            <th>SL NO</th>\n-            <th>INVOICE NO</th>\n-            <th>NO OF PCs</th>\n-            <th>WEIGHT</th>\n-            <th>CONSIGNEE ADDRESS</th>\n-            <th>STATE</th>\n-            <th>BOX NUMBER</th>\n-        </tr>\n-    </thead>\n-    <tbody id=\"bookingData\">\n-        <?php\n-        foreach($delivery_list as $index => $booking) {\n-            // Loop through boxes and display each one in a separate row\n-            foreach ($booking->boxes as $box) {\n-                $box_weight = 0;\n-                $nofpc = 0;\n-                $address = null;\n-                \n-                // Calculate weight and number of pieces for the current box\n-                foreach ($ship_bookingsList as $key => $value) {\n-                    if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                        $nofpc++;\n-                        $box_weight += $value->weight;  // Add weight for this specific box\n-                        $address = $value->shipment->receiver->name . \", \" .\n-                            $value->shipment->receiver->address->address . \", \" .\n-                            $value->shipment->receiver->post . \", \" .\n-                            $value->shipment->receiver->city_name . \", \" .\n-                            $value->shipment->receiver->address->district->name . \", \" .\n-                            $value->shipment->receiver->address->state->name . \", \" .\n-                            $value->shipment->receiver->address->country->name . \", \" .\n-                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                    }\n-                }\n \n-                ?>\n-                <tr>\n-                    <td style=\"text-align:center\">{{ $index + 1 }}</td>\n-                    <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n-                    <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                    <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Display box-specific weight -->\n-                    <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n-                    <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n-                    <td style=\"text-align:center\">{{ $box->box_name }}</td>\n-                </tr>\n-                <?php\n-            }\n-        }\n-        ?>\n-    </tbody>\n-</table>\n-\n+                                    <table id=\"table1\" class=\"table center-aligned-table\">\n+                                        <thead class=\"text-center\">\n+                                            <tr>\n+                                                <th>SL NO</th>\n+                                                <th>INVOICE NO</th>\n+                                                <th>NO OF PCs</th>\n+                                                <th>WEIGHT</th>\n+                                                <th>CONSIGNEE ADDRESS</th>\n+                                                <th>STATE</th>\n+                                                <th>BOX NUMBER</th>\n+                                            </tr>\n+                                        </thead>\n+                                        <tbody id=\"bookingData\">\n+                                            <?php\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n+                                                }\n                                     \n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    ?>\n+                                                    <tr>\n+                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n+                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n+                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n+                                                        <td style=\"text-align:center\">{{ $weight }}</td>\n+                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n+                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n+                                                    </tr>\n+                                                    <?php\n+                                                }\n+                                            }\n+                                            ?>\n+                                        </tbody>\n+                                    </table>\n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210438052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n"
                },
                {
                    "date": 1733210638963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,39 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                            foreach ($delivery_list as $index => $booking) {\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    $box_weight = 0; // Initialize box-specific weight\n+                                                    $nofpc = 0;\n+                                                    $address = null;\n+                                    \n+                                                    // Calculate weight and number of pieces for the current box\n+                                                    foreach ($ship_bookingsList as $key => $value) {\n+                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                                                            $nofpc++;\n+                                                            $box_weight += $value->weight;  // Add weight for this specific box\n+                                                            $address = $value->shipment->receiver->name . \", \" .\n+                                                                $value->shipment->receiver->address->address . \", \" .\n+                                                                $value->shipment->receiver->post . \", \" .\n+                                                                $value->shipment->receiver->city_name . \", \" .\n+                                                                $value->shipment->receiver->address->district->name . \", \" .\n+                                                                $value->shipment->receiver->address->state->name . \", \" .\n+                                                                $value->shipment->receiver->address->country->name . \", \" .\n+                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        }\n                                                     }\n-                                                }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n+                                                    // Render table row for each box\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Box-specific weight -->\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,8 +85,9 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210648024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,39 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach ($delivery_list as $index => $booking) {\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n+                                                }\n+                                    \n                                                 // Loop through boxes and display each one in a separate row\n                                                 foreach ($booking->boxes as $box) {\n-                                                    $box_weight = 0; // Initialize box-specific weight\n-                                                    $nofpc = 0;\n-                                                    $address = null;\n-                                    \n-                                                    // Calculate weight and number of pieces for the current box\n-                                                    foreach ($ship_bookingsList as $key => $value) {\n-                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                                                            $nofpc++;\n-                                                            $box_weight += $value->weight;  // Add weight for this specific box\n-                                                            $address = $value->shipment->receiver->name . \", \" .\n-                                                                $value->shipment->receiver->address->address . \", \" .\n-                                                                $value->shipment->receiver->post . \", \" .\n-                                                                $value->shipment->receiver->city_name . \", \" .\n-                                                                $value->shipment->receiver->address->district->name . \", \" .\n-                                                                $value->shipment->receiver->address->state->name . \", \" .\n-                                                                $value->shipment->receiver->address->country->name . \", \" .\n-                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        }\n-                                                    }\n-                                    \n-                                                    // Render table row for each box\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Box-specific weight -->\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,9 +85,8 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210725102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,42 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                            foreach ($delivery_list as $index => $booking) {\n+                                                // Loop through each box for the current booking\n+                                                foreach ($booking->boxes as $box) {\n+                                                    $box_weight = 0; // Initialize box-specific weight\n+                                                    $nofpc = 0;      // Initialize number of pieces\n+                                                    $address = null;\n+                                    \n+                                                    // Loop through the ship bookings and calculate weight for the current box\n+                                                    foreach ($ship_bookingsList as $key => $value) {\n+                                                        // Check if the box is associated with this shipment\n+                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n+                                                            $nofpc++;  // Increment number of pieces for this box\n+                                                            $box_weight += $value->weight; // Add the weight of the current shipment to the box's total weight\n+                                                            \n+                                                            // Get the consignee address for this box's shipment\n+                                                            $address = $value->shipment->receiver->name . \", \" . \n+                                                                $value->shipment->receiver->address->address . \", \" .\n+                                                                $value->shipment->receiver->post . \", \" .\n+                                                                $value->shipment->receiver->city_name . \", \" .\n+                                                                $value->shipment->receiver->address->district->name . \", \" .\n+                                                                $value->shipment->receiver->address->state->name . \", \" .\n+                                                                $value->shipment->receiver->address->country->name . \", \" .\n+                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                        }\n                                                     }\n-                                                }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n+                                                    // Display the box's row with specific weight and details\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Box-specific weight -->\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -85,8 +88,9 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210731381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,42 +43,39 @@\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n                                             <?php\n-                                            foreach ($delivery_list as $index => $booking) {\n-                                                // Loop through each box for the current booking\n-                                                foreach ($booking->boxes as $box) {\n-                                                    $box_weight = 0; // Initialize box-specific weight\n-                                                    $nofpc = 0;      // Initialize number of pieces\n-                                                    $address = null;\n-                                    \n-                                                    // Loop through the ship bookings and calculate weight for the current box\n-                                                    foreach ($ship_bookingsList as $key => $value) {\n-                                                        // Check if the box is associated with this shipment\n-                                                        if ($value->shipment->booking_number == $booking->booking_number && $box->ship_id == $value->shipment->id) {\n-                                                            $nofpc++;  // Increment number of pieces for this box\n-                                                            $box_weight += $value->weight; // Add the weight of the current shipment to the box's total weight\n-                                                            \n-                                                            // Get the consignee address for this box's shipment\n-                                                            $address = $value->shipment->receiver->name . \", \" . \n-                                                                $value->shipment->receiver->address->address . \", \" .\n-                                                                $value->shipment->receiver->post . \", \" .\n-                                                                $value->shipment->receiver->city_name . \", \" .\n-                                                                $value->shipment->receiver->address->district->name . \", \" .\n-                                                                $value->shipment->receiver->address->state->name . \", \" .\n-                                                                $value->shipment->receiver->address->country->name . \", \" .\n-                                                                'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                                '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                        }\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n                                                     }\n+                                                }\n                                     \n-                                                    // Display the box's row with specific weight and details\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n                                                     ?>\n                                                     <tr>\n                                                         <td style=\"text-align:center\">{{ $index + 1 }}</td>\n                                                         <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n                                                         <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box_weight }}</td>  <!-- Box-specific weight -->\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n                                                         <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n                                                         <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n                                                         <td style=\"text-align:center\">{{ $box->box_name }}</td>\n                                                     </tr>\n@@ -88,9 +85,8 @@\n                                             ?>\n                                         </tbody>\n                                     </table>\n                                     \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210884926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,51 +42,90 @@\n                                                 <th>BOX NUMBER</th>\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n-                                            <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                    }\n-                                                }\n+                                        <?php\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist = 0;\n+                                        $totalPieces = 0;\n+                                        $boxList = [];\n+                                        $book_no = null;\n+                                        $noofpc = 0;\n+                                        foreach ($delivery_list as $index => $booking) {\n+                                            $tot_temp_exist = $booking->weight;\n+                                            $tot_weight_exist += $tot_temp_exist;\n+                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n+                                            $boxList = [];\n+                                            $boxListValue = [];\n+                                            \n+                                            // Get the status for the booking\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if (($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n+                                            }\n                                     \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n-                                                    ?>\n-                                                    <tr>\n-                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n-                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n-                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n-                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n-                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n-                                                    </tr>\n-                                                    <?php\n+                                            // Define row style and class based on status\n+                                            if ($lastStatus == 'Pending') {\n+                                                $style = \"background-color:#ec1616e6;\";\n+                                                $disabled = \"disabled='disabled'\";\n+                                                $newClass = \"k-state-disabled\";\n+                                            } else if ($lastStatus == 'Shipment on hold') {\n+                                                $style = \"background-color:#ffdb00;\";\n+                                                $disabled = \"disabled='disabled'\";\n+                                                $newClass = \"k-state-disabled\";\n+                                            } else {\n+                                                $style = \"background-color:none;\";\n+                                                $disabled = \"\";\n+                                                $newClass = \"k-checkbox\";\n+                                            }\n+                                    \n+                                            $nofpc = 0;\n+                                            $tot_weight = 0;\n+                                            $adress = null;\n+                                            $state = null;\n+                                            \n+                                            // Loop through the booking's related shipment items\n+                                            foreach ($ship_bookingsList as $key => $value) {\n+                                                if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                    $nofpc = $nofpc + 1;\n+                                                    $tot_weight = $tot_weight + $value->weight;\n+                                                    $adress = $value->shipment->receiver->name . \", \" .\n+                                                        $value->shipment->receiver->address->address . \", \" .\n+                                                        $value->shipment->receiver->post . \", \" .\n+                                                        $value->shipment->receiver->city_name . \", \" .\n+                                                        $value->shipment->receiver->address->district->name . \", \" .\n+                                                        $value->shipment->receiver->address->state->name . \", \" .\n+                                                        $value->shipment->receiver->address->country->name . \", \" .\n+                                                        'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                        '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n                                                 }\n                                             }\n-                                            ?>\n+                                    \n+                                            // For each box in the booking, create a new row with the same common details but different weights and box numbers\n+                                            foreach ($booking->boxes as $box) {\n+                                                echo \"<tr style='{$style}'>\";\n+                                                echo \"<td style='text-align:center'>{$index+1}</td>\";\n+                                                echo \"<td style='text-align:center'>{$booking->booking_number}</td>\";\n+                                                echo \"<td style='text-align:center'>{$nofpc}</td>\";\n+                                                echo \"<td style='text-align:center'>{$box->weight}</td>\"; // Display the weight of the current box\n+                                                echo \"<td style='text-align:center; text-transform: uppercase;'>{!! strtoupper($adress) !!}</td>\";\n+                                                echo \"<td style='text-align:center'>{$booking->receiver->address->state->name}</td>\";\n+                                                echo \"<td style='text-align:center'>{$box->box_name}</td>\"; // Display the box number\n+                                                echo \"</tr>\";\n+                                            }\n+                                        }\n+                                        ?>\n                                         </tbody>\n                                     </table>\n                                     \n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210899730,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,90 +42,51 @@\n                                                 <th>BOX NUMBER</th>\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n-                                        <?php\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist = 0;\n-                                        $totalPieces = 0;\n-                                        $boxList = [];\n-                                        $book_no = null;\n-                                        $noofpc = 0;\n-                                        foreach ($delivery_list as $index => $booking) {\n-                                            $tot_temp_exist = $booking->weight;\n-                                            $tot_weight_exist += $tot_temp_exist;\n-                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n-                                            $boxList = [];\n-                                            $boxListValue = [];\n-                                            \n-                                            // Get the status for the booking\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if (($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n-                                            }\n+                                            <?php\n+                                            foreach( $delivery_list as $index => $booking) {\n+                                                $tot_weight = 0;\n+                                                $nofpc = 0;\n+                                                $address = null;\n+                                                $state = null;\n+                                                \n+                                                // Calculate total weight and number of pieces\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $address = $value->shipment->receiver->name . \", \" . \n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n+                                                }\n                                     \n-                                            // Define row style and class based on status\n-                                            if ($lastStatus == 'Pending') {\n-                                                $style = \"background-color:#ec1616e6;\";\n-                                                $disabled = \"disabled='disabled'\";\n-                                                $newClass = \"k-state-disabled\";\n-                                            } else if ($lastStatus == 'Shipment on hold') {\n-                                                $style = \"background-color:#ffdb00;\";\n-                                                $disabled = \"disabled='disabled'\";\n-                                                $newClass = \"k-state-disabled\";\n-                                            } else {\n-                                                $style = \"background-color:none;\";\n-                                                $disabled = \"\";\n-                                                $newClass = \"k-checkbox\";\n-                                            }\n-                                    \n-                                            $nofpc = 0;\n-                                            $tot_weight = 0;\n-                                            $adress = null;\n-                                            $state = null;\n-                                            \n-                                            // Loop through the booking's related shipment items\n-                                            foreach ($ship_bookingsList as $key => $value) {\n-                                                if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                    $nofpc = $nofpc + 1;\n-                                                    $tot_weight = $tot_weight + $value->weight;\n-                                                    $adress = $value->shipment->receiver->name . \", \" .\n-                                                        $value->shipment->receiver->address->address . \", \" .\n-                                                        $value->shipment->receiver->post . \", \" .\n-                                                        $value->shipment->receiver->city_name . \", \" .\n-                                                        $value->shipment->receiver->address->district->name . \", \" .\n-                                                        $value->shipment->receiver->address->state->name . \", \" .\n-                                                        $value->shipment->receiver->address->country->name . \", \" .\n-                                                        'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                        '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                // Loop through boxes and display each one in a separate row\n+                                                foreach ($booking->boxes as $box) {\n+                                                    ?>\n+                                                    <tr>\n+                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n+                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n+                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n+                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n+                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n+                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n+                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n+                                                    </tr>\n+                                                    <?php\n                                                 }\n                                             }\n-                                    \n-                                            // For each box in the booking, create a new row with the same common details but different weights and box numbers\n-                                            foreach ($booking->boxes as $box) {\n-                                                echo \"<tr style='{$style}'>\";\n-                                                echo \"<td style='text-align:center'>{$index+1}</td>\";\n-                                                echo \"<td style='text-align:center'>{$booking->booking_number}</td>\";\n-                                                echo \"<td style='text-align:center'>{$nofpc}</td>\";\n-                                                echo \"<td style='text-align:center'>{$box->weight}</td>\"; // Display the weight of the current box\n-                                                echo \"<td style='text-align:center; text-transform: uppercase;'>{!! strtoupper($adress) !!}</td>\";\n-                                                echo \"<td style='text-align:center'>{$booking->receiver->address->state->name}</td>\";\n-                                                echo \"<td style='text-align:center'>{$box->box_name}</td>\"; // Display the box number\n-                                                echo \"</tr>\";\n-                                            }\n-                                        }\n-                                        ?>\n+                                            ?>\n                                         </tbody>\n                                     </table>\n                                     \n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733210947459,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,62 +31,112 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                            <tr>\n-                                                <th>SL NO</th>\n-                                                <th>INVOICE NO</th>\n-                                                <th>NO OF PCs</th>\n-                                                <th>WEIGHT</th>\n-                                                <th>CONSIGNEE ADDRESS</th>\n-                                                <th>STATE</th>\n-                                                <th>BOX NUMBER</th>\n-                                            </tr>\n+                                        <tr>\n+                                            <th>SL NO</th>\n+                                            <th>INVOICE NO</th>\n+                                            <th>NO OF PCs</th>\n+                                            <th>WEIGHT </th>\n+                                            <th>CONSIGNEE ADDRESS</th>\n+                                            <th>STATE</th>\n+                                            <th>BOX NUMBER </th>\n+\n+                                        </tr>\n                                         </thead>\n-                                        <tbody id=\"bookingData\">\n-                                            <?php\n-                                            foreach( $delivery_list as $index => $booking) {\n-                                                $tot_weight = 0;\n-                                                $nofpc = 0;\n-                                                $address = null;\n-                                                $state = null;\n-                                                \n-                                                // Calculate total weight and number of pieces\n-                                                foreach ($ship_bookingsList as $key => $value) {\n-                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n-                                                        $tot_weight += $value->weight;\n-                                                        $address = $value->shipment->receiver->name . \", \" . \n-                                                            $value->shipment->receiver->address->address . \", \" .\n-                                                            $value->shipment->receiver->post . \", \" .\n-                                                            $value->shipment->receiver->city_name . \", \" .\n-                                                            $value->shipment->receiver->address->district->name . \", \" .\n-                                                            $value->shipment->receiver->address->state->name . \", \" .\n-                                                            $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n-                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n-                                                    }\n+                                        <tbody  id=\"bookingData\">\n+                                        <?php\n+\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist =0;\n+                                        $totalPieces =0;\n+                                        $boxList = [];\n+                                        $book_no = null;\n+                                        $noofpc = 0;\n+                                        foreach( $delivery_list as $index=>$booking) {\n+                                            $tot_temp_exist= $booking->weight;\n+\n+                                            $tot_weight_exist +=$tot_temp_exist;\n+                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n+                                            $boxList = [];\n+                                            $boxListValue = [];\n+\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if(($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n+                                                if($lastStatus == 'Pending') {\n+                                                    $style= \"background-color:#ec1616e6;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else if ($lastStatus == 'Shipment on hold') {\n+                                                    $style= \"background-color:#ffdb00;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else {\n+                                                    $style= \"background-color:none;\";\n+                                                    $disabled = \"\";\n+                                                    $newClass = \"k-checkbox\";\n                                                 }\n-                                    \n-                                                // Loop through boxes and display each one in a separate row\n-                                                foreach ($booking->boxes as $box) {\n-                                                    ?>\n-                                                    <tr>\n-                                                        <td style=\"text-align:center\">{{ $index + 1 }}</td>\n-                                                        <td style=\"text-align:center\">{{ $booking->booking_number }}</td>\n-                                                        <td style=\"text-align:center\">{{ $nofpc }}</td>\n-                                                        <td style=\"text-align:center\">{{ $tot_weight }}</td>\n-                                                        <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($address) !!}</td>\n-                                                        <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td>\n-                                                        <td style=\"text-align:center\">{{ $box->box_name }}</td>\n-                                                    </tr>\n-                                                    <?php\n+                                            }\n+                                            $nofpc = 0;\n+                                            $tot_weight = 0;\n+                                            $adress = null;\n+                                            $state = null;\n+                                            foreach ($ship_bookingsList as $key => $value) {\n+                                                if($value->shipment->booking_number == $booking->booking_number){\n+                                                    $nofpc = $nofpc + 1;\n+                                                    $tot_weight = $tot_weight + $value->weight;\n+                                                    $adress = $value->shipment->receiver->name.\", \".\n+                                                        $value->shipment->receiver->address->address.\", \".\n+                                                        $value->shipment->receiver->post.\", \".\n+                                                        $value->shipment->receiver->city_name.\", \".\n+                                                        $value->shipment->receiver->address->district->name.\", \".\n+                                                        $value->shipment->receiver->address->state->name .\", \".\n+                                                        $value->shipment->receiver->address->country->name.\", \".\n+                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n+                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n+                                                    // $state = $value->shipment->receiver->address->state->name;\n                                                 }\n                                             }\n+\n+\n+\n                                             ?>\n+                                            <tr style=\"\">\n+                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n+                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n+                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n+                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n+                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n+                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n+                                                {{-- <td style=\"text-align:center\">\n+                                                    @foreach ($booking->packages as $item)\n+                                                        {{$item->description}}-{{$item->quantity}},\n+                                                    @endforeach\n+                                                </td> --}}\n+                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n+                                                <td style=\"text-align:center\">\n+                                                    @foreach($booking->boxes as $box)\n+                                                        @if ($box->ship_id == $shipId)\n+                                                            {{$box->box_name}},\n+                                                        @endif\n+                                                    @endforeach\n+                                                </td>\n+\n+                                            </tr>\n+                                        <?php\n+                                        }\n+                                        ?>\n+\n                                         </tbody>\n                                     </table>\n-                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733211062114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,112 +31,59 @@\n                                     <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n \n                                     <table id=\"table1\" class=\"table center-aligned-table\">\n                                         <thead class=\"text-center\">\n-                                        <tr>\n-                                            <th>SL NO</th>\n-                                            <th>INVOICE NO</th>\n-                                            <th>NO OF PCs</th>\n-                                            <th>WEIGHT </th>\n-                                            <th>CONSIGNEE ADDRESS</th>\n-                                            <th>STATE</th>\n-                                            <th>BOX NUMBER </th>\n-\n-                                        </tr>\n+                                            <tr>\n+                                                <th>SL NO</th>\n+                                                <th>INVOICE NO</th>\n+                                                <th>NO OF PCs</th>\n+                                                <th>WEIGHT</th>\n+                                                <th>CONSIGNEE ADDRESS</th>\n+                                                <th>STATE</th>\n+                                                <th>BOX NUMBER</th>\n+                                            </tr>\n                                         </thead>\n-                                        <tbody  id=\"bookingData\">\n-                                        <?php\n-\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist =0;\n-                                        $totalPieces =0;\n-                                        $boxList = [];\n-                                        $book_no = null;\n-                                        $noofpc = 0;\n-                                        foreach( $delivery_list as $index=>$booking) {\n-                                            $tot_temp_exist= $booking->weight;\n-\n-                                            $tot_weight_exist +=$tot_temp_exist;\n-                                            $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n-                                            $boxList = [];\n-                                            $boxListValue = [];\n-\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if(($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n-                                                if($lastStatus == 'Pending') {\n-                                                    $style= \"background-color:#ec1616e6;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else if ($lastStatus == 'Shipment on hold') {\n-                                                    $style= \"background-color:#ffdb00;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else {\n-                                                    $style= \"background-color:none;\";\n-                                                    $disabled = \"\";\n-                                                    $newClass = \"k-checkbox\";\n+                                        <tbody id=\"bookingData\">\n+                                        @foreach($delivery_list as $index => $booking)\n+                                            @php\n+                                                $nofpc = 0;\n+                                                $tot_weight = 0;\n+                                                $adress = null;\n+                                                $state = null;\n+                                    \n+                                                // Collecting all relevant address information for the consignee\n+                                                foreach ($ship_bookingsList as $key => $value) {\n+                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n+                                                        $nofpc++;\n+                                                        $tot_weight += $value->weight;\n+                                                        $adress = $value->shipment->receiver->name . \", \" .\n+                                                            $value->shipment->receiver->address->address . \", \" .\n+                                                            $value->shipment->receiver->post . \", \" .\n+                                                            $value->shipment->receiver->city_name . \", \" .\n+                                                            $value->shipment->receiver->address->district->name . \", \" .\n+                                                            $value->shipment->receiver->address->state->name . \", \" .\n+                                                            $value->shipment->receiver->address->country->name . \", \" .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n+                                                    }\n                                                 }\n-                                            }\n-                                            $nofpc = 0;\n-                                            $tot_weight = 0;\n-                                            $adress = null;\n-                                            $state = null;\n-                                            foreach ($ship_bookingsList as $key => $value) {\n-                                                if($value->shipment->booking_number == $booking->booking_number){\n-                                                    $nofpc = $nofpc + 1;\n-                                                    $tot_weight = $tot_weight + $value->weight;\n-                                                    $adress = $value->shipment->receiver->name.\", \".\n-                                                        $value->shipment->receiver->address->address.\", \".\n-                                                        $value->shipment->receiver->post.\", \".\n-                                                        $value->shipment->receiver->city_name.\", \".\n-                                                        $value->shipment->receiver->address->district->name.\", \".\n-                                                        $value->shipment->receiver->address->state->name .\", \".\n-                                                        $value->shipment->receiver->address->country->name.\", \".\n-                                                        'PIN:-'.$value->shipment->receiver->address->zip_code.\n-                                                        '<br> MOB:'.$value->shipment->receiver->phone.','.$value->shipment->receiver->whatsapp_number;\n-                                                    // $state = $value->shipment->receiver->address->state->name;\n-                                                }\n-                                            }\n-\n-\n-\n-                                            ?>\n-                                            <tr style=\"\">\n-                                                <td style=\"text-align:center\" >{{$index+1}}</td>\n-                                                <td style=\"text-align:center\" >{{ $booking->booking_number}}</td>\n-                                                <td style=\"text-align:center\">{{$nofpc}}</td>\n-                                                <td style=\"text-align:center\">{{ $tot_weight}}</td>\n-                                                <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td>\n-                                                {{-- <td style=\"text-align:center\">{{$state}}</td> --}}\n-                                                {{-- <td style=\"text-align:center\">\n-                                                    @foreach ($booking->packages as $item)\n-                                                        {{$item->description}}-{{$item->quantity}},\n-                                                    @endforeach\n-                                                </td> --}}\n-                                                <td>{{strtoupper($booking->receiver->address->state->name??'')}}</td>\n-                                                <td style=\"text-align:center\">\n-                                                    @foreach($booking->boxes as $box)\n-                                                        @if ($box->ship_id == $shipId)\n-                                                            {{$box->box_name}},\n-                                                        @endif\n-                                                    @endforeach\n-                                                </td>\n-\n-                                            </tr>\n-                                        <?php\n-                                        }\n-                                        ?>\n-\n+                                            @endphp\n+                                    \n+                                            @foreach($booking->boxes as $box)\n+                                                <tr style=\"\">\n+                                                    <td style=\"text-align:center\">{{ $index + 1 }}</td> <!-- SL NO will be different for each box -->\n+                                                    <td style=\"text-align:center\">{{ $booking->booking_number }}</td> <!-- INVOICE NO stays the same -->\n+                                                    <td style=\"text-align:center\">{{ $nofpc }}</td> <!-- NO OF PCs stays the same -->\n+                                                    <td style=\"text-align:center\">{{ $box->weight }}</td> <!-- Display the weight for this box -->\n+                                                    <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td> <!-- Same address for all boxes -->\n+                                                    <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td> <!-- Same state for all boxes -->\n+                                                    <td style=\"text-align:center\">{{ $box->box_name }}</td> <!-- Display the box number -->\n+                                                </tr>\n+                                            @endforeach\n+                                        @endforeach\n                                         </tbody>\n                                     </table>\n+                                    \n                                 </div>\n \n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733211110850,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,11 @@\n                                                 <th>BOX NUMBER</th>\n                                             </tr>\n                                         </thead>\n                                         <tbody id=\"bookingData\">\n+                                        @php\n+                                            $sl_no = 1; // Initialize a counter for SL NO\n+                                        @endphp\n                                         @foreach($delivery_list as $index => $booking)\n                                             @php\n                                                 $nofpc = 0;\n                                                 $tot_weight = 0;\n@@ -61,17 +64,17 @@\n                                                             $value->shipment->receiver->city_name . \", \" .\n                                                             $value->shipment->receiver->address->district->name . \", \" .\n                                                             $value->shipment->receiver->address->state->name . \", \" .\n                                                             $value->shipment->receiver->address->country->name . \", \" .\n-                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n+                                                            'PIN:-' . $value->shipment->receiver->address->zip_code . \n                                                             '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n                                                     }\n                                                 }\n                                             @endphp\n                                     \n                                             @foreach($booking->boxes as $box)\n                                                 <tr style=\"\">\n-                                                    <td style=\"text-align:center\">{{ $index + 1 }}</td> <!-- SL NO will be different for each box -->\n+                                                    <td style=\"text-align:center\">{{ $sl_no++ }}</td> <!-- SL NO is now incremented for each row -->\n                                                     <td style=\"text-align:center\">{{ $booking->booking_number }}</td> <!-- INVOICE NO stays the same -->\n                                                     <td style=\"text-align:center\">{{ $nofpc }}</td> <!-- NO OF PCs stays the same -->\n                                                     <td style=\"text-align:center\">{{ $box->weight }}</td> <!-- Display the weight for this box -->\n                                                     <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td> <!-- Same address for all boxes -->\n"
                },
                {
                    "date": 1733211214238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n                                     \n                                                 // Collecting all relevant address information for the consignee\n                                                 foreach ($ship_bookingsList as $key => $value) {\n                                                     if ($value->shipment->booking_number == $booking->booking_number) {\n-                                                        $nofpc++;\n+                                                        $nofpc++;  // Increment number of pieces for each associated shipment\n                                                         $tot_weight += $value->weight;\n                                                         $adress = $value->shipment->receiver->name . \", \" .\n                                                             $value->shipment->receiver->address->address . \", \" .\n                                                             $value->shipment->receiver->post . \", \" .\n@@ -74,9 +74,9 @@\n                                             @foreach($booking->boxes as $box)\n                                                 <tr style=\"\">\n                                                     <td style=\"text-align:center\">{{ $sl_no++ }}</td> <!-- SL NO is now incremented for each row -->\n                                                     <td style=\"text-align:center\">{{ $booking->booking_number }}</td> <!-- INVOICE NO stays the same -->\n-                                                    <td style=\"text-align:center\">{{ $nofpc }}</td> <!-- NO OF PCs stays the same -->\n+                                                    <td style=\"text-align:center\">1</td> <!-- NO OF PCs is 1 per box -->\n                                                     <td style=\"text-align:center\">{{ $box->weight }}</td> <!-- Display the weight for this box -->\n                                                     <td style=\"text-align:center; text-transform: uppercase;\">{!! strtoupper($adress) !!}</td> <!-- Same address for all boxes -->\n                                                     <td style=\"text-align:center\">{{ strtoupper($booking->receiver->address->state->name ?? '') }}</td> <!-- Same state for all boxes -->\n                                                     <td style=\"text-align:center\">{{ $box->box_name }}</td> <!-- Display the box number -->\n"
                }
            ],
            "date": 1733209310305,
            "name": "Commit-0",
            "content": "@extends('layouts.app')\n\n@section('content')\n\n    <div class=\"content-page\" id=\"content-page\">\n        <div class=\"content\">\n\n            <!-- Start Content-->\n            <div class=\"container-fluid\">\n\n                <!-- start page title -->\n                <div class=\"row\">\n                    <div class=\"col-12\">\n                        <div class=\"page-title-box\">\n                            <div class=\"page-title-right\">\n                                {{-- {!! breadcrumbs() !!} --}}\n                            </div>\n                            <h4 class=\"page-title\"> Delivery List</h4>\n\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class=\"row clearfix\">\n                    <div class=\"col-md-12\">\n                        <div class=\"card\">\n\n                            <div class=\"body p-2\">\n                                <div class=\"table-responsive\">\n                                    <button id=\"exportBtn\" class=\"btn btn-secondary mb-2\">Export to Excel</button>\n\n                                    <table id=\"table1\" class=\"table center-aligned-table\">\n                                        <thead class=\"text-center\">\n                                            <tr>\n                                                <th>SL NO</th>\n                                                <th>INVOICE NO</th>\n                                                <th>NO OF PCs</th>\n                                                <th>WEIGHT </th>\n                                                <th>CONSIGNEE ADDRESS</th>\n                                                <th>STATE</th>\n                                                <th>BOX NUMBER </th>\n                                            </tr>\n                                        </thead>\n                                        <tbody id=\"bookingData\">\n                                            <?php\n                                            $tot_weight_exist = 0;\n                                            $tot_value_exist = 0;\n                                            $tot_temp_exist = 0;\n                                            $totalPieces = 0;\n                                            $boxList = [];\n                                            $book_no = null;\n                                            $noofpc = 0;\n                                            foreach ($delivery_list as $index => $booking) {\n                                                $tot_temp_exist = $booking->weight;\n                                                $tot_weight_exist += $tot_temp_exist;\n                                                $tot_value_exist += $booking->total_value + $booking->box_packing_charge;\n                                                $totalPieces += 1;\n                                                $List = '';\n                                                $ListValue = '';\n                                                $boxList = [];\n                                                $boxListValue = [];\n                                    \n                                                $status = '';\n                                                $lastStatus = '';\n                                                if (($booking->boxStatuses != null)) {\n                                                    $status = collect($booking->boxStatuses)->last();\n                                                    $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n                                                    $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name;\n                                                    if ($lastStatus == 'Pending') {\n                                                        $style = \"background-color:#ec1616e6;\";\n                                                        $disabled = \"disabled='disabled'\";\n                                                        $newClass = \"k-state-disabled\";\n                                                    } else if ($lastStatus == 'Shipment on hold') {\n                                                        $style = \"background-color:#ffdb00;\";\n                                                        $disabled = \"disabled='disabled'\";\n                                                        $newClass = \"k-state-disabled\";\n                                                    } else {\n                                                        $style = \"background-color:none;\";\n                                                        $disabled = \"\";\n                                                        $newClass = \"k-checkbox\";\n                                                    }\n                                                }\n                                                $nofpc = 0;\n                                                $tot_weight = 0;\n                                                $adress = null;\n                                                $state = null;\n                                                foreach ($ship_bookingsList as $key => $value) {\n                                                    if ($value->shipment->booking_number == $booking->booking_number) {\n                                                        $nofpc = $nofpc + 1;\n                                                        $tot_weight = $tot_weight + $value->weight;\n                                                        $adress = $value->shipment->receiver->name . \", \" .\n                                                            $value->shipment->receiver->address->address . \", \" .\n                                                            $value->shipment->receiver->post . \", \" .\n                                                            $value->shipment->receiver->city_name . \", \" .\n                                                            $value->shipment->receiver->address->district->name . \", \" .\n                                                            $value->shipment->receiver->address->state->name . \", \" .\n                                                            $value->shipment->receiver->address->country->name . \", \" .\n                                                            'PIN:-' . $value->shipment->receiver->address->zip_code .\n                                                            '<br> MOB:' . $value->shipment->receiver->phone . ',' . $value->shipment->receiver->whatsapp_number;\n                                                    }\n                                                }\n                                    \n                                                $boxes = $booking->boxes;\n                                                // Check if there is more than one box\n                                                $boxCount = count($boxes);\n                                                foreach ($boxes as $boxIndex => $box) {\n                                                    ?>\n                                                    <tr>\n                                                        <td style=\"text-align:center\"><?php echo $index + 1; ?></td>\n                                                        <td style=\"text-align:center\"><?php echo $booking->booking_number; ?></td>\n                                                        <td style=\"text-align:center\"><?php echo $nofpc; ?></td>\n                                                        <td style=\"text-align:center\"><?php echo $tot_weight; ?></td>\n                                                        <td style=\"text-align:center; text-transform: uppercase;\"><?php echo strtoupper($adress); ?></td>\n                                                        <td style=\"text-align:center\"><?php echo strtoupper($booking->receiver->address->state->name ?? ''); ?></td>\n                                                        <td style=\"text-align:center\"><?php echo $box->box_name; ?></td>\n                                                    </tr>\n                                                    <?php\n                                                    // If there are more boxes, create a new row for the rest of the boxes\n                                                    if ($boxCount > 1 && $boxIndex < $boxCount - 1) {\n                                                        ?>\n                                                        <tr>\n                                                            <td colspan=\"6\"></td>\n                                                            <td style=\"text-align:center\"><?php echo $box->box_name; ?></td>\n                                                        </tr>\n                                                        <?php\n                                                    }\n                                                }\n                                            }\n                                            ?>\n                                        </tbody>\n                                    </table>\n                                    \n                                </div>\n\n                            </div>\n                        </div>\n\n\n                    </div>\n                </div>\n            </div>\n            <!-- end container-fluid -->\n\n        </div>\n\n\n@endsection\n@section('styles')\n    @include('layouts.datatables_style')\n    <style>\n        .floatRight {float:right;}\n        .m-l-10 {margin-left:10px!important;}\n    </style>\n@endsection\n\n@section('scripts')\n    @include('layouts.datatables_js')\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.3/xlsx.full.min.js\"></script>\n    <script>\n        document.getElementById('exportBtn').addEventListener('click', function () {\n            exportToExcel();\n        });\n\n        function exportToExcel() {\n            let table1 = document.getElementById('table1');\n\n            // Create a new workbook\n            let wb = XLSX.utils.book_new();\n\n            // Create a worksheet\n            let ws = XLSX.utils.table_to_sheet(table1);\n\n            // Set alignment for each cell\n            for (let i = 0; i < ws['!ref'].split(':')[1].replace(/[A-Z]/g, '').charCodeAt(0); i++) {\n                for (let j = 1; j < ws['!ref'].split(':')[1].replace(/\\d/g, ''); j++) {\n                    let cellAddress = XLSX.utils.encode_cell({ r: j, c: i });\n                    if (ws[cellAddress]) {\n                        ws[cellAddress].v = ws[cellAddress].v.toString().toUpperCase();\n                        ws[cellAddress].s = { alignment: { horizontal: 'center' } };\n                    }\n                }\n            }\n\n            // Add the worksheet to the workbook\n            XLSX.utils.book_append_sheet(wb, ws, 'Sheet 1');\n\n            // Save the workbook\n            XLSX.writeFile(wb, 'Delivery List.xlsx');\n        }\n    </script>\n    <script>\n        $(function () {\n            $('#shipsTable').DataTable( {\n                ordering: false,\n                searching: false,\n                info: false,\n                bPaginate: false,\n                dom: 'Bfrtip',\n                autoWidth: false,\n                scrollX: true,\n                buttons: [\n                {\n                    filename: 'Delivery List',\n                }]\n            } );\n        });\n\n\n </script>\n\n@endsection\n"
        }
    ]
}