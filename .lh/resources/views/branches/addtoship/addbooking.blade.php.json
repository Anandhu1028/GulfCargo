{
    "sourceFile": "resources/views/branches/addtoship/addbooking.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1733202003731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733202014633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -470,76 +470,89 @@\n                                 </select>\n                             </div>\n                         </div>\n                         <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n-                        style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                     <thead style=\"font-size:14px;\">\n-                     <tr>\n-                         <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                         <th>Collection Date <br> Collection Office</th>\n-                         <th>ship metho</th>\n-                         <th>Collection Staff<br> Collection Agent</th>\n-                         <th>Customer<br>Sender/Receiver</th>\n-                         <th>State/Emirates<br>Country</th>\n-                         <th>Cargo No<br>Type</th>\n-                         <th>Cargo Box<br>No</th>\n-                         <th>Total<br>Weight</th>\n-                         <th>Total<br>Amount</th>\n-                         <th>Total<br>Value</th>\n-                     </tr>\n-                     </thead>\n-                     <tbody>\n-                     @foreach($boxes as $key => $boxes)\n-                         <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n-                             <td>\n-                                 <input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\"\n-                                        selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight ?? 0}}\"\n-                                        boxVal=\"{{$boxes->packages->pluck('subtotal')->sum() ?? 0}}\" \n-                                        @if($boxes->is_select == 1) checked @endif>\n-                             </td>\n-                             <td>{{ !empty($boxes->shipment->created_date) ? date('d-m-Y', strtotime($boxes->shipment->created_date)) : '' }}\n-                                 <br> {{ $boxes->shipment->agency ? $boxes->shipment->agency->name : '-' }}\n-                             </td>\n-                             <td>{{$boxes->shipment->shipMethType ? $boxes->shipment->shipMethType->name : ''}}</td>\n-                             <td>\n-                                 @if($boxes->shipment->collected_by == 'driver')\n-                                     {{ $boxes->shipment->driver ? $boxes->shipment->driver->name : '-' }}\n-                                 @else\n-                                     {{$boxes->shipment->staff ? $boxes->shipment->staff->full_name : '-'}}\n-                                 @endif\n-                             </td>\n-                             <td>{{ $boxes->shipment->receiver->name ?? \"\"}} <br>{{ $boxes->shipment->receiver->address->country->name ?? \"\"}}</td>\n-                             <td>{{ $boxes->shipment->receiver->address->country->name ?? \"\"}}</td>\n-                             <td>{{ $boxes->shipment->booking_number ?? \"\"}} <br> {{ $type }}</td>\n-                             <td>{{ $boxes->box_name ?? \"\"}}</td>\n-                             <td>{{ $boxes->weight ?? \"\"}}</td>\n-                             <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n-                             <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight ?? 0 }}</td>\n-                         </tr>\n-                     @endforeach\n-                     </tbody>\n-                 </table>\n-                 \n-                 <script>\n-                     $(document).ready(function () {\n-                         // Alert when a checkbox is selected or deselected\n-                         $(\".bookingSelection\").on(\"change\", function () {\n-                             if (this.checked) {\n-                                 alert(\"You selected a box with ID: \" + $(this).val());\n-                             } else {\n-                                 alert(\"You deselected a box with ID: \" + $(this).val());\n-                             }\n-                         });\n-                 \n-                         // Select/Deselect all checkboxes\n-                         $(\"#bookingList_checkbox\").on(\"change\", function () {\n-                             var isChecked = $(this).is(\":checked\");\n-                             $(\".bookingSelection\").prop(\"checked\", isChecked);\n-                             alert(isChecked ? \"All boxes selected\" : \"All boxes deselected\");\n-                         });\n-                     });\n-                 </script>\n-                 \n+                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead style=\"font-size:14px;\">\n+                            <tr >\n+                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                                    <th>Collection Date <br> Collection Office</th>\n+                                    <th>ship metho</th>\n+                                    <th>Collection Staff<br> Collection Agent</th>\n+                                    <th>Customer<br>Sender/Receiver</th>\n+                                    <th>State/Emirates<br>Country</th>\n+                                    <th>Cargo No<br>Type</th>\n+                                    <th>Cargo Box<br>No</th>\n+                                    <th>Total<br>Weight</th>\n+                                    <th>Total<br>Amount</th>\n+                                    <th>Total<br>Value</th>\n+                                </tr>\n+                            </thead>\n+                            <tbody>\n+                                @foreach($boxes as $key=> $boxes)\n+                                    <?php\n+\n+                                        if(!empty($boxes->shipment->statusVal->name)){\n+                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n+                                                $showAddItems = true;\n+                                                $style =\"style=background-color:yellow;padding:5px;\";\n+                                            } else {\n+                                                $style =\"style=background-color:none\";\n+                                                $showAddItems = false;\n+\n+                                            }\n+                                        }\n+                                        $type = \"\";\n+                                        if(!empty($boxes->shipment->delivery_type)){\n+                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n+                                                $type = \"Door To Door\";\n+                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n+                                                $type =\"Door To Port\";\n+                                            }\n+                                            else {\n+                                                $type =\"\";\n+                                            }\n+                                        }\n+                                        if($boxes->is_select == 1) {\n+                                            $total_count += 1;\n+                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n+                                            $tot_sel_weight += $boxes->weight;\n+                                            $boxList[] = $boxes->id;\n+\n+                                        }\n+                                    ?>\n+                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n+                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n+                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n+                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n+                                        </td>\n+                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n+\n+                                        <td> @if($boxes->shipment->collected_by == 'driver')\n+                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n+                                                @else\n+                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n+                                                @endif\n+                                        </td>\n+                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n+                                        <td>{{ $boxes->box_name??\"\"}}</td>\n+                                        <td>{{ $boxes->weight??\"\"}}</td>\n+                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n+                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n+\n+                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n+                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n+\n+                                    </tr>\n+                                @endforeach\n+                                <?php\n+\n+                                $List = implode(', ', $boxList);\n+                                ?>\n+                            </tbody>\n+                        </table>\n                         <div class=\"row m-t-50\">\n                             <div class=\"col-md-12\">\n                                 <div class=\"\">\n                                     <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n"
                },
                {
                    "date": 1733202852054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -469,95 +469,56 @@\n                                     @endforeach\n                                 </select>\n                             </div>\n                         </div>\n-                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n-                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                            <thead style=\"font-size:14px;\">\n-                            <tr >\n-                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                                    <th>Collection Date <br> Collection Office</th>\n-                                    <th>ship metho</th>\n-                                    <th>Collection Staff<br> Collection Agent</th>\n-                                    <th>Customer<br>Sender/Receiver</th>\n-                                    <th>State/Emirates<br>Country</th>\n-                                    <th>Cargo No<br>Type</th>\n-                                    <th>Cargo Box<br>No</th>\n-                                    <th>Total<br>Weight</th>\n-                                    <th>Total<br>Amount</th>\n-                                    <th>Total<br>Value</th>\n-                                </tr>\n-                            </thead>\n-                            <tbody>\n-                                @foreach($boxes as $key=> $boxes)\n-                                    <?php\n-\n-                                        if(!empty($boxes->shipment->statusVal->name)){\n-                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n-                                                $showAddItems = true;\n-                                                $style =\"style=background-color:yellow;padding:5px;\";\n-                                            } else {\n-                                                $style =\"style=background-color:none\";\n-                                                $showAddItems = false;\n-\n-                                            }\n-                                        }\n-                                        $type = \"\";\n-                                        if(!empty($boxes->shipment->delivery_type)){\n-                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n-                                                $type = \"Door To Door\";\n-                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n-                                                $type =\"Door To Port\";\n-                                            }\n-                                            else {\n-                                                $type =\"\";\n-                                            }\n-                                        }\n-                                        if($boxes->is_select == 1) {\n-                                            $total_count += 1;\n-                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n-                                            $tot_sel_weight += $boxes->weight;\n-                                            $boxList[] = $boxes->id;\n-\n-                                        }\n-                                    ?>\n-                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n-                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n-                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n-                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n-                                        </td>\n-                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n-\n-                                        <td> @if($boxes->shipment->collected_by == 'driver')\n-                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n-                                                @else\n-                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n-                                                @endif\n-                                        </td>\n-                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n-                                        <td>{{ $boxes->box_name??\"\"}}</td>\n-                                        <td>{{ $boxes->weight??\"\"}}</td>\n-                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n-                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n-\n-                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n-                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n-\n+                        <form action=\"{{ route('branch.ships.addMultipleBookingtoshipSubmit') }}\" method=\"post\" enctype=\"multipart/form-data\">\n+                            @csrf\n+                        \n+                            <!-- Display Validation Error -->\n+                            @if ($errors->has('bookingSelection'))\n+                                <div class=\"alert alert-danger\">\n+                                    <strong>{{ $errors->first('bookingSelection') }}</strong>\n+                                </div>\n+                            @endif\n+                        \n+                            <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\">\n+                                <thead style=\"font-size:14px;\">\n+                                    <tr>\n+                                        <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                                        <th>Collection Date <br> Collection Office</th>\n+                                        <th>Ship Method</th>\n+                                        <th>Collection Staff<br> Collection Agent</th>\n+                                        <th>Customer<br>Sender/Receiver</th>\n+                                        <th>State/Emirates<br>Country</th>\n+                                        <th>Cargo No<br>Type</th>\n+                                        <th>Cargo Box<br>No</th>\n+                                        <th>Total<br>Weight</th>\n+                                        <th>Total<br>Amount</th>\n+                                        <th>Total<br>Value</th>\n                                     </tr>\n-                                @endforeach\n-                                <?php\n-\n-                                $List = implode(', ', $boxList);\n-                                ?>\n-                            </tbody>\n-                        </table>\n-                        <div class=\"row m-t-50\">\n-                            <div class=\"col-md-12\">\n-                                <div class=\"\">\n-                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-                                        @csrf\n+                                </thead>\n+                                <tbody>\n+                                    @foreach($boxes as $key => $box)\n+                                        <tr data-shipment-type-id=\"{{ $box->shipment->shipping_method_id }}\">\n+                                            <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" value=\"{{ $box->id }}\" boxWt=\"{{ $box->weight ?? 0 }}\" boxVal=\"{{ $box->packages->pluck('subtotal')->sum() ?? 0 }}\" @if($box->is_select == 1) checked @endif ></td>\n+                                            <td>{{ !empty($box->shipment->created_date) ? date('d-m-Y', strtotime($box->shipment->created_date)) : '' }} <br> {{ $box->shipment->agency ? $box->shipment->agency->name : '-' }}</td>\n+                                            <td>{{ $box->shipment->shipMethType ? $box->shipment->shipMethType->name : '' }}</td>\n+                                            <td> @if($box->shipment->collected_by == 'driver') {{ $box->shipment->driver ? $box->shipment->driver->name : '-' }} @else {{ $box->shipment->staff ? $box->shipment->staff->full_name : '-' }} @endif</td>\n+                                            <td>{{ $box->shipment->receiver->name ?? \"\" }} <br> {{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n+                                            <td>{{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n+                                            <td>{{ $box->shipment->booking_number ?? \"\" }} <br> {{ $type }}</td>\n+                                            <td>{{ $box->box_name ?? \"\" }}</td>\n+                                            <td>{{ $box->weight ?? \"\" }}</td>\n+                                            <td class=\"tot_amnt\">{{ $box->packages->pluck('subtotal')->sum() }}</td>\n+                                            <td class=\"boxVal\">{{ $box->shipment->amount_normal_weight ?? 0 }}</td>\n+                                        </tr>\n+                                    @endforeach\n+                                </tbody>\n+                            </table>\n+                        \n+                            <div class=\"row m-t-50\">\n+                                <div class=\"col-md-12\">\n+                                    <div class=\"\">\n                                         <div class=\"col-md-12\">\n                                             <div class=\"row\">\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n@@ -578,17 +539,21 @@\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-2\" style=\"margin:30px;\">\n                                                     <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{ ($List) ? $List : '' }}\" id=\"selected_box_id\"/>\n                                                         <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{ $ships->id }}\"/>\n                                                         <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n                                                     </div>\n                                                 </div>\n                                             </div>\n                                         </div>\n-                                    </form>\n+                                    </div>\n+                                </div>\n+                            </div>\n+                        </form>\n+                        \n \n                                 </div>\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733202865417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -470,91 +470,91 @@\n                                 </select>\n                             </div>\n                         </div>\n                         <form action=\"{{ route('branch.ships.addMultipleBookingtoshipSubmit') }}\" method=\"post\" enctype=\"multipart/form-data\">\n-                            @csrf\n-                        \n-                            <!-- Display Validation Error -->\n-                            @if ($errors->has('bookingSelection'))\n-                                <div class=\"alert alert-danger\">\n-                                    <strong>{{ $errors->first('bookingSelection') }}</strong>\n-                                </div>\n-                            @endif\n-                        \n-                            <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\">\n-                                <thead style=\"font-size:14px;\">\n-                                    <tr>\n-                                        <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                                        <th>Collection Date <br> Collection Office</th>\n-                                        <th>Ship Method</th>\n-                                        <th>Collection Staff<br> Collection Agent</th>\n-                                        <th>Customer<br>Sender/Receiver</th>\n-                                        <th>State/Emirates<br>Country</th>\n-                                        <th>Cargo No<br>Type</th>\n-                                        <th>Cargo Box<br>No</th>\n-                                        <th>Total<br>Weight</th>\n-                                        <th>Total<br>Amount</th>\n-                                        <th>Total<br>Value</th>\n-                                    </tr>\n-                                </thead>\n-                                <tbody>\n-                                    @foreach($boxes as $key => $box)\n-                                        <tr data-shipment-type-id=\"{{ $box->shipment->shipping_method_id }}\">\n-                                            <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" value=\"{{ $box->id }}\" boxWt=\"{{ $box->weight ?? 0 }}\" boxVal=\"{{ $box->packages->pluck('subtotal')->sum() ?? 0 }}\" @if($box->is_select == 1) checked @endif ></td>\n-                                            <td>{{ !empty($box->shipment->created_date) ? date('d-m-Y', strtotime($box->shipment->created_date)) : '' }} <br> {{ $box->shipment->agency ? $box->shipment->agency->name : '-' }}</td>\n-                                            <td>{{ $box->shipment->shipMethType ? $box->shipment->shipMethType->name : '' }}</td>\n-                                            <td> @if($box->shipment->collected_by == 'driver') {{ $box->shipment->driver ? $box->shipment->driver->name : '-' }} @else {{ $box->shipment->staff ? $box->shipment->staff->full_name : '-' }} @endif</td>\n-                                            <td>{{ $box->shipment->receiver->name ?? \"\" }} <br> {{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n-                                            <td>{{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n-                                            <td>{{ $box->shipment->booking_number ?? \"\" }} <br> {{ $type }}</td>\n-                                            <td>{{ $box->box_name ?? \"\" }}</td>\n-                                            <td>{{ $box->weight ?? \"\" }}</td>\n-                                            <td class=\"tot_amnt\">{{ $box->packages->pluck('subtotal')->sum() }}</td>\n-                                            <td class=\"boxVal\">{{ $box->shipment->amount_normal_weight ?? 0 }}</td>\n-                                        </tr>\n-                                    @endforeach\n-                                </tbody>\n-                            </table>\n-                        \n-                            <div class=\"row m-t-50\">\n-                                <div class=\"col-md-12\">\n-                                    <div class=\"\">\n-                                        <div class=\"col-md-12\">\n-                                            <div class=\"row\">\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Selected Boxes</label>\n-                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Weight</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Amount</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n-                                                    <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{ ($List) ? $List : '' }}\" id=\"selected_box_id\"/>\n-                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{ $ships->id }}\"/>\n-                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-                                </div>\n+    @csrf\n+\n+    <!-- Display Validation Error -->\n+    @if ($errors->has('bookingSelection'))\n+        <div class=\"alert alert-danger\">\n+            <strong>{{ $errors->first('bookingSelection') }}</strong>\n+        </div>\n+    @endif\n+\n+    <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\">\n+        <thead style=\"font-size:14px;\">\n+            <tr>\n+                <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                <th>Collection Date <br> Collection Office</th>\n+                <th>Ship Method</th>\n+                <th>Collection Staff<br> Collection Agent</th>\n+                <th>Customer<br>Sender/Receiver</th>\n+                <th>State/Emirates<br>Country</th>\n+                <th>Cargo No<br>Type</th>\n+                <th>Cargo Box<br>No</th>\n+                <th>Total<br>Weight</th>\n+                <th>Total<br>Amount</th>\n+                <th>Total<br>Value</th>\n+            </tr>\n+        </thead>\n+        <tbody>\n+            @foreach($boxes as $key => $box)\n+                <tr data-shipment-type-id=\"{{ $box->shipment->shipping_method_id }}\">\n+                    <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" value=\"{{ $box->id }}\" boxWt=\"{{ $box->weight ?? 0 }}\" boxVal=\"{{ $box->packages->pluck('subtotal')->sum() ?? 0 }}\" @if($box->is_select == 1) checked @endif ></td>\n+                    <td>{{ !empty($box->shipment->created_date) ? date('d-m-Y', strtotime($box->shipment->created_date)) : '' }} <br> {{ $box->shipment->agency ? $box->shipment->agency->name : '-' }}</td>\n+                    <td>{{ $box->shipment->shipMethType ? $box->shipment->shipMethType->name : '' }}</td>\n+                    <td> @if($box->shipment->collected_by == 'driver') {{ $box->shipment->driver ? $box->shipment->driver->name : '-' }} @else {{ $box->shipment->staff ? $box->shipment->staff->full_name : '-' }} @endif</td>\n+                    <td>{{ $box->shipment->receiver->name ?? \"\" }} <br> {{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n+                    <td>{{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n+                    <td>{{ $box->shipment->booking_number ?? \"\" }} <br> {{ $type }}</td>\n+                    <td>{{ $box->box_name ?? \"\" }}</td>\n+                    <td>{{ $box->weight ?? \"\" }}</td>\n+                    <td class=\"tot_amnt\">{{ $box->packages->pluck('subtotal')->sum() }}</td>\n+                    <td class=\"boxVal\">{{ $box->shipment->amount_normal_weight ?? 0 }}</td>\n+                </tr>\n+            @endforeach\n+        </tbody>\n+    </table>\n+\n+    <div class=\"row m-t-50\">\n+        <div class=\"col-md-12\">\n+            <div class=\"\">\n+                <div class=\"col-md-12\">\n+                    <div class=\"row\">\n+                        <div class=\"col-md-3\">\n+                            <div class=\"form-group\">\n+                                <label>Total Selected Boxes</label>\n+                                <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n                             </div>\n-                        </form>\n-                        \n+                        </div>\n+                        <div class=\"col-md-3\">\n+                            <div class=\"form-group\">\n+                                <label>Total Weight</label>\n+                                <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n+                            </div>\n+                        </div>\n+                        <div class=\"col-md-3\">\n+                            <div class=\"form-group\">\n+                                <label>Total Amount</label>\n+                                <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n+                            </div>\n+                        </div>\n+                        <div class=\"col-md-2\" style=\"margin:30px;\">\n+                            <div class=\"form-group\">\n+                                <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{ ($List) ? $List : '' }}\" id=\"selected_box_id\"/>\n+                                <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{ $ships->id }}\"/>\n+                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                            </div>\n+                        </div>\n+                    </div>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+</form>\n \n+\n                                 </div>\n                             </div>\n                         </div>\n                     </div>\n"
                },
                {
                    "date": 1733202876300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -469,92 +469,127 @@\n                                     @endforeach\n                                 </select>\n                             </div>\n                         </div>\n-                        <form action=\"{{ route('branch.ships.addMultipleBookingtoshipSubmit') }}\" method=\"post\" enctype=\"multipart/form-data\">\n-    @csrf\n+                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n+                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead style=\"font-size:14px;\">\n+                            <tr >\n+                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                                    <th>Collection Date <br> Collection Office</th>\n+                                    <th>ship metho</th>\n+                                    <th>Collection Staff<br> Collection Agent</th>\n+                                    <th>Customer<br>Sender/Receiver</th>\n+                                    <th>State/Emirates<br>Country</th>\n+                                    <th>Cargo No<br>Type</th>\n+                                    <th>Cargo Box<br>No</th>\n+                                    <th>Total<br>Weight</th>\n+                                    <th>Total<br>Amount</th>\n+                                    <th>Total<br>Value</th>\n+                                </tr>\n+                            </thead>\n+                            <tbody>\n+                                @foreach($boxes as $key=> $boxes)\n+                                    <?php\n \n-    <!-- Display Validation Error -->\n-    @if ($errors->has('bookingSelection'))\n-        <div class=\"alert alert-danger\">\n-            <strong>{{ $errors->first('bookingSelection') }}</strong>\n-        </div>\n-    @endif\n+                                        if(!empty($boxes->shipment->statusVal->name)){\n+                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n+                                                $showAddItems = true;\n+                                                $style =\"style=background-color:yellow;padding:5px;\";\n+                                            } else {\n+                                                $style =\"style=background-color:none\";\n+                                                $showAddItems = false;\n \n-    <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\">\n-        <thead style=\"font-size:14px;\">\n-            <tr>\n-                <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                <th>Collection Date <br> Collection Office</th>\n-                <th>Ship Method</th>\n-                <th>Collection Staff<br> Collection Agent</th>\n-                <th>Customer<br>Sender/Receiver</th>\n-                <th>State/Emirates<br>Country</th>\n-                <th>Cargo No<br>Type</th>\n-                <th>Cargo Box<br>No</th>\n-                <th>Total<br>Weight</th>\n-                <th>Total<br>Amount</th>\n-                <th>Total<br>Value</th>\n-            </tr>\n-        </thead>\n-        <tbody>\n-            @foreach($boxes as $key => $box)\n-                <tr data-shipment-type-id=\"{{ $box->shipment->shipping_method_id }}\">\n-                    <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" value=\"{{ $box->id }}\" boxWt=\"{{ $box->weight ?? 0 }}\" boxVal=\"{{ $box->packages->pluck('subtotal')->sum() ?? 0 }}\" @if($box->is_select == 1) checked @endif ></td>\n-                    <td>{{ !empty($box->shipment->created_date) ? date('d-m-Y', strtotime($box->shipment->created_date)) : '' }} <br> {{ $box->shipment->agency ? $box->shipment->agency->name : '-' }}</td>\n-                    <td>{{ $box->shipment->shipMethType ? $box->shipment->shipMethType->name : '' }}</td>\n-                    <td> @if($box->shipment->collected_by == 'driver') {{ $box->shipment->driver ? $box->shipment->driver->name : '-' }} @else {{ $box->shipment->staff ? $box->shipment->staff->full_name : '-' }} @endif</td>\n-                    <td>{{ $box->shipment->receiver->name ?? \"\" }} <br> {{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n-                    <td>{{ $box->shipment->receiver->address->country->name ?? \"\" }}</td>\n-                    <td>{{ $box->shipment->booking_number ?? \"\" }} <br> {{ $type }}</td>\n-                    <td>{{ $box->box_name ?? \"\" }}</td>\n-                    <td>{{ $box->weight ?? \"\" }}</td>\n-                    <td class=\"tot_amnt\">{{ $box->packages->pluck('subtotal')->sum() }}</td>\n-                    <td class=\"boxVal\">{{ $box->shipment->amount_normal_weight ?? 0 }}</td>\n-                </tr>\n-            @endforeach\n-        </tbody>\n-    </table>\n+                                            }\n+                                        }\n+                                        $type = \"\";\n+                                        if(!empty($boxes->shipment->delivery_type)){\n+                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n+                                                $type = \"Door To Door\";\n+                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n+                                                $type =\"Door To Port\";\n+                                            }\n+                                            else {\n+                                                $type =\"\";\n+                                            }\n+                                        }\n+                                        if($boxes->is_select == 1) {\n+                                            $total_count += 1;\n+                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n+                                            $tot_sel_weight += $boxes->weight;\n+                                            $boxList[] = $boxes->id;\n \n-    <div class=\"row m-t-50\">\n-        <div class=\"col-md-12\">\n-            <div class=\"\">\n-                <div class=\"col-md-12\">\n-                    <div class=\"row\">\n-                        <div class=\"col-md-3\">\n-                            <div class=\"form-group\">\n-                                <label>Total Selected Boxes</label>\n-                                <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n-                            </div>\n-                        </div>\n-                        <div class=\"col-md-3\">\n-                            <div class=\"form-group\">\n-                                <label>Total Weight</label>\n-                                <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n-                            </div>\n-                        </div>\n-                        <div class=\"col-md-3\">\n-                            <div class=\"form-group\">\n-                                <label>Total Amount</label>\n-                                <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n-                            </div>\n-                        </div>\n-                        <div class=\"col-md-2\" style=\"margin:30px;\">\n-                            <div class=\"form-group\">\n-                                <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{ ($List) ? $List : '' }}\" id=\"selected_box_id\"/>\n-                                <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{ $ships->id }}\"/>\n-                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n-                            </div>\n-                        </div>\n-                    </div>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-</form>\n+                                        }\n+                                    ?>\n+                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n+                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n+                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n+                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n+                                        </td>\n+                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n \n+                                        <td> @if($boxes->shipment->collected_by == 'driver')\n+                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n+                                                @else\n+                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n+                                                @endif\n+                                        </td>\n+                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n+                                        <td>{{ $boxes->box_name??\"\"}}</td>\n+                                        <td>{{ $boxes->weight??\"\"}}</td>\n+                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n+                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n \n+                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n+                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n+\n+                                    </tr>\n+                                @endforeach\n+                                <?php\n+\n+                                $List = implode(', ', $boxList);\n+                                ?>\n+                            </tbody>\n+                        </table>\n+                        <div class=\"row m-t-50\">\n+                            <div class=\"col-md-12\">\n+                                <div class=\"\">\n+                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                        @csrf\n+                                        <div class=\"col-md-12\">\n+                                            <div class=\"row\">\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Selected Boxes</label>\n+                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Weight</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Amount</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n+                                                    <div class=\"form-group\">\n+                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+                                    </form>\n+\n                                 </div>\n                             </div>\n                         </div>\n                     </div>\n"
                },
                {
                    "date": 1733203918702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -554,41 +554,52 @@\n                         </table>\n                         <div class=\"row m-t-50\">\n                             <div class=\"col-md-12\">\n                                 <div class=\"\">\n-                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                    <form id=\"bookingForm\" action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                         @csrf\n                                         <div class=\"col-md-12\">\n                                             <div class=\"row\">\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Selected Boxes</label>\n-                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n+                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\" readonly>\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Weight</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" readonly />\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Amount</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" readonly />\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-2\" style=\"margin:30px;\">\n                                                     <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n-                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\" />\n+                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\" />\n+                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n                                                         <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n                                                     </div>\n                                                 </div>\n                                             </div>\n                                         </div>\n                                     </form>\n+                                    \n+                                    <script>\n+                                        document.getElementById('bookingForm').addEventListener('submit', function (event) {\n+                                            const checkboxes = document.querySelectorAll('.bookingSelection:checked');\n+                                            if (checkboxes.length === 0) {\n+                                                alert('Please select at least one box before submitting.');\n+                                                event.preventDefault(); // Prevent form submission\n+                                            }\n+                                        });\n+                                    </script>\n+                                    \n \n                                 </div>\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733203930682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -554,52 +554,41 @@\n                         </table>\n                         <div class=\"row m-t-50\">\n                             <div class=\"col-md-12\">\n                                 <div class=\"\">\n-                                    <form id=\"bookingForm\" action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                         @csrf\n                                         <div class=\"col-md-12\">\n                                             <div class=\"row\">\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Selected Boxes</label>\n-                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\" readonly>\n+                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Weight</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" readonly />\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-3\">\n                                                     <div class=\"form-group\">\n                                                         <label>Total Amount</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" readonly />\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n                                                 <div class=\"col-md-2\" style=\"margin:30px;\">\n                                                     <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\" />\n-                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\" />\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n                                                         <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n                                                     </div>\n                                                 </div>\n                                             </div>\n                                         </div>\n                                     </form>\n-                                    \n-                                    <script>\n-                                        document.getElementById('bookingForm').addEventListener('submit', function (event) {\n-                                            const checkboxes = document.querySelectorAll('.bookingSelection:checked');\n-                                            if (checkboxes.length === 0) {\n-                                                alert('Please select at least one box before submitting.');\n-                                                event.preventDefault(); // Prevent form submission\n-                                            }\n-                                        });\n-                                    </script>\n-                                    \n \n                                 </div>\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733204575508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1125 @@\n+@extends('layouts.app')\n+\n+@section('content')\n+\n+    <div class=\"content-page\" id=\"content-page\">\n+        <div class=\"content\">\n+\n+            <!-- Start Content-->\n+            <div class=\"container-fluid\">\n+\n+                <!-- start page title -->\n+                <div class=\"row\">\n+                    <div class=\"col-12\">\n+                        <div class=\"page-title-box\">\n+                            <div class=\"page-title-right\">\n+                                <ol class=\"breadcrumb m-0\">\n+                                    <li class=\"breadcrumb-item\"><a href=\"{{route('super-admin.dashboard') }}\">Home</a></li>\n+                                    <li class=\"breadcrumb-item\"><a href=\"{{route('branch.ship.create')}}\">Shipment List</a></li>\n+                                    <li class=\"breadcrumb-item active\">View Assigned</li>\n+\n+                                </ol>\n+                            </div>\n+                            <h4 class=\"page-title\">Assigned Shipments</h4>\n+\n+                        </div>\n+                    </div>\n+\n+                </div>\n+\n+                <?php\n+                    $selectedBoxId = [];\n+                    $res ='';\n+                    $total_count = 0;\n+                    $tot_sel_weight = 0;\n+                    $tot_sel_amt = 0;\n+                    $tot_weight = 0;\n+                    $tot_value = 0;\n+                    $tot_temp =0;\n+                    $tot_sel_temp =0;\n+                    $totalPieces =0;\n+\n+                    foreach( $ship_bookingsList as $booking) {\n+\n+                        $tot_temp= $booking->weight;\n+                        $tot_weight +=$tot_temp;\n+                        $tot_value += $booking->shipment->grand_total;\n+                        $totalPieces += 1;\n+                        // $totalPieces += $booking->shipment->number_of_pcs;\n+                        $List = '';\n+                        $ListValue = '';\n+                        $boxList = [];\n+                        $boxListValue = [];\n+\n+                        $status = '';\n+                        $lastStatus = '';\n+                        if(!empty($booking->shipment->bookingNumberStatus)) {\n+                            $status = collect($booking->shipment->bookingNumberStatus)->last();\n+\n+                            // $lastStatus = (!empty($status)) ? $status->status->name : $booking->ship->shipmentStatus->name ;\n+                        }\n+\n+                    }\n+                        ?>\n+                <!-- <div class=\"row\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card-box\">\n+                            <form action=\"{{route('branch.ships.createbookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+\n+                                @csrf\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-6\">\n+                                            <div class=\"form-group\">\n+                                                <label>Booking No</label>\n+                                                <select name=\"booking_ids[]\" id=\"booking_ids\" class=\"select2 form-control\"  multiple>\n+                                                    @foreach($bookings as $booking)\n+                                                    <option value=\"{{$booking->id}}\">{{$booking->booking_number}}</option>\n+                                                    @endforeach\n+                                                </select>\n+                                            </div>\n+                                        </div>\n+                                        <div class=\"col-md-6\">\n+                                            <div class=\"form-group\">\n+                                                <label>Shipment ID</label>\n+                                                <input type=\"text\" class=\"form-control\" name=\"shipment_id\" value=\"{{$ships->shipment_id}}\" />\n+                                            </div>\n+\n+\n+                                        </div>\n+                                    </div>\n+                                </div>\n+\n+\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                <label>AWB id</label>\n+                                                <input type=\"text\" class=\"form-control\" name=\"awd_id\" value=\"{{$ships->awd_id}}\" />\n+\n+                                            </div>\n+                                        </div>\n+\n+                                        <div class=\"col-md-3\">\n+                                            <div class=\"form-group\">\n+                                            <label>Date</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                    <label>Shipment Status</label>\n+                                                    <select name=\"status_id\" class=\"form-control\" id=\"\">\n+                                                        @foreach ( status_list_admin() as $item)\n+                                                            <option\n+                                                                {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                                        @endforeach\n+                                                    </select>\n+                                                    @error('status_id')\n+                                                    <span class=\"text-danger\">{{ $message }}</span>\n+                                                    @enderror\n+                                                </div>\n+                                        </div>\n+\n+\n+\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Estimated Delivery</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->estimated_delivery) ? date('Y-m-d', strtotime($ships->estimated_delivery)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"estimated_delivery\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+                                </div>\n+\n+                                <div class=\"text-center\">\n+                                    <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                    <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit\n+                                    </button>\n+                                </div>\n+\n+                            </form>\n+\n+                        </div>\n+\n+\n+\n+                    </div>\n+                </div> -->\n+\n+\n+                <!-- <div class=\"row\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card-box\">\n+                            <form action=\"{{route('branch.ships.updatebookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+\n+                                @csrf\n+\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                <label>Change Shipment Status</label>\n+                                                <select name=\"status_id\" class=\"form-control\" id=\"\">\n+                                                    @foreach (\\App\\Models\\Statuses::all() as $item)\n+                                                        <option\n+                                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                                    @endforeach\n+                                                </select>\n+                                                @error('status_id')\n+                                                <span class=\"text-danger\">{{ $message }}</span>\n+                                                @enderror\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Date</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Tracking Url</label>\n+                                                    <input type=\"text\" value=\"\" max=\"\"\n+                                                        class=\"form-control\" id=\"tracking_url\" name=\"tracking_url\"\n+                                                        placeholder=\"Enter tracking url\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                        <div class=\"form-group\">\n+                                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n+                                                </button>\n+                                                </div>\n+\n+                                        </div>\n+                                    </div>\n+\n+                                    </div>\n+\n+                                </div>\n+\n+\n+\n+                            </form>\n+\n+                        </div>\n+\n+\n+\n+                    </div>\n+                </div> -->\n+\n+\n+\n+                <div class=\"row clearfix\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card\">\n+\n+                            <div class=\"body\">\n+                                <div class=\"header\">\n+                                    <!-- <h4>Assigned Shipments</h4> -->\n+                                </div>\n+                                <div class=\"row detailHead\">\n+                                        <div class=\"col-md-6\">\n+                                            <h1>{{$ships->shipment_id}} / AWB NO: {{$ships->awb_number}}</h1>\n+                                            <h3>Boxes:<span class=\"fontRed\"> {{$totalPieces}}</span> , Weight: <span class=\"fontRed\">{{number_format($tot_weight,2)}} KG</span> </h3>\n+                                        </div>\n+                                        <div class=\"col-md-6\" style=\"margin-top:32px;\">\n+                                            <h5>&nbsp;</h5>\n+                                            <h5>FROM: <span class=\"fontRed\">{{$ships->portOfOrigins->name}}</span> To: <span class=\"fontRed\">{{$ships->portOfDestinations->name}}</span></h5>\n+                                        </div>\n+                                </div>\n+                                <div class=\"col-md-12 text-right \">\n+\n+                                    <div class=\"row floatRight\" >\n+                                        <a  href=\"{{route('branch.ships.deliverylistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Delivery List</a>\n+                                        <a  href=\"{{route('branch.ships.packinglistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Packing List </a>\n+                                        <a  href=\"{{route('branch.ships.customermanifestptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Customs Manifest</a>\n+                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light changeStatus mb-1\"  id=\"changeStatus\">Change Status</button>\n+\n+                                        <div class=\"modal fade\" id=\"printAllModal\" tabindex=\"-1\" aria-labelledby=\"printAllModalLabel\" aria-hidden=\"true\">\n+                                            <div class=\"modal-dialog\">\n+                                                <div class=\"modal-content w-75\">\n+                                                    <div class=\"modal-header\">\n+                                                        <h5 class=\"modal-title\" id=\"printAllModalLabel\">Print All Shipments</h5>\n+                                                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                                                    </div>\n+                                                    <div class=\"modal-body\">\n+                                                        <form action=\"{{ route('branch.shipment.printall') }}\" method=\"post\" target=\"_blank\">\n+                                                            @csrf\n+                                                            @foreach ($ship_bookingsList as $booking)\n+                                                                <input type=\"hidden\" name=\"booking_ids[]\" value=\"{{ $booking->id }}\">\n+                                                            @endforeach\n+                                                            <div class=\"row\">\n+                                                                <label class=\"ml-3\">Select Courier Company</label>\n+                                                                <div class=\"form-group col-md-12\">\n+                                                                    <input type=\"text\" name=\"awb_no\" value=\"{{$ships->awb_number}}\" class=\"d-none\">\n+                                                                    <select name=\"agency\" id=\"sender_id\" class=\"form-control\" required>\n+                                                                        @foreach ($agencies as $agency)\n+                                                                            <option value=\"{{$agency->id}}\">{{$agency->name}}</option>\n+                                                                        @endforeach\n+                                                                    </select>\n+                                                                </div>\n+                                                            </div>\n+                                                            <div class=\"col-12 text-center mt-2\" >\n+                                                                <button type=\"submit\"  class=\"btn btn-success p-2\" >Print all</button>\n+                                                            </div>\n+                                                        </form>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+                                        <button type=\"submit\" id=\"printallButton\" class=\"btn btn-success waves-effect waves-light ml-2 mb-1\" data-bs-toggle=\"modal\" data-bs-target=\"#printAllModal\" disabled>\n+                                            <i class=\"fas fa-print\"> Print all</i>\n+                                        </button>\n+\n+                                        <form action=\"{{route('branch.shipment.loadingExport')}}\" class=\"m-l-10\" method=\"post\" target=\"_blank\">\n+                                            @csrf\n+                                            <input type=\"hidden\" value=\"\" class=\"hidShipIds\" name=\"shipmentId\" />\n+                                            <input type=\"hidden\" value=\"\" class=\"hidBoxIds\" name=\"boxId\" />\n+                                            <input type=\"hidden\" value=\"{{$shipId}}\" class=\"selectedShipIds\" name=\"shipIds\" />\n+\n+                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light loadingExport\"><i class=\"fas fa-print\"> Export Loading List</i>\n+                                            </button>\n+                                        </form>\n+\n+                                    </div>\n+                                </div>\n+                                <div class=\"table-responsive\">\n+                                    <table id=\"shipsTable\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                                        <thead>\n+                                        <tr >\n+                                            <th><input type=\"checkbox\" id=\"allcb\" name=\"shipBookId[]\" class=\"shipmentIds checkbox-item selectAll\" value=\"{{(!empty($booking->shipment->id))}}\" shipId=\"{{(!empty($booking->ship->id))}}\"></th>\n+                                            <th>Booking No</th>\n+                                            <th>State</th>\n+                                            <th>Shipment name</th>\n+                                            <th>Shipment <br>Type</th>\n+                                            <th>No of Pcs</th>\n+                                            <th>Box Numbers</th>\n+                                            <th>Total Weight</th>\n+                                            <th>Invoice value</th>\n+                                            <th>Status</th>\n+                                            <th>Booking Created Date</th>\n+                                            <th>Action</th>\n+                                        </tr>\n+                                        </thead>\n+                                        <tbody  id=\"bookingData\">\n+                                        <?php\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist =0;\n+                                        $totalPieces =0;\n+                                        $boxList = [];\n+\n+                                        foreach( $ship_bookingsList as $booking) {\n+\n+                                            $tot_temp_exist= $booking->weight;\n+                                            $tot_weight_exist +=$tot_temp_exist;\n+                                            $tot_value_exist += $booking->packages->pluck('subtotal')->sum();\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n+                                            $boxList = [];\n+                                            $boxListValue = [];\n+\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if(($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $expectedDate = $status->expected_date;\n+                                                $comment = $status->comment;\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n+                                                if($lastStatus == 'Pending') {\n+                                                    $style= \"background-color:#ec1616e6;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else if ($lastStatus == 'Shipment on hold') {\n+                                                    $style= \"background-color:#ffdb00;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else {\n+                                                    $style= \"background-color:none;\";\n+                                                    $disabled = \"\";\n+                                                    $newClass = \"k-checkbox\";\n+                                                }\n+                                            }\n+\n+                                            ?>\n+                                            <tr style=\"{{ $style }}\">\n+                                                <td style=\"text-align:center\" ><input {{$disabled}} type=\"checkbox\" name=\"shipBookId[]\" class=\"shipmentIds {{$newClass}} shipmet_check\" value=\"{{$booking->shipment->id}}\" shipId=\"{{$booking->shipment_id}}\" boxId=\"{{$booking->id}}\"></td>\n+                                                <td style=\"text-align:center\" class=\"detailedBoxView\" value=\"{{$booking->id}}\" dateVal=\"{{date('Y-m-d')}}\" expectedDate=\"{{$expectedDate}}\" comment=\"{{$comment}}\">{{ $booking->shipment->booking_number}}</td>\n+                                                <td style=\"text-align:center\">{{$booking->shipment->receiver->address->state->name}}</td>\n+                                                <td style=\"text-align:center\">{{$ships->shipment_id}}</td>\n+                                                <td>{{$booking->shipment->shipMethType?$booking->shipment->shipMethType->name:''}}</td>\n+                                                <td style=\"text-align:center\">1</td>\n+                                                <td style=\"text-align:center\" class=\"boxName\" boxId=\"{{$booking->id}}\" ids=\"{{$ListValue}}\">{{ $booking->box_name }}</td>\n+                                                <td style=\"text-align:center\">{{ number_format($booking->weight,2) }}</td>\n+                                                {{-- <td style=\"text-align:center\">{{ number_format(floatval($booking->total_value) + floatval($booking->box_packing_charge),2)}}</td> --}}\n+                                                <td style=\"text-align:center\">{{$booking->packages->pluck('subtotal')->sum()}}</td>\n+\n+\n+                                                <td style=\"text-align:center\">{{$lastStatus}}</td>\n+                                                <td style=\"text-align:center\">{{ !empty($booking->created_at) ? date('d-m-Y', strtotime($booking->created_at)) : '' }}</td>\n+                                                <td>\n+                                                    <a href=\"#\" title=\"View\"\n+                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n+                                                        <i class=\"fas fa-eye\"></i>\n+                                                    </a>\n+                                                    <a href=\"/branch/shipment/single_print/{{$booking->id}}\" title=\"Print\" target=\"_blank\"\n+                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n+                                                        <i class=\"fas fa-print\"></i>\n+                                                    </a>\n+                                                        <a href=\"{{route('branch.ships.undoaddbooking',$booking->id)}}\" title=\"Remove\"\n+                                                        class=\"btn btn-icon waves-effect waves-light btn-dark icons\">\n+                                                            <i class=\"fas fa-undo\"></i>\n+                                                        </a>\n+                                                </td>\n+                                            </tr>\n+                                        <?php\n+                                        }\n+                                        ?>\n+                                            <tr>\n+                                                <td  colspan=\"5\"> </td><td style=\"text-align:center\">{{ $totalPieces}}</td>\n+                                                <td  colspan=\"1\"> </td><td style=\"text-align:center\">{{ number_format($tot_weight_exist,2)}}</td>\n+                                                <td style=\"text-align:center\" >{{ number_format($tot_value_exist,2) }}</td>\n+                                                <td colspan=\"3\"  >\n+                                                    <div class=\"row\"><div class=\"col-6\">Average : {{$tot_weight_exist?number_format($tot_value_exist * $ships->exchange_rate/$tot_weight_exist,3):'0'}}  </div> <div class=\"col-6\">Duty : {{$tot_weight_exist?number_format($tot_value_exist*$ships->exchange_rate/$tot_weight_exist*77.28/100,3):'0'}}</div></div>\n+\n+                                                </td>\n+                                            </tr>\n+\n+\n+\n+                                            <!-- <tr id=\"bookingData\">\n+                                                <td>4545454</td>\n+                                                <td>Shipment 112</td>\n+                                                <td>3</td>\n+                                                <td>10</td>\n+                                                <td>25</td>\n+                                                <td>Shipment Forwarded</td>\n+                                                <td>\n+                                                @can(permission_edit())\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n+                                                            <i class=\"fas fa-pencil-alt\"></i>\n+                                                        </a>\n+                                                    @endcan\n+                                                    @can(permission_view())\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n+                                                            <i class=\"fas fa-eye\"></i>\n+                                                        </a>\n+                                                    @endcan\n+                                                    @can('shipment-print')\n+                                                    <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n+                                                            <i class=\"fas fa-eye\"></i>\n+                                                        </a>\n+\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n+                                                            <i class=\"fas fa-print\"></i>\n+                                                        </a>\n+\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-dark\">\n+                                                            <i class=\"fas fa-undo\"></i>\n+                                                        </a>\n+                                                    @endcan\n+\n+                                                </td>\n+                                            </tr> -->\n+\n+\n+                                        </tbody>\n+                                    </table>\n+                                </div>\n+\n+                            </div>\n+                        </div>\n+                        <div class=\"col-md-12 text-left \">\n+\n+                            <div class=\"floatLeft\" >\n+                                <select name=\"\" id=\"shipmentTypeSelect\" class=\"p-2 pb-0\">\n+                                    <option value=\"\">All</option>\n+                                    @foreach ($ship_types as $ship_types_data )\n+                                        <option value=\"{{$ship_types_data->id}}\">{{$ship_types_data->name}}</option>\n+                                    @endforeach\n+                                </select>\n+                            </div>\n+                        </div>\n+                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n+                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead style=\"font-size:14px;\">\n+                            <tr >\n+                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                                    <th>Collection Date <br> Collection Office</th>\n+                                    <th>ship metho</th>\n+                                    <th>Collection Staff<br> Collection Agent</th>\n+                                    <th>Customer<br>Sender/Receiver</th>\n+                                    <th>State/Emirates<br>Country</th>\n+                                    <th>Cargo No<br>Type</th>\n+                                    <th>Cargo Box<br>No</th>\n+                                    <th>Total<br>Weight</th>\n+                                    <th>Total<br>Amount</th>\n+                                    <th>Total<br>Value</th>\n+                                </tr>\n+                            </thead>\n+                            <tbody>\n+                                @foreach($boxes as $key=> $boxes)\n+                                    <?php\n+\n+                                        if(!empty($boxes->shipment->statusVal->name)){\n+                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n+                                                $showAddItems = true;\n+                                                $style =\"style=background-color:yellow;padding:5px;\";\n+                                            } else {\n+                                                $style =\"style=background-color:none\";\n+                                                $showAddItems = false;\n+\n+                                            }\n+                                        }\n+                                        $type = \"\";\n+                                        if(!empty($boxes->shipment->delivery_type)){\n+                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n+                                                $type = \"Door To Door\";\n+                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n+                                                $type =\"Door To Port\";\n+                                            }\n+                                            else {\n+                                                $type =\"\";\n+                                            }\n+                                        }\n+                                        if($boxes->is_select == 1) {\n+                                            $total_count += 1;\n+                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n+                                            $tot_sel_weight += $boxes->weight;\n+                                            $boxList[] = $boxes->id;\n+\n+                                        }\n+                                    ?>\n+                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n+                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n+                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n+                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n+                                        </td>\n+                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n+\n+                                        <td> @if($boxes->shipment->collected_by == 'driver')\n+                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n+                                                @else\n+                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n+                                                @endif\n+                                        </td>\n+                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n+                                        <td>{{ $boxes->box_name??\"\"}}</td>\n+                                        <td>{{ $boxes->weight??\"\"}}</td>\n+                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n+                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n+\n+                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n+                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n+\n+                                    </tr>\n+                                @endforeach\n+                                <?php\n+\n+                                $List = implode(', ', $boxList);\n+                                ?>\n+                            </tbody>\n+                        </table>\n+                        <div class=\"row m-t-50\">\n+                            <div class=\"col-md-12\">\n+                                <div class=\"\">\n+                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                        @csrf\n+                                        <div class=\"col-md-12\">\n+                                            <div class=\"row\">\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Selected Boxes</label>\n+                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Weight</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Amount</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n+                                                    <div class=\"form-group\">\n+                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+                                    </form>\n+\n+                                </div>\n+                            </div>\n+                        </div>\n+                    </div>\n+                </div>\n+            </div>\n+            <!-- end container-fluid -->\n+\n+        </div>\n+        <!-- end content -->\n+<div id=\"statusModal\" class=\"modal fade\" role=\"dialog\">\n+  <div class=\"modal-dialog\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+                <div class=\"col-md-12\">\n+                <input type=\"hidden\" value=\"\" class=\"selectedShipIds\" name=\"shipIds\" />\n+                <input type=\"hidden\" value=\"\" class=\"selectedShipmentId\" name=\"shipmentIds\" />\n+                <input type=\"hidden\" value=\"\" class=\"selectedBoxId\" name=\"boxIds\" />\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                                <label>Change Shipment Status</label>\n+                                <select name=\"status_id\" class=\"form-control\" id=\"status_id\">\n+                                    @foreach (status_list_admin() as $item)\n+                                        <option\n+                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                    @endforeach\n+                                </select>\n+                                @error('status_id')\n+                                <span class=\"text-danger\">{{ $message }}</span>\n+                                @enderror\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Comment</label>\n+                            <textarea name=\"comment\" id=\"status_comment\" cols=\"30\" rows=\"0\" class=\"form-control\"></textarea>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Date</label>\n+                                    <input type=\"date\" value=\"{{ date('Y-m-d') }}\" max=\"\"\n+                                        class=\"form-control\" id=\"created_date\" name=\"created_date\"\n+                                        placeholder=\"Enter title\">\n+                            </div>\n+                        </div>\n+                    </div>\n+                    \n+                     <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Expected Date</label>\n+                                    <input type=\"date\" value=\"\" max=\"\"\n+                                        class=\"form-control\" id=\"expected_date\" name=\"expected_date\"\n+                                        placeholder=\"Enter title\">\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-4\">\n+                        <div class=\"form-group\">\n+                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light updateStatus\">Update\n+                                </button>\n+                                </div>\n+\n+                        </div>\n+                    </div>\n+                </div>\n+        </div>\n+      <div class=\"modal-footer\">\n+        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+      </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+<div id=\"statusModalSucess\" class=\"modal fade\" role=\"dialog\">\n+  <div class=\"modal-dialog\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                                <div class=\"successMsg\">Status Updated Successfully</div>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                </div>\n+            </form>\n+        </div>\n+      <div class=\"modal-footer\">\n+        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+      </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+<div id=\"currentStatusModal\" class=\"modal fade bd-example-modal-lg\" role=\"dialog\">\n+  <div class=\"modal-dialog modal-lg\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+            <form action=\"{{route('branch.ships.boxStatusUpdatetoship')}}\" method=\"post\">\n+                @csrf\n+                <div class=\"col-md-12\">\n+                    <div class=\"row\">\n+                        <table id=\"shipsTable1\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead>\n+                            <tr>\n+                                <th>Box Name</th>\n+                                <th>Current Status</th>\n+                                <th>Dated on</th>\n+                                <th>Update Status</th>\n+                                <th>Update Status Date</th>\n+                                <th>Expected Date</th>\n+                                <th>Comment</th>\n+                            </tr>\n+                            </thead>\n+                            <tbody class=\"fetchData\" status=\"{{status_list_admin() }}\">\n+\n+                            </tbody>\n+                        </table>\n+                    </div>\n+                </div>\n+\n+                <div class=\"form-group\">\n+                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n+                        </button>\n+                </div>\n+            </form>\n+        </div>\n+        <div class=\"modal-footer\">\n+            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+        </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+@endsection\n+@section('styles')\n+    @include('layouts.datatables_style')\n+    <style>\n+        .floatRight {float:right;}\n+        .m-l-10 {margin-left:10px!important;}\n+        .detailedBoxView {color:#661ec2;}\n+        .modal-lg {max-width:1000px !important;}\n+        .successMsg {font-size:18px; color:green;}\n+        .fontRed {color:red;}\n+        .icons {padding: 5px; font-size: x-small;}\n+        #shipsTable {font-size:14px !important;}\n+        .detailHead {\n+            border: 1px solid #d6d6d6;\n+            margin: 25px 80px;\n+            background-color: #d6d6d6;\n+        }\n+        #bookingList {font-size:14px !important;}\n+        #bookingList thead{font-size:14px !important;}\n+        #bookingList_length {display:none;}\n+        .m-t-50 {margin-top:50px;}\n+    </style>\n+@endsection\n+\n+@section('scripts')\n+<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\n+    @include('layouts.datatables_js')\n+\n+    <script>\n+        $(document).ready(function() {\n+\n+            $('.shipmet_check').change(function(){\n+                if($(this).is(':checked')){\n+                    $('#printallButton').prop('disabled', false);\n+                } else {\n+                    $('#printallButton').prop('disabled', true);\n+                }\n+            });\n+\n+            $('#allcb').change(function(){\n+                if($(this).is(':checked')){\n+                    console.log('hhhhhhhhhhhhhhhhhhhhhhhhhh');\n+                    $('#printallButton').prop('disabled', false);\n+                } else {\n+                    $('#printallButton').prop('disabled', true);\n+                }\n+            });\n+\n+\n+            $('#bookingList_checkbox').click(function() {\n+                $('.bookingSelection').prop('checked', $(this).prop('checked')).change();\n+                window.location.reload();\n+\n+            });\n+\n+\n+\n+\n+            $(document).ready(function() {\n+                // Check if any .bookingSelection checkboxes are checked on page load\n+                if ($('.bookingSelection:checked').length > 0) {\n+                    $('#bookingList_checkbox').prop('checked', true);\n+                } else {\n+                    $('#bookingList_checkbox').prop('checked', false);\n+                }\n+\n+                // Handle changes in .bookingSelection checkboxes\n+                $('.bookingSelection').change(function() {\n+                    if ($('.bookingSelection:checked').length > 0) {\n+                        $('#bookingList_checkbox').prop('checked', true);\n+                    } else {\n+                        $('#bookingList_checkbox').prop('checked', false);\n+                    }\n+                });\n+\n+\n+                $('#bookingList_checkbox').change(function() {\n+                    if (!$(this).prop('checked')) {\n+                        window.location.reload();\n+                    }\n+                });\n+\n+\n+            });\n+\n+\n+            $('#shipmentTypeSelect').change(function() {\n+                var selectedType = $(this).val();\n+                $('#bookingList tbody tr').hide().find('input.bookingSelection').removeClass('bookingSelection'); // Hide all rows and remove class from all td elements\n+                if (selectedType === \"\") { // Show all if \"All\" is selected\n+                    $('#bookingList tbody tr').show().find('input#bookingSelection').addClass('bookingSelection');\n+                } else if (selectedType) {\n+                    $('#bookingList tbody tr[data-shipment-type-id=\"' + selectedType + '\"]').show().find('input#bookingSelection').addClass('bookingSelection');\n+                }\n+            });\n+\n+        });\n+\n+    $(document).ready(function () {\n+        $('#bookingList').DataTable( {\n+            \"autoWidth\": false,\n+            \"scrollX\": true,\n+            \"aaSorting\": [ [0,'desc'] ],\n+            \"bSort\": false,\n+            \"responsive\": false\n+        });\n+\n+    });\n+\n+        $(function () {\n+            // validation needs name of the element\n+            // initialize after multiselect\n+\n+            $(document).ready(function () {\n+                $('.select2').select2();\n+                if (window.location.href.indexOf('reload')==-1) {\n+                    window.location.replace(window.location.href+'?reload');\n+                }\n+\n+            });\n+\n+\n+\n+            var $checkboxes = $('.checkbox-item');\n+            $('#allcb').click(function (e) {\n+                    var checkboxesLength = $checkboxes.length;\n+                    var checkedCheckboxesLength = $checkboxes.filter(':checked').length;\n+                    if(checkboxesLength == checkedCheckboxesLength) {\n+                        $('#allcb').prop('checked', true);\n+                    }else{\n+                        $('#allcb').prop('checked', false);\n+                    }\n+\n+                    // $('#allcb').click(function (e) {\n+                    if( $(\"#allcb\").prop('checked') == true) {\n+                        $.each($('td:not(.k-state-disabled) .k-checkbox'), function () {\n+                            $(this).prop(\"checked\", true)\n+                        });\n+                    }\n+                    else {\n+                        $('.k-checkbox').prop('checked', false);\n+                    }\n+                    // $(this).closest('table').find('td input:checkbox').prop('checked', this.checked);\n+                // });\n+            });\n+\n+            $(document).on('click', \".detailedBoxView\", function() {\n+                var boxId = $(this).attr('value');\n+                var dateVal = $(this).attr('dateVal');\n+                var boxName = $(this).closest('tr').find('.boxName').text();\n+                var expectedDate = $(this).attr('expecteddate');\n+                var comment = $(this).attr('comment');\n+                $(\"#currentStatusModal\").modal('show');\n+                var d = new Date();\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: `{{ route('branch.ship.list.getBoxDetails') }}`,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"boxId\":boxId, \"boxName\":boxName }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            var html = [];\n+                            $('.fetchData').html('');\n+                            // $.each(result, function (key, value) {\n+                                var selectOptionhtml = '';\n+                                var dt = new Date();\n+                                var newDate = '<input type=\"date\" name=\"statusDate[]\" class=\"form-control\" value=\"'+dateVal+'\">';\n+                                var expectedDateInput = '<input type=\"date\" name=\"expected_date[]\" class=\"form-control\" value=\"'+expectedDate+'\" >';\n+                                var commentInput  = '<input type=\"text\" name=\"comment[]\" class=\"form-control\" value=\"'+comment+'\" >';\n+                                var statusCount = result.box_statuses.length;\n+                                var lastNum = statusCount - 1;\n+                                var selectOption = JSON.parse($(\".fetchData\").attr(\"status\"));\n+                                selectOptionhtml += \"<select class='form-control class-form' name='status[]'><option value='0'>Select</option>\";\n+                                for (var i = 0; i < selectOption.length; i++) {\n+                                    // Check if the id matches\n+                                    var selected = selectOption[i].id === result.box_statuses[lastNum].status.id ? ' selected' : '';\n+\n+                                    // Append the option with the selected attribute if applicable\n+                                    selectOptionhtml += \"<option value='\" + selectOption[i].id + \"'\" + selected + \">\" + selectOption[i].name + \"</option>\";\n+                                }\n+                                selectOptionhtml += \"</select>\";\n+                                html += '<tr>'+\n+                                        '<td>'+result.box_name+'<input type=\"hidden\" name=\"boxIds[]\" value=\"'+result.id+'\"></td>';\n+                                        if(statusCount > 0) {\n+                                            html +=   '<td>'+result.box_statuses[lastNum].status.name+'</td>';\n+                                            html +=   '<td>'+result.dated+'</td>';\n+\n+                                            html +=   '<td>'+selectOptionhtml+'</td>';\n+                                            html +=   '<td>'+newDate+'</td>';\n+                                            html +=  '<td>'+expectedDateInput+'</td>';\n+                                            html +=  '<td>'+commentInput +'</td>';\n+                                        } else {\n+                                            html +=  '<td>--</td>';\n+                                            html +=  '<td>--</td>';\n+\n+                                            html +=  '<td>'+selectOptionhtml+'</td>';\n+                                            html +=  '<td>'+newDate+'</td>';\n+                                            html +=  '<td>'+expectedDateInput+'</td>';\n+                                            html +=  '<td>'+commentInput +'</td>';\n+                                        }\n+\n+                                        html += '</tr>';\n+                            // });\n+                            $('.fetchData').html(html);\n+                            $('.select2').select2();\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                }); // ajax call closing\n+            });\n+\n+            $(document).on('click',\"#changeStatus\", function() {\n+                var checked = $(\".shipmentIds\").is(\":checked\");\n+                if(checked == true) {\n+                    var boxesName = $(this).attr('boxesName');\n+                    var boxesVal = $(this).attr('boxesVal');\n+                    var shipmentId = $(\".shipmentIds\").attr('value');\n+                    $(\"#statusModal\").modal('show');\n+                }\n+            });\n+\n+            $(document).on('click', '.updateStatus', function(){\n+                var url = \"{{route('branch.ships.multiUpdatebookingtoship')}}\";\n+                var selectedShipIds = $(\".selectedShipIds\").val();\n+                var selectedShipmentId = $(\".selectedShipmentId\").val();\n+                var selectedBoxId = $(\".selectedBoxId\").val();\n+                var status_id = $(\"#status_id\").val();\n+                var status_comment = $(\"#status_comment\").val();\n+                var created_date = $(\"#created_date\").val();\n+                var expected_date = $(\"#expected_date\").val();\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: url,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"shipIds\":selectedShipIds,\"selectedBoxId\":selectedBoxId, \"shipmentIds\":selectedShipmentId, \"status_id\":status_id, \"created_date\":created_date, 'comment':status_comment, \"expected_date\":expected_date, }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            if(result.success == 'Status Updated Successfully') {\n+                                $(\"#statusModalSucess\").modal('show');\n+                            }\n+                            location.reload();\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                }); // ajax call closing\n+            });\n+\n+\n+            $(document).on('click', \".shipmentIds\", function() {\n+                var val = [];\n+                var valshipId = [];\n+                var boxesVal = [];\n+                var boxesName = [];\n+                $(':checkbox:checked').each(function(i){\n+                    val[i] = $(this).val();\n+                    valshipId[i] = $(this).attr('shipId');\n+                    boxesName[i] = $(this).closest('tr').find('.boxName').text();\n+                    boxesVal[i] = $(this).closest('tr').find('.boxName').attr('boxId');\n+                });\n+                $(\".hidShipIds\").val(val);\n+                $(\".hidBoxIds\").val(boxesVal);\n+                $(\".selectedBoxId\").val(boxesVal);\n+                $(\".selectedShipmentId\").val(val);\n+                $(\"#changeStatus\").attr('shipId',valshipId);\n+                $(\"#changeStatus\").attr('shipmentId',val);\n+                $(\"#changeStatus\").attr('boxesVal',boxesVal);\n+                $(\"#changeStatus\").attr('boxesName',boxesName);\n+            });\n+            var arr = [];\n+            var alreadyExist = [];\n+            var removeItem = [];\n+\n+            $(\"input:checkbox.bookingSelection\").change(function() {\n+\n+            });\n+\n+\n+            $(document).on('change',\".bookingSelection\", function() {\n+\n+                var ischecked= $(this).is(':checked');\n+                if(ischecked){\n+                // alert('checkd ' + $(this).val());\n+                arr.push($(this).val());\n+                $(\"#selected_box_id\").val(arr);\n+                }\n+                else {\n+                // alert('uncheckd ' + $(this).val());\n+                removeItem.push($(this).val());\n+                $(\"#hidSelectList\").val(removeItem);\n+                }\n+                var checked = $(this).is(\":checked\");\n+                var total_selected_boxes = $(\"#total_selected_boxes\").val();\n+                var total_weight = $(\"#total_weight\").val();\n+                var total_value = $(\"#total_value\").val();\n+                var boxesVal = $(this).attr('boxVal');\n+                var boxWt = $(this).attr('boxWt');\n+                var selectedBoxId = $(this).attr('selectBoxId');\n+                // $.each($(\":checkbox:checked\"), function(){\n+                //     arr.push($(this).val());\n+                // });\n+                $(\"#selected_box_id\").val(arr);\n+\n+                if(checked == true) {\n+                    var newBoxes = parseFloat(total_selected_boxes) + parseFloat(1);\n+                    var newWeight = parseFloat(total_weight) + parseFloat(boxWt);\n+                    var newValue = parseFloat(total_value) + parseFloat(boxesVal);\n+\n+                } else {\n+                    var newBoxes = parseFloat(total_selected_boxes) - parseFloat(1);\n+                    var newWeight = parseFloat(total_weight) - parseFloat(boxWt);\n+                    var newValue = parseFloat(total_value) - parseFloat(boxesVal);\n+                }\n+                $(\"#total_selected_boxes\").val(newBoxes);\n+                $(\"#total_weight\").val(newWeight);\n+                $(\"#total_value\").val(newValue);\n+                var selectedBoxes = $(\"#selected_box_id\").val();\n+                var hidSelectList = $(\"#hidSelectList\").val();\n+                var url = \"{{route('branch.ships.multiSelectionUpdate')}}\";\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: url,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"selectedBoxes\":selectedBoxes, \"hidSelectList\":hidSelectList, \"shipId\":\"1\" }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            console.log(result);\n+                            var html = [];\n+                            html = result.boxes\n+                            $(\"#selected_box_id\").val(html);\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                });\n+                alreadyExist = [];\n+                arr = [];\n+            });\n+\n+        });\n+\n+</script>\n+\n+@endsection\n"
                },
                {
                    "date": 1733204589846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -587,1137 +587,29 @@\n                                                 </div>\n                                             </div>\n                                         </div>\n                                     </form>\n-\n-                                </div>\n-                            </div>\n-                        </div>\n-                    </div>\n-                </div>\n-            </div>\n-            <!-- end container-fluid -->\n-\n-        </div>\n-        <!-- end content -->\n-<div id=\"statusModal\" class=\"modal fade\" role=\"dialog\">\n-  <div class=\"modal-dialog\">\n-\n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-                <div class=\"col-md-12\">\n-                <input type=\"hidden\" value=\"\" class=\"selectedShipIds\" name=\"shipIds\" />\n-                <input type=\"hidden\" value=\"\" class=\"selectedShipmentId\" name=\"shipmentIds\" />\n-                <input type=\"hidden\" value=\"\" class=\"selectedBoxId\" name=\"boxIds\" />\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                                <label>Change Shipment Status</label>\n-                                <select name=\"status_id\" class=\"form-control\" id=\"status_id\">\n-                                    @foreach (status_list_admin() as $item)\n-                                        <option\n-                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                    @endforeach\n-                                </select>\n-                                @error('status_id')\n-                                <span class=\"text-danger\">{{ $message }}</span>\n-                                @enderror\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Comment</label>\n-                            <textarea name=\"comment\" id=\"status_comment\" cols=\"30\" rows=\"0\" class=\"form-control\"></textarea>\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Date</label>\n-                                    <input type=\"date\" value=\"{{ date('Y-m-d') }}\" max=\"\"\n-                                        class=\"form-control\" id=\"created_date\" name=\"created_date\"\n-                                        placeholder=\"Enter title\">\n-                            </div>\n-                        </div>\n-                    </div>\n-                    \n-                     <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Expected Date</label>\n-                                    <input type=\"date\" value=\"\" max=\"\"\n-                                        class=\"form-control\" id=\"expected_date\" name=\"expected_date\"\n-                                        placeholder=\"Enter title\">\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-4\">\n-                        <div class=\"form-group\">\n-                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light updateStatus\">Update\n-                                </button>\n-                                </div>\n-\n-                        </div>\n-                    </div>\n-                </div>\n-        </div>\n-      <div class=\"modal-footer\">\n-        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-      </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-<div id=\"statusModalSucess\" class=\"modal fade\" role=\"dialog\">\n-  <div class=\"modal-dialog\">\n-\n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                                <div class=\"successMsg\">Status Updated Successfully</div>\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-                </div>\n-            </form>\n-        </div>\n-      <div class=\"modal-footer\">\n-        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-      </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-<div id=\"currentStatusModal\" class=\"modal fade bd-example-modal-lg\" role=\"dialog\">\n-  <div class=\"modal-dialog modal-lg\">\n-\n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-            <form action=\"{{route('branch.ships.boxStatusUpdatetoship')}}\" method=\"post\">\n-                @csrf\n-                <div class=\"col-md-12\">\n-                    <div class=\"row\">\n-                        <table id=\"shipsTable1\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                            <thead>\n-                            <tr>\n-                                <th>Box Name</th>\n-                                <th>Current Status</th>\n-                                <th>Dated on</th>\n-                                <th>Update Status</th>\n-                                <th>Update Status Date</th>\n-                                <th>Expected Date</th>\n-                                <th>Comment</th>\n-                            </tr>\n-                            </thead>\n-                            <tbody class=\"fetchData\" status=\"{{status_list_admin() }}\">\n-\n-                            </tbody>\n-                        </table>\n-                    </div>\n-                </div>\n-\n-                <div class=\"form-group\">\n-                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n-                        </button>\n-                </div>\n-            </form>\n-        </div>\n-        <div class=\"modal-footer\">\n-            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-        </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-@endsection\n-@section('styles')\n-    @include('layouts.datatables_style')\n-    <style>\n-        .floatRight {float:right;}\n-        .m-l-10 {margin-left:10px!important;}\n-        .detailedBoxView {color:#661ec2;}\n-        .modal-lg {max-width:1000px !important;}\n-        .successMsg {font-size:18px; color:green;}\n-        .fontRed {color:red;}\n-        .icons {padding: 5px; font-size: x-small;}\n-        #shipsTable {font-size:14px !important;}\n-        .detailHead {\n-            border: 1px solid #d6d6d6;\n-            margin: 25px 80px;\n-            background-color: #d6d6d6;\n-        }\n-        #bookingList {font-size:14px !important;}\n-        #bookingList thead{font-size:14px !important;}\n-        #bookingList_length {display:none;}\n-        .m-t-50 {margin-top:50px;}\n-    </style>\n-@endsection\n-\n-@section('scripts')\n-<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\n-    @include('layouts.datatables_js')\n-\n-    <script>\n-        $(document).ready(function() {\n-\n-            $('.shipmet_check').change(function(){\n-                if($(this).is(':checked')){\n-                    $('#printallButton').prop('disabled', false);\n-                } else {\n-                    $('#printallButton').prop('disabled', true);\n-                }\n-            });\n-\n-            $('#allcb').change(function(){\n-                if($(this).is(':checked')){\n-                    console.log('hhhhhhhhhhhhhhhhhhhhhhhhhh');\n-                    $('#printallButton').prop('disabled', false);\n-                } else {\n-                    $('#printallButton').prop('disabled', true);\n-                }\n-            });\n-\n-\n-            $('#bookingList_checkbox').click(function() {\n-                $('.bookingSelection').prop('checked', $(this).prop('checked')).change();\n-                window.location.reload();\n-\n-            });\n-\n-\n-\n-\n-            $(document).ready(function() {\n-                // Check if any .bookingSelection checkboxes are checked on page load\n-                if ($('.bookingSelection:checked').length > 0) {\n-                    $('#bookingList_checkbox').prop('checked', true);\n-                } else {\n-                    $('#bookingList_checkbox').prop('checked', false);\n-                }\n-\n-                // Handle changes in .bookingSelection checkboxes\n-                $('.bookingSelection').change(function() {\n-                    if ($('.bookingSelection:checked').length > 0) {\n-                        $('#bookingList_checkbox').prop('checked', true);\n-                    } else {\n-                        $('#bookingList_checkbox').prop('checked', false);\n-                    }\n-                });\n-\n-\n-                $('#bookingList_checkbox').change(function() {\n-                    if (!$(this).prop('checked')) {\n-                        window.location.reload();\n-                    }\n-                });\n-\n-\n-            });\n-\n-\n-            $('#shipmentTypeSelect').change(function() {\n-                var selectedType = $(this).val();\n-                $('#bookingList tbody tr').hide().find('input.bookingSelection').removeClass('bookingSelection'); // Hide all rows and remove class from all td elements\n-                if (selectedType === \"\") { // Show all if \"All\" is selected\n-                    $('#bookingList tbody tr').show().find('input#bookingSelection').addClass('bookingSelection');\n-                } else if (selectedType) {\n-                    $('#bookingList tbody tr[data-shipment-type-id=\"' + selectedType + '\"]').show().find('input#bookingSelection').addClass('bookingSelection');\n-                }\n-            });\n-\n-        });\n-\n-    $(document).ready(function () {\n-        $('#bookingList').DataTable( {\n-            \"autoWidth\": false,\n-            \"scrollX\": true,\n-            \"aaSorting\": [ [0,'desc'] ],\n-            \"bSort\": false,\n-            \"responsive\": false\n-        });\n-\n-    });\n-\n-        $(function () {\n-            // validation needs name of the element\n-            // initialize after multiselect\n-\n-            $(document).ready(function () {\n-                $('.select2').select2();\n-                if (window.location.href.indexOf('reload')==-1) {\n-                    window.location.replace(window.location.href+'?reload');\n-                }\n-\n-            });\n-\n-\n-\n-            var $checkboxes = $('.checkbox-item');\n-            $('#allcb').click(function (e) {\n-                    var checkboxesLength = $checkboxes.length;\n-                    var checkedCheckboxesLength = $checkboxes.filter(':checked').length;\n-                    if(checkboxesLength == checkedCheckboxesLength) {\n-                        $('#allcb').prop('checked', true);\n-                    }else{\n-                        $('#allcb').prop('checked', false);\n-                    }\n-\n-                    // $('#allcb').click(function (e) {\n-                    if( $(\"#allcb\").prop('checked') == true) {\n-                        $.each($('td:not(.k-state-disabled) .k-checkbox'), function () {\n-                            $(this).prop(\"checked\", true)\n-                        });\n-                    }\n-                    else {\n-                        $('.k-checkbox').prop('checked', false);\n-                    }\n-                    // $(this).closest('table').find('td input:checkbox').prop('checked', this.checked);\n-                // });\n-            });\n-\n-            $(document).on('click', \".detailedBoxView\", function() {\n-                var boxId = $(this).attr('value');\n-                var dateVal = $(this).attr('dateVal');\n-                var boxName = $(this).closest('tr').find('.boxName').text();\n-                var expectedDate = $(this).attr('expecteddate');\n-                var comment = $(this).attr('comment');\n-                $(\"#currentStatusModal\").modal('show');\n-                var d = new Date();\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: `{{ route('branch.ship.list.getBoxDetails') }}`,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"boxId\":boxId, \"boxName\":boxName }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            var html = [];\n-                            $('.fetchData').html('');\n-                            // $.each(result, function (key, value) {\n-                                var selectOptionhtml = '';\n-                                var dt = new Date();\n-                                var newDate = '<input type=\"date\" name=\"statusDate[]\" class=\"form-control\" value=\"'+dateVal+'\">';\n-                                var expectedDateInput = '<input type=\"date\" name=\"expected_date[]\" class=\"form-control\" value=\"'+expectedDate+'\" >';\n-                                var commentInput  = '<input type=\"text\" name=\"comment[]\" class=\"form-control\" value=\"'+comment+'\" >';\n-                                var statusCount = result.box_statuses.length;\n-                                var lastNum = statusCount - 1;\n-                                var selectOption = JSON.parse($(\".fetchData\").attr(\"status\"));\n-                                selectOptionhtml += \"<select class='form-control class-form' name='status[]'><option value='0'>Select</option>\";\n-                                for (var i = 0; i < selectOption.length; i++) {\n-                                    // Check if the id matches\n-                                    var selected = selectOption[i].id === result.box_statuses[lastNum].status.id ? ' selected' : '';\n-\n-                                    // Append the option with the selected attribute if applicable\n-                                    selectOptionhtml += \"<option value='\" + selectOption[i].id + \"'\" + selected + \">\" + selectOption[i].name + \"</option>\";\n-                                }\n-                                selectOptionhtml += \"</select>\";\n-                                html += '<tr>'+\n-                                        '<td>'+result.box_name+'<input type=\"hidden\" name=\"boxIds[]\" value=\"'+result.id+'\"></td>';\n-                                        if(statusCount > 0) {\n-                                            html +=   '<td>'+result.box_statuses[lastNum].status.name+'</td>';\n-                                            html +=   '<td>'+result.dated+'</td>';\n-\n-                                            html +=   '<td>'+selectOptionhtml+'</td>';\n-                                            html +=   '<td>'+newDate+'</td>';\n-                                            html +=  '<td>'+expectedDateInput+'</td>';\n-                                            html +=  '<td>'+commentInput +'</td>';\n-                                        } else {\n-                                            html +=  '<td>--</td>';\n-                                            html +=  '<td>--</td>';\n-\n-                                            html +=  '<td>'+selectOptionhtml+'</td>';\n-                                            html +=  '<td>'+newDate+'</td>';\n-                                            html +=  '<td>'+expectedDateInput+'</td>';\n-                                            html +=  '<td>'+commentInput +'</td>';\n-                                        }\n-\n-                                        html += '</tr>';\n-                            // });\n-                            $('.fetchData').html(html);\n-                            $('.select2').select2();\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                }); // ajax call closing\n-            });\n-\n-            $(document).on('click',\"#changeStatus\", function() {\n-                var checked = $(\".shipmentIds\").is(\":checked\");\n-                if(checked == true) {\n-                    var boxesName = $(this).attr('boxesName');\n-                    var boxesVal = $(this).attr('boxesVal');\n-                    var shipmentId = $(\".shipmentIds\").attr('value');\n-                    $(\"#statusModal\").modal('show');\n-                }\n-            });\n-\n-            $(document).on('click', '.updateStatus', function(){\n-                var url = \"{{route('branch.ships.multiUpdatebookingtoship')}}\";\n-                var selectedShipIds = $(\".selectedShipIds\").val();\n-                var selectedShipmentId = $(\".selectedShipmentId\").val();\n-                var selectedBoxId = $(\".selectedBoxId\").val();\n-                var status_id = $(\"#status_id\").val();\n-                var status_comment = $(\"#status_comment\").val();\n-                var created_date = $(\"#created_date\").val();\n-                var expected_date = $(\"#expected_date\").val();\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: url,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"shipIds\":selectedShipIds,\"selectedBoxId\":selectedBoxId, \"shipmentIds\":selectedShipmentId, \"status_id\":status_id, \"created_date\":created_date, 'comment':status_comment, \"expected_date\":expected_date, }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            if(result.success == 'Status Updated Successfully') {\n-                                $(\"#statusModalSucess\").modal('show');\n-                            }\n-                            location.reload();\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                }); // ajax call closing\n-            });\n-\n-\n-            $(document).on('click', \".shipmentIds\", function() {\n-                var val = [];\n-                var valshipId = [];\n-                var boxesVal = [];\n-                var boxesName = [];\n-                $(':checkbox:checked').each(function(i){\n-                    val[i] = $(this).val();\n-                    valshipId[i] = $(this).attr('shipId');\n-                    boxesName[i] = $(this).closest('tr').find('.boxName').text();\n-                    boxesVal[i] = $(this).closest('tr').find('.boxName').attr('boxId');\n-                });\n-                $(\".hidShipIds\").val(val);\n-                $(\".hidBoxIds\").val(boxesVal);\n-                $(\".selectedBoxId\").val(boxesVal);\n-                $(\".selectedShipmentId\").val(val);\n-                $(\"#changeStatus\").attr('shipId',valshipId);\n-                $(\"#changeStatus\").attr('shipmentId',val);\n-                $(\"#changeStatus\").attr('boxesVal',boxesVal);\n-                $(\"#changeStatus\").attr('boxesName',boxesName);\n-            });\n-            var arr = [];\n-            var alreadyExist = [];\n-            var removeItem = [];\n-\n-            $(\"input:checkbox.bookingSelection\").change(function() {\n-\n-            });\n-\n-\n-            $(document).on('change',\".bookingSelection\", function() {\n-\n-                var ischecked= $(this).is(':checked');\n-                if(ischecked){\n-                // alert('checkd ' + $(this).val());\n-                arr.push($(this).val());\n-                $(\"#selected_box_id\").val(arr);\n-                }\n-                else {\n-                // alert('uncheckd ' + $(this).val());\n-                removeItem.push($(this).val());\n-                $(\"#hidSelectList\").val(removeItem);\n-                }\n-                var checked = $(this).is(\":checked\");\n-                var total_selected_boxes = $(\"#total_selected_boxes\").val();\n-                var total_weight = $(\"#total_weight\").val();\n-                var total_value = $(\"#total_value\").val();\n-                var boxesVal = $(this).attr('boxVal');\n-                var boxWt = $(this).attr('boxWt');\n-                var selectedBoxId = $(this).attr('selectBoxId');\n-                // $.each($(\":checkbox:checked\"), function(){\n-                //     arr.push($(this).val());\n-                // });\n-                $(\"#selected_box_id\").val(arr);\n-\n-                if(checked == true) {\n-                    var newBoxes = parseFloat(total_selected_boxes) + parseFloat(1);\n-                    var newWeight = parseFloat(total_weight) + parseFloat(boxWt);\n-                    var newValue = parseFloat(total_value) + parseFloat(boxesVal);\n-\n-                } else {\n-                    var newBoxes = parseFloat(total_selected_boxes) - parseFloat(1);\n-                    var newWeight = parseFloat(total_weight) - parseFloat(boxWt);\n-                    var newValue = parseFloat(total_value) - parseFloat(boxesVal);\n-                }\n-                $(\"#total_selected_boxes\").val(newBoxes);\n-                $(\"#total_weight\").val(newWeight);\n-                $(\"#total_value\").val(newValue);\n-                var selectedBoxes = $(\"#selected_box_id\").val();\n-                var hidSelectList = $(\"#hidSelectList\").val();\n-                var url = \"{{route('branch.ships.multiSelectionUpdate')}}\";\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: url,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"selectedBoxes\":selectedBoxes, \"hidSelectList\":hidSelectList, \"shipId\":\"1\" }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            console.log(result);\n-                            var html = [];\n-                            html = result.boxes\n-                            $(\"#selected_box_id\").val(html);\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                });\n-                alreadyExist = [];\n-                arr = [];\n-            });\n-\n-        });\n-\n-</script>\n-\n-@endsection\n-@extends('layouts.app')\n-\n-@section('content')\n-\n-    <div class=\"content-page\" id=\"content-page\">\n-        <div class=\"content\">\n-\n-            <!-- Start Content-->\n-            <div class=\"container-fluid\">\n-\n-                <!-- start page title -->\n-                <div class=\"row\">\n-                    <div class=\"col-12\">\n-                        <div class=\"page-title-box\">\n-                            <div class=\"page-title-right\">\n-                                <ol class=\"breadcrumb m-0\">\n-                                    <li class=\"breadcrumb-item\"><a href=\"{{route('super-admin.dashboard') }}\">Home</a></li>\n-                                    <li class=\"breadcrumb-item\"><a href=\"{{route('branch.ship.create')}}\">Shipment List</a></li>\n-                                    <li class=\"breadcrumb-item active\">View Assigned</li>\n-\n-                                </ol>\n-                            </div>\n-                            <h4 class=\"page-title\">Assigned Shipments</h4>\n-\n-                        </div>\n-                    </div>\n-\n-                </div>\n-\n-                <?php\n-                    $selectedBoxId = [];\n-                    $res ='';\n-                    $total_count = 0;\n-                    $tot_sel_weight = 0;\n-                    $tot_sel_amt = 0;\n-                    $tot_weight = 0;\n-                    $tot_value = 0;\n-                    $tot_temp =0;\n-                    $tot_sel_temp =0;\n-                    $totalPieces =0;\n-\n-                    foreach( $ship_bookingsList as $booking) {\n-\n-                        $tot_temp= $booking->weight;\n-                        $tot_weight +=$tot_temp;\n-                        $tot_value += $booking->shipment->grand_total;\n-                        $totalPieces += 1;\n-                        // $totalPieces += $booking->shipment->number_of_pcs;\n-                        $List = '';\n-                        $ListValue = '';\n-                        $boxList = [];\n-                        $boxListValue = [];\n-\n-                        $status = '';\n-                        $lastStatus = '';\n-                        if(!empty($booking->shipment->bookingNumberStatus)) {\n-                            $status = collect($booking->shipment->bookingNumberStatus)->last();\n-\n-                            // $lastStatus = (!empty($status)) ? $status->status->name : $booking->ship->shipmentStatus->name ;\n-                        }\n-\n-                    }\n-                        ?>\n-                <!-- <div class=\"row\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card-box\">\n-                            <form action=\"{{route('branch.ships.createbookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-\n-                                @csrf\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-6\">\n-                                            <div class=\"form-group\">\n-                                                <label>Booking No</label>\n-                                                <select name=\"booking_ids[]\" id=\"booking_ids\" class=\"select2 form-control\"  multiple>\n-                                                    @foreach($bookings as $booking)\n-                                                    <option value=\"{{$booking->id}}\">{{$booking->booking_number}}</option>\n-                                                    @endforeach\n-                                                </select>\n-                                            </div>\n-                                        </div>\n-                                        <div class=\"col-md-6\">\n-                                            <div class=\"form-group\">\n-                                                <label>Shipment ID</label>\n-                                                <input type=\"text\" class=\"form-control\" name=\"shipment_id\" value=\"{{$ships->shipment_id}}\" />\n-                                            </div>\n-\n-\n-                                        </div>\n-                                    </div>\n-                                </div>\n-\n-\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                <label>AWB id</label>\n-                                                <input type=\"text\" class=\"form-control\" name=\"awd_id\" value=\"{{$ships->awd_id}}\" />\n-\n-                                            </div>\n-                                        </div>\n-\n-                                        <div class=\"col-md-3\">\n-                                            <div class=\"form-group\">\n-                                            <label>Date</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                    <label>Shipment Status</label>\n-                                                    <select name=\"status_id\" class=\"form-control\" id=\"\">\n-                                                        @foreach ( status_list_admin() as $item)\n-                                                            <option\n-                                                                {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                                        @endforeach\n-                                                    </select>\n-                                                    @error('status_id')\n-                                                    <span class=\"text-danger\">{{ $message }}</span>\n-                                                    @enderror\n-                                                </div>\n-                                        </div>\n-\n-\n-\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Estimated Delivery</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->estimated_delivery) ? date('Y-m-d', strtotime($ships->estimated_delivery)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"estimated_delivery\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-                                </div>\n-\n-                                <div class=\"text-center\">\n-                                    <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                    <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit\n-                                    </button>\n-                                </div>\n-\n-                            </form>\n-\n-                        </div>\n-\n-\n-\n-                    </div>\n-                </div> -->\n-\n-\n-                <!-- <div class=\"row\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card-box\">\n-                            <form action=\"{{route('branch.ships.updatebookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-\n-                                @csrf\n-\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                <label>Change Shipment Status</label>\n-                                                <select name=\"status_id\" class=\"form-control\" id=\"\">\n-                                                    @foreach (\\App\\Models\\Statuses::all() as $item)\n-                                                        <option\n-                                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                                    @endforeach\n-                                                </select>\n-                                                @error('status_id')\n-                                                <span class=\"text-danger\">{{ $message }}</span>\n-                                                @enderror\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Date</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Tracking Url</label>\n-                                                    <input type=\"text\" value=\"\" max=\"\"\n-                                                        class=\"form-control\" id=\"tracking_url\" name=\"tracking_url\"\n-                                                        placeholder=\"Enter tracking url\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                        <div class=\"form-group\">\n-                                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n-                                                </button>\n-                                                </div>\n-\n-                                        </div>\n-                                    </div>\n-\n-                                    </div>\n-\n-                                </div>\n-\n-\n-\n-                            </form>\n-\n-                        </div>\n-\n-\n-\n-                    </div>\n-                </div> -->\n-\n-\n-\n-                <div class=\"row clearfix\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card\">\n-\n-                            <div class=\"body\">\n-                                <div class=\"header\">\n-                                    <!-- <h4>Assigned Shipments</h4> -->\n-                                </div>\n-                                <div class=\"row detailHead\">\n-                                        <div class=\"col-md-6\">\n-                                            <h1>{{$ships->shipment_id}} / AWB NO: {{$ships->awb_number}}</h1>\n-                                            <h3>Boxes:<span class=\"fontRed\"> {{$totalPieces}}</span> , Weight: <span class=\"fontRed\">{{number_format($tot_weight,2)}} KG</span> </h3>\n-                                        </div>\n-                                        <div class=\"col-md-6\" style=\"margin-top:32px;\">\n-                                            <h5>&nbsp;</h5>\n-                                            <h5>FROM: <span class=\"fontRed\">{{$ships->portOfOrigins->name}}</span> To: <span class=\"fontRed\">{{$ships->portOfDestinations->name}}</span></h5>\n-                                        </div>\n-                                </div>\n-                                <div class=\"col-md-12 text-right \">\n-\n-                                    <div class=\"row floatRight\" >\n-                                        <a  href=\"{{route('branch.ships.deliverylistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Delivery List</a>\n-                                        <a  href=\"{{route('branch.ships.packinglistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Packing List </a>\n-                                        <a  href=\"{{route('branch.ships.customermanifestptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Customs Manifest</a>\n-                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light changeStatus mb-1\"  id=\"changeStatus\">Change Status</button>\n-\n-                                        <div class=\"modal fade\" id=\"printAllModal\" tabindex=\"-1\" aria-labelledby=\"printAllModalLabel\" aria-hidden=\"true\">\n-                                            <div class=\"modal-dialog\">\n-                                                <div class=\"modal-content w-75\">\n-                                                    <div class=\"modal-header\">\n-                                                        <h5 class=\"modal-title\" id=\"printAllModalLabel\">Print All Shipments</h5>\n-                                                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                                                    </div>\n-                                                    <div class=\"modal-body\">\n-                                                        <form action=\"{{ route('branch.shipment.printall') }}\" method=\"post\" target=\"_blank\">\n-                                                            @csrf\n-                                                            @foreach ($ship_bookingsList as $booking)\n-                                                                <input type=\"hidden\" name=\"booking_ids[]\" value=\"{{ $booking->id }}\">\n-                                                            @endforeach\n-                                                            <div class=\"row\">\n-                                                                <label class=\"ml-3\">Select Courier Company</label>\n-                                                                <div class=\"form-group col-md-12\">\n-                                                                    <input type=\"text\" name=\"awb_no\" value=\"{{$ships->awb_number}}\" class=\"d-none\">\n-                                                                    <select name=\"agency\" id=\"sender_id\" class=\"form-control\" required>\n-                                                                        @foreach ($agencies as $agency)\n-                                                                            <option value=\"{{$agency->id}}\">{{$agency->name}}</option>\n-                                                                        @endforeach\n-                                                                    </select>\n-                                                                </div>\n-                                                            </div>\n-                                                            <div class=\"col-12 text-center mt-2\" >\n-                                                                <button type=\"submit\"  class=\"btn btn-success p-2\" >Print all</button>\n-                                                            </div>\n-                                                        </form>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-                                        <button type=\"submit\" id=\"printallButton\" class=\"btn btn-success waves-effect waves-light ml-2 mb-1\" data-bs-toggle=\"modal\" data-bs-target=\"#printAllModal\" disabled>\n-                                            <i class=\"fas fa-print\"> Print all</i>\n-                                        </button>\n-\n-                                        <form action=\"{{route('branch.shipment.loadingExport')}}\" class=\"m-l-10\" method=\"post\" target=\"_blank\">\n-                                            @csrf\n-                                            <input type=\"hidden\" value=\"\" class=\"hidShipIds\" name=\"shipmentId\" />\n-                                            <input type=\"hidden\" value=\"\" class=\"hidBoxIds\" name=\"boxId\" />\n-                                            <input type=\"hidden\" value=\"{{$shipId}}\" class=\"selectedShipIds\" name=\"shipIds\" />\n-\n-                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light loadingExport\"><i class=\"fas fa-print\"> Export Loading List</i>\n-                                            </button>\n-                                        </form>\n-\n-                                    </div>\n-                                </div>\n-                                <div class=\"table-responsive\">\n-                                    <table id=\"shipsTable\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                                        <thead>\n-                                        <tr >\n-                                            <th><input type=\"checkbox\" id=\"allcb\" name=\"shipBookId[]\" class=\"shipmentIds checkbox-item selectAll\" value=\"{{(!empty($booking->shipment->id))}}\" shipId=\"{{(!empty($booking->ship->id))}}\"></th>\n-                                            <th>Booking No</th>\n-                                            <th>State</th>\n-                                            <th>Shipment name</th>\n-                                            <th>Shipment <br>Type</th>\n-                                            <th>No of Pcs</th>\n-                                            <th>Box Numbers</th>\n-                                            <th>Total Weight</th>\n-                                            <th>Invoice value</th>\n-                                            <th>Status</th>\n-                                            <th>Booking Created Date</th>\n-                                            <th>Action</th>\n-                                        </tr>\n-                                        </thead>\n-                                        <tbody  id=\"bookingData\">\n-                                        <?php\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist =0;\n-                                        $totalPieces =0;\n-                                        $boxList = [];\n-\n-                                        foreach( $ship_bookingsList as $booking) {\n-\n-                                            $tot_temp_exist= $booking->weight;\n-                                            $tot_weight_exist +=$tot_temp_exist;\n-                                            $tot_value_exist += $booking->packages->pluck('subtotal')->sum();\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n-                                            $boxList = [];\n-                                            $boxListValue = [];\n-\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if(($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $expectedDate = $status->expected_date;\n-                                                $comment = $status->comment;\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n-                                                if($lastStatus == 'Pending') {\n-                                                    $style= \"background-color:#ec1616e6;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else if ($lastStatus == 'Shipment on hold') {\n-                                                    $style= \"background-color:#ffdb00;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else {\n-                                                    $style= \"background-color:none;\";\n-                                                    $disabled = \"\";\n-                                                    $newClass = \"k-checkbox\";\n-                                                }\n+                                    <script>\n+                                        function validateCheckboxes() {\n+                                            // Select all checkboxes\n+                                            const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\n+                                        \n+                                            // Check if at least one checkbox is selected\n+                                            const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);\n+                                        \n+                                            if (!isChecked) {\n+                                                alert('Please select at least one checkbox.');\n+                                                return false; // Prevent form submission\n                                             }\n-\n-                                            ?>\n-                                            <tr style=\"{{ $style }}\">\n-                                                <td style=\"text-align:center\" ><input {{$disabled}} type=\"checkbox\" name=\"shipBookId[]\" class=\"shipmentIds {{$newClass}} shipmet_check\" value=\"{{$booking->shipment->id}}\" shipId=\"{{$booking->shipment_id}}\" boxId=\"{{$booking->id}}\"></td>\n-                                                <td style=\"text-align:center\" class=\"detailedBoxView\" value=\"{{$booking->id}}\" dateVal=\"{{date('Y-m-d')}}\" expectedDate=\"{{$expectedDate}}\" comment=\"{{$comment}}\">{{ $booking->shipment->booking_number}}</td>\n-                                                <td style=\"text-align:center\">{{$booking->shipment->receiver->address->state->name}}</td>\n-                                                <td style=\"text-align:center\">{{$ships->shipment_id}}</td>\n-                                                <td>{{$booking->shipment->shipMethType?$booking->shipment->shipMethType->name:''}}</td>\n-                                                <td style=\"text-align:center\">1</td>\n-                                                <td style=\"text-align:center\" class=\"boxName\" boxId=\"{{$booking->id}}\" ids=\"{{$ListValue}}\">{{ $booking->box_name }}</td>\n-                                                <td style=\"text-align:center\">{{ number_format($booking->weight,2) }}</td>\n-                                                {{-- <td style=\"text-align:center\">{{ number_format(floatval($booking->total_value) + floatval($booking->box_packing_charge),2)}}</td> --}}\n-                                                <td style=\"text-align:center\">{{$booking->packages->pluck('subtotal')->sum()}}</td>\n-\n-\n-                                                <td style=\"text-align:center\">{{$lastStatus}}</td>\n-                                                <td style=\"text-align:center\">{{ !empty($booking->created_at) ? date('d-m-Y', strtotime($booking->created_at)) : '' }}</td>\n-                                                <td>\n-                                                    <a href=\"#\" title=\"View\"\n-                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n-                                                        <i class=\"fas fa-eye\"></i>\n-                                                    </a>\n-                                                    <a href=\"/branch/shipment/single_print/{{$booking->id}}\" title=\"Print\" target=\"_blank\"\n-                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n-                                                        <i class=\"fas fa-print\"></i>\n-                                                    </a>\n-                                                        <a href=\"{{route('branch.ships.undoaddbooking',$booking->id)}}\" title=\"Remove\"\n-                                                        class=\"btn btn-icon waves-effect waves-light btn-dark icons\">\n-                                                            <i class=\"fas fa-undo\"></i>\n-                                                        </a>\n-                                                </td>\n-                                            </tr>\n-                                        <?php\n+                                        \n+                                            return true; // Allow form submission\n                                         }\n-                                        ?>\n-                                            <tr>\n-                                                <td  colspan=\"5\"> </td><td style=\"text-align:center\">{{ $totalPieces}}</td>\n-                                                <td  colspan=\"1\"> </td><td style=\"text-align:center\">{{ number_format($tot_weight_exist,2)}}</td>\n-                                                <td style=\"text-align:center\" >{{ number_format($tot_value_exist,2) }}</td>\n-                                                <td colspan=\"3\"  >\n-                                                    <div class=\"row\"><div class=\"col-6\">Average : {{$tot_weight_exist?number_format($tot_value_exist * $ships->exchange_rate/$tot_weight_exist,3):'0'}}  </div> <div class=\"col-6\">Duty : {{$tot_weight_exist?number_format($tot_value_exist*$ships->exchange_rate/$tot_weight_exist*77.28/100,3):'0'}}</div></div>\n+                                        </script>\n+                                        \n \n-                                                </td>\n-                                            </tr>\n-\n-\n-\n-                                            <!-- <tr id=\"bookingData\">\n-                                                <td>4545454</td>\n-                                                <td>Shipment 112</td>\n-                                                <td>3</td>\n-                                                <td>10</td>\n-                                                <td>25</td>\n-                                                <td>Shipment Forwarded</td>\n-                                                <td>\n-                                                @can(permission_edit())\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n-                                                            <i class=\"fas fa-pencil-alt\"></i>\n-                                                        </a>\n-                                                    @endcan\n-                                                    @can(permission_view())\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n-                                                            <i class=\"fas fa-eye\"></i>\n-                                                        </a>\n-                                                    @endcan\n-                                                    @can('shipment-print')\n-                                                    <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n-                                                            <i class=\"fas fa-eye\"></i>\n-                                                        </a>\n-\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n-                                                            <i class=\"fas fa-print\"></i>\n-                                                        </a>\n-\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-dark\">\n-                                                            <i class=\"fas fa-undo\"></i>\n-                                                        </a>\n-                                                    @endcan\n-\n-                                                </td>\n-                                            </tr> -->\n-\n-\n-                                        </tbody>\n-                                    </table>\n                                 </div>\n-\n                             </div>\n                         </div>\n-                        <div class=\"col-md-12 text-left \">\n-\n-                            <div class=\"floatLeft\" >\n-                                <select name=\"\" id=\"shipmentTypeSelect\" class=\"p-2 pb-0\">\n-                                    <option value=\"\">All</option>\n-                                    @foreach ($ship_types as $ship_types_data )\n-                                        <option value=\"{{$ship_types_data->id}}\">{{$ship_types_data->name}}</option>\n-                                    @endforeach\n-                                </select>\n-                            </div>\n-                        </div>\n-                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n-                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                            <thead style=\"font-size:14px;\">\n-                            <tr >\n-                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                                    <th>Collection Date <br> Collection Office</th>\n-                                    <th>ship metho</th>\n-                                    <th>Collection Staff<br> Collection Agent</th>\n-                                    <th>Customer<br>Sender/Receiver</th>\n-                                    <th>State/Emirates<br>Country</th>\n-                                    <th>Cargo No<br>Type</th>\n-                                    <th>Cargo Box<br>No</th>\n-                                    <th>Total<br>Weight</th>\n-                                    <th>Total<br>Amount</th>\n-                                    <th>Total<br>Value</th>\n-                                </tr>\n-                            </thead>\n-                            <tbody>\n-                                @foreach($boxes as $key=> $boxes)\n-                                    <?php\n-\n-                                        if(!empty($boxes->shipment->statusVal->name)){\n-                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n-                                                $showAddItems = true;\n-                                                $style =\"style=background-color:yellow;padding:5px;\";\n-                                            } else {\n-                                                $style =\"style=background-color:none\";\n-                                                $showAddItems = false;\n-\n-                                            }\n-                                        }\n-                                        $type = \"\";\n-                                        if(!empty($boxes->shipment->delivery_type)){\n-                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n-                                                $type = \"Door To Door\";\n-                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n-                                                $type =\"Door To Port\";\n-                                            }\n-                                            else {\n-                                                $type =\"\";\n-                                            }\n-                                        }\n-                                        if($boxes->is_select == 1) {\n-                                            $total_count += 1;\n-                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n-                                            $tot_sel_weight += $boxes->weight;\n-                                            $boxList[] = $boxes->id;\n-\n-                                        }\n-                                    ?>\n-                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n-                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n-                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n-                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n-                                        </td>\n-                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n-\n-                                        <td> @if($boxes->shipment->collected_by == 'driver')\n-                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n-                                                @else\n-                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n-                                                @endif\n-                                        </td>\n-                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n-                                        <td>{{ $boxes->box_name??\"\"}}</td>\n-                                        <td>{{ $boxes->weight??\"\"}}</td>\n-                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n-                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n-\n-                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n-                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n-\n-                                    </tr>\n-                                @endforeach\n-                                <?php\n-\n-                                $List = implode(', ', $boxList);\n-                                ?>\n-                            </tbody>\n-                        </table>\n-                        <div class=\"row m-t-50\">\n-                            <div class=\"col-md-12\">\n-                                <div class=\"\">\n-                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-                                        @csrf\n-                                        <div class=\"col-md-12\">\n-                                            <div class=\"row\">\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Selected Boxes</label>\n-                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Weight</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Amount</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n-                                                    <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n-                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n-                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-                                    </form>\n-\n-                                </div>\n-                            </div>\n-                        </div>\n                     </div>\n                 </div>\n             </div>\n             <!-- end container-fluid -->\n"
                },
                {
                    "date": 1733204988114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -589,12 +589,9 @@\n                                         </div>\n                                     </form>\n                                     <script>\n                                         function validateCheckboxes() {\n-                                            // Select all checkboxes\n                                             const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\n-                                        \n-                                            // Check if at least one checkbox is selected\n                                             const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);\n                                         \n                                             if (!isChecked) {\n                                                 alert('Please select at least one checkbox.');\n"
                },
                {
                    "date": 1733205279194,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -587,22 +587,9 @@\n                                                 </div>\n                                             </div>\n                                         </div>\n                                     </form>\n-                                    <script>\n-                                        function validateCheckboxes() {\n-                                            const checkboxes = document.querySelectorAll('input[type=\"checkbox\"]');\n-                                            const isChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);\n-                                        \n-                                            if (!isChecked) {\n-                                                alert('Please select at least one checkbox.');\n-                                                return false; // Prevent form submission\n-                                            }\n-                                        \n-                                            return true; // Allow form submission\n-                                        }\n-                                        </script>\n-                                        \n+                                    \n \n                                 </div>\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1733205391652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -576,16 +576,43 @@\n                                                         <label>Total Amount</label>\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n-                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n-                                                    <div class=\"form-group\">\n-                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n-                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n-                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                                                <script>\n+                                                    document.querySelector('form').addEventListener('submit', function(event) {\n+                                                        // Get all the checkboxes in the table\n+                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n+                                                        let isChecked = false;\n+                                                \n+                                                        // Loop through the checkboxes and check if any is checked\n+                                                        checkboxes.forEach(function(checkbox) {\n+                                                            if (checkbox.checked) {\n+                                                                isChecked = true;\n+                                                            }\n+                                                        });\n+                                                \n+                                                        // If no checkbox is selected, show an alert and prevent form submission\n+                                                        if (!isChecked) {\n+                                                            event.preventDefault();  // Prevent the form from being submitted\n+                                                            alert(\"Please select at least one booking.\");\n+                                                        }\n+                                                    });\n+                                                </script>\n+                                                \n+                                                <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                                    @csrf\n+                                                    <!-- form contents -->\n+                                                \n+                                                    <div class=\"col-md-2\" style=\"margin:30px;\">\n+                                                        <div class=\"form-group\">\n+                                                            <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                            <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                                            <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                                                        </div>\n                                                     </div>\n-                                                </div>\n+                                                </form>\n+                                                \n                                             </div>\n                                         </div>\n                                     </form>\n                                     \n"
                },
                {
                    "date": 1733207028155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -593,12 +593,17 @@\n                                                         // If no checkbox is selected, show an alert and prevent form submission\n                                                         if (!isChecked) {\n                                                             event.preventDefault();  // Prevent the form from being submitted\n                                                             alert(\"Please select at least one booking.\");\n+                                                            return false; // Return false if no checkbox is selected\n                                                         }\n+                                                \n+                                                        // Return true if at least one checkbox is checked\n+                                                        return true;\n                                                     });\n                                                 </script>\n                                                 \n+                                                \n                                                 <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                                     @csrf\n                                                     <!-- form contents -->\n                                                 \n"
                },
                {
                    "date": 1733207103552,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -589,12 +589,35 @@\n                                                                 isChecked = true;\n                                                             }\n                                                         });\n                                                 \n-                                                        // If no checkbox is selected, show an alert and prevent form submission\n+                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n                                                         if (!isChecked) {\n                                                             event.preventDefault();  // Prevent the form from being submitted\n-                                                            alert(\"Please select at least one booking.\");\n+                                                            \n+                                                            // Create custom alert message\n+                                                            const customAlert = document.createElement('div');\n+                                                            customAlert.style.position = 'fixed';\n+                                                            customAlert.style.top = '50%';\n+                                                            customAlert.style.left = '50%';\n+                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n+                                                            customAlert.style.backgroundColor = '#f44336';\n+                                                            customAlert.style.color = 'white';\n+                                                            customAlert.style.padding = '20px';\n+                                                            customAlert.style.borderRadius = '5px';\n+                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+                                                            customAlert.style.fontSize = '16px';\n+                                                            customAlert.style.zIndex = '1000';\n+                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n+                                                \n+                                                            // Append the custom alert to the body\n+                                                            document.body.appendChild(customAlert);\n+                                                \n+                                                            // Remove the custom alert after 3 seconds\n+                                                            setTimeout(function() {\n+                                                                customAlert.remove();\n+                                                            }, 3000);\n+                                                \n                                                             return false; // Return false if no checkbox is selected\n                                                         }\n                                                 \n                                                         // Return true if at least one checkbox is checked\n"
                },
                {
                    "date": 1733207152107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -589,35 +589,12 @@\n                                                                 isChecked = true;\n                                                             }\n                                                         });\n                                                 \n-                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n+                                                        // If no checkbox is selected, show an alert and prevent form submission\n                                                         if (!isChecked) {\n                                                             event.preventDefault();  // Prevent the form from being submitted\n-                                                            \n-                                                            // Create custom alert message\n-                                                            const customAlert = document.createElement('div');\n-                                                            customAlert.style.position = 'fixed';\n-                                                            customAlert.style.top = '50%';\n-                                                            customAlert.style.left = '50%';\n-                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n-                                                            customAlert.style.backgroundColor = '#f44336';\n-                                                            customAlert.style.color = 'white';\n-                                                            customAlert.style.padding = '20px';\n-                                                            customAlert.style.borderRadius = '5px';\n-                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-                                                            customAlert.style.fontSize = '16px';\n-                                                            customAlert.style.zIndex = '1000';\n-                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n-                                                \n-                                                            // Append the custom alert to the body\n-                                                            document.body.appendChild(customAlert);\n-                                                \n-                                                            // Remove the custom alert after 3 seconds\n-                                                            setTimeout(function() {\n-                                                                customAlert.remove();\n-                                                            }, 3000);\n-                                                \n+                                                            alert(\"Please select at least one booking.\");\n                                                             return false; // Return false if no checkbox is selected\n                                                         }\n                                                 \n                                                         // Return true if at least one checkbox is checked\n"
                },
                {
                    "date": 1733207214573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -576,8 +576,10 @@\n                                                         <label>Total Amount</label>\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n+\n+                                                \n                                                 <script>\n                                                     document.querySelector('form').addEventListener('submit', function(event) {\n                                                         // Get all the checkboxes in the table\n                                                         const checkboxes = document.querySelectorAll('.bookingSelection');\n@@ -589,16 +591,39 @@\n                                                                 isChecked = true;\n                                                             }\n                                                         });\n                                                 \n-                                                        // If no checkbox is selected, show an alert and prevent form submission\n+                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n                                                         if (!isChecked) {\n                                                             event.preventDefault();  // Prevent the form from being submitted\n-                                                            alert(\"Please select at least one booking.\");\n-                                                            return false; // Return false if no checkbox is selected\n+                                                            \n+                                                            // Create custom alert message\n+                                                            const customAlert = document.createElement('div');\n+                                                            customAlert.style.position = 'fixed';\n+                                                            customAlert.style.top = '50%';\n+                                                            customAlert.style.left = '50%';\n+                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n+                                                            customAlert.style.backgroundColor = '#f44336';\n+                                                            customAlert.style.color = 'white';\n+                                                            customAlert.style.padding = '20px';\n+                                                            customAlert.style.borderRadius = '5px';\n+                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+                                                            customAlert.style.fontSize = '16px';\n+                                                            customAlert.style.zIndex = '1000';\n+                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n+                                                \n+                                                            // Append the custom alert to the body\n+                                                            document.body.appendChild(customAlert);\n+                                                \n+                                                            // Remove the custom alert after 3 seconds\n+                                                            setTimeout(function() {\n+                                                                customAlert.remove();\n+                                                            }, 3000);\n+                                                \n+                                                            return false; // Prevent form submission if no checkbox is selected\n                                                         }\n                                                 \n-                                                        // Return true if at least one checkbox is checked\n+                                                        // If a checkbox is selected, submit the form\n                                                         return true;\n                                                     });\n                                                 </script>\n                                                 \n"
                },
                {
                    "date": 1733207266576,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -577,58 +577,86 @@\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n \n+\n+                                               <script>\n+    document.querySelector('form').addEventListener('submit', function(event) {\n+        event.preventDefault();  // Prevent the form from submitting normally\n+\n+        // Get all the checkboxes in the table\n+        const checkboxes = document.querySelectorAll('.bookingSelection');\n+        let isChecked = false;\n+\n+        // Loop through the checkboxes and check if any is checked\n+        checkboxes.forEach(function(checkbox) {\n+            if (checkbox.checked) {\n+                isChecked = true;\n+            }\n+        });\n+\n+        // If no checkbox is selected, show a custom alert and prevent submission\n+        if (!isChecked) {\n+            // Create custom alert message\n+            const customAlert = document.createElement('div');\n+            customAlert.style.position = 'fixed';\n+            customAlert.style.top = '50%';\n+            customAlert.style.left = '50%';\n+            customAlert.style.transform = 'translate(-50%, -50%)';\n+            customAlert.style.backgroundColor = '#f44336';\n+            customAlert.style.color = 'white';\n+            customAlert.style.padding = '20px';\n+            customAlert.style.borderRadius = '5px';\n+            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+            customAlert.style.fontSize = '16px';\n+            customAlert.style.zIndex = '1000';\n+            customAlert.textContent = \"Please select at least one booking before submitting.\";\n+\n+            // Append the custom alert to the body\n+            document.body.appendChild(customAlert);\n+\n+            // Remove the custom alert after 3 seconds\n+            setTimeout(function() {\n+                customAlert.remove();\n+            }, 3000);\n+\n+            return false;  // Prevent form submission if no checkbox is selected\n+        }\n+\n+        // If checkboxes are selected, prepare the data to be sent as JSON\n+        const formData = new FormData(event.target);  // Collect form data\n+        const dataObject = {};\n+\n+        // Convert FormData to a JSON object\n+        formData.forEach((value, key) => {\n+            dataObject[key] = value;\n+        });\n+\n+        // Send the form data as JSON using Fetch API (AJAX)\n+        fetch('/your-json-endpoint', {\n+            method: 'POST',\n+            headers: {\n+                'Content-Type': 'application/json',\n+            },\n+            body: JSON.stringify(dataObject),\n+        })\n+        .then(response => response.json())\n+        .then(data => {\n+            // Handle the server response\n+            if (data.success) {\n+                alert('Booking added successfully!');\n+                // Optionally, handle the success, like redirecting or updating the page\n+            } else {\n+                alert('There was an error with the booking.');\n+            }\n+        })\n+        .catch(error => {\n+            alert('An error occurred while submitting the form.');\n+        });\n+    });\n+</script>\n+\n                                                 \n-                                                <script>\n-                                                    document.querySelector('form').addEventListener('submit', function(event) {\n-                                                        // Get all the checkboxes in the table\n-                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n-                                                        let isChecked = false;\n-                                                \n-                                                        // Loop through the checkboxes and check if any is checked\n-                                                        checkboxes.forEach(function(checkbox) {\n-                                                            if (checkbox.checked) {\n-                                                                isChecked = true;\n-                                                            }\n-                                                        });\n-                                                \n-                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n-                                                        if (!isChecked) {\n-                                                            event.preventDefault();  // Prevent the form from being submitted\n-                                                            \n-                                                            // Create custom alert message\n-                                                            const customAlert = document.createElement('div');\n-                                                            customAlert.style.position = 'fixed';\n-                                                            customAlert.style.top = '50%';\n-                                                            customAlert.style.left = '50%';\n-                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n-                                                            customAlert.style.backgroundColor = '#f44336';\n-                                                            customAlert.style.color = 'white';\n-                                                            customAlert.style.padding = '20px';\n-                                                            customAlert.style.borderRadius = '5px';\n-                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-                                                            customAlert.style.fontSize = '16px';\n-                                                            customAlert.style.zIndex = '1000';\n-                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n-                                                \n-                                                            // Append the custom alert to the body\n-                                                            document.body.appendChild(customAlert);\n-                                                \n-                                                            // Remove the custom alert after 3 seconds\n-                                                            setTimeout(function() {\n-                                                                customAlert.remove();\n-                                                            }, 3000);\n-                                                \n-                                                            return false; // Prevent form submission if no checkbox is selected\n-                                                        }\n-                                                \n-                                                        // If a checkbox is selected, submit the form\n-                                                        return true;\n-                                                    });\n-                                                </script>\n-                                                \n-                                                \n                                                 <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                                     @csrf\n                                                     <!-- form contents -->\n                                                 \n"
                },
                {
                    "date": 1733207367263,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -576,87 +576,58 @@\n                                                         <label>Total Amount</label>\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n-\n-\n-                                               <script>\n-    document.querySelector('form').addEventListener('submit', function(event) {\n-        event.preventDefault();  // Prevent the form from submitting normally\n-\n-        // Get all the checkboxes in the table\n-        const checkboxes = document.querySelectorAll('.bookingSelection');\n-        let isChecked = false;\n-\n-        // Loop through the checkboxes and check if any is checked\n-        checkboxes.forEach(function(checkbox) {\n-            if (checkbox.checked) {\n-                isChecked = true;\n-            }\n-        });\n-\n-        // If no checkbox is selected, show a custom alert and prevent submission\n-        if (!isChecked) {\n-            // Create custom alert message\n-            const customAlert = document.createElement('div');\n-            customAlert.style.position = 'fixed';\n-            customAlert.style.top = '50%';\n-            customAlert.style.left = '50%';\n-            customAlert.style.transform = 'translate(-50%, -50%)';\n-            customAlert.style.backgroundColor = '#f44336';\n-            customAlert.style.color = 'white';\n-            customAlert.style.padding = '20px';\n-            customAlert.style.borderRadius = '5px';\n-            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-            customAlert.style.fontSize = '16px';\n-            customAlert.style.zIndex = '1000';\n-            customAlert.textContent = \"Please select at least one booking before submitting.\";\n-\n-            // Append the custom alert to the body\n-            document.body.appendChild(customAlert);\n-\n-            // Remove the custom alert after 3 seconds\n-            setTimeout(function() {\n-                customAlert.remove();\n-            }, 3000);\n-\n-            return false;  // Prevent form submission if no checkbox is selected\n-        }\n-\n-        // If checkboxes are selected, prepare the data to be sent as JSON\n-        const formData = new FormData(event.target);  // Collect form data\n-        const dataObject = {};\n-\n-        // Convert FormData to a JSON object\n-        formData.forEach((value, key) => {\n-            dataObject[key] = value;\n-        });\n-\n-        // Send the form data as JSON using Fetch API (AJAX)\n-        fetch('/your-json-endpoint', {\n-            method: 'POST',\n-            headers: {\n-                'Content-Type': 'application/json',\n-            },\n-            body: JSON.stringify(dataObject),\n-        })\n-        .then(response => response.json())\n-        .then(data => {\n-            // Handle the server response\n-            if (data.success) {\n-                alert('Booking added successfully!');\n-                // Optionally, handle the success, like redirecting or updating the page\n-            } else {\n-                alert('There was an error with the booking.');\n-            }\n-        })\n-        .catch(error => {\n-            alert('An error occurred while submitting the form.');\n-        });\n-    });\n-</script>\n-\n                                                 \n+                                                <script>\n+                                                    document.querySelector('form').addEventListener('submit', function(event) {\n+                                                        // Get all the checkboxes in the table\n+                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n+                                                        let isChecked = false;\n+                                                \n+                                                        // Loop through the checkboxes and check if any is checked\n+                                                        checkboxes.forEach(function(checkbox) {\n+                                                            if (checkbox.checked) {\n+                                                                isChecked = true;\n+                                                            }\n+                                                        });\n+                                                \n+                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n+                                                        if (!isChecked) {\n+                                                            event.preventDefault();  // Prevent the form from being submitted\n+                                                            \n+                                                            // Create custom alert message\n+                                                            const customAlert = document.createElement('div');\n+                                                            customAlert.style.position = 'fixed';\n+                                                            customAlert.style.top = '50%';\n+                                                            customAlert.style.left = '50%';\n+                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n+                                                            customAlert.style.backgroundColor = '#f44336';\n+                                                            customAlert.style.color = 'white';\n+                                                            customAlert.style.padding = '20px';\n+                                                            customAlert.style.borderRadius = '5px';\n+                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+                                                            customAlert.style.fontSize = '16px';\n+                                                            customAlert.style.zIndex = '1000';\n+                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n+                                                \n+                                                            // Append the custom alert to the body\n+                                                            document.body.appendChild(customAlert);\n+                                                \n+                                                            // Remove the custom alert after 3 seconds\n+                                                            setTimeout(function() {\n+                                                                customAlert.remove();\n+                                                            }, 3000);\n+                                                \n+                                                            return false; // Prevent form submission if no checkbox is selected\n+                                                        }\n+                                                \n+                                                        // If a checkbox is selected, submit the form\n+                                                        return true;\n+                                                    });\n+                                                </script>\n+                                                \n+                                                \n                                                 <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                                     @csrf\n                                                     <!-- form contents -->\n                                                 \n"
                },
                {
                    "date": 1733207399200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1172 @@\n+@extends('layouts.app')\n+\n+@section('content')\n+\n+    <div class=\"content-page\" id=\"content-page\">\n+        <div class=\"content\">\n+\n+            <!-- Start Content-->\n+            <div class=\"container-fluid\">\n+\n+                <!-- start page title -->\n+                <div class=\"row\">\n+                    <div class=\"col-12\">\n+                        <div class=\"page-title-box\">\n+                            <div class=\"page-title-right\">\n+                                <ol class=\"breadcrumb m-0\">\n+                                    <li class=\"breadcrumb-item\"><a href=\"{{route('super-admin.dashboard') }}\">Home</a></li>\n+                                    <li class=\"breadcrumb-item\"><a href=\"{{route('branch.ship.create')}}\">Shipment List</a></li>\n+                                    <li class=\"breadcrumb-item active\">View Assigned</li>\n+\n+                                </ol>\n+                            </div>\n+                            <h4 class=\"page-title\">Assigned Shipments</h4>\n+\n+                        </div>\n+                    </div>\n+\n+                </div>\n+\n+                <?php\n+                    $selectedBoxId = [];\n+                    $res ='';\n+                    $total_count = 0;\n+                    $tot_sel_weight = 0;\n+                    $tot_sel_amt = 0;\n+                    $tot_weight = 0;\n+                    $tot_value = 0;\n+                    $tot_temp =0;\n+                    $tot_sel_temp =0;\n+                    $totalPieces =0;\n+\n+                    foreach( $ship_bookingsList as $booking) {\n+\n+                        $tot_temp= $booking->weight;\n+                        $tot_weight +=$tot_temp;\n+                        $tot_value += $booking->shipment->grand_total;\n+                        $totalPieces += 1;\n+                        // $totalPieces += $booking->shipment->number_of_pcs;\n+                        $List = '';\n+                        $ListValue = '';\n+                        $boxList = [];\n+                        $boxListValue = [];\n+\n+                        $status = '';\n+                        $lastStatus = '';\n+                        if(!empty($booking->shipment->bookingNumberStatus)) {\n+                            $status = collect($booking->shipment->bookingNumberStatus)->last();\n+\n+                            // $lastStatus = (!empty($status)) ? $status->status->name : $booking->ship->shipmentStatus->name ;\n+                        }\n+\n+                    }\n+                        ?>\n+                <!-- <div class=\"row\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card-box\">\n+                            <form action=\"{{route('branch.ships.createbookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+\n+                                @csrf\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-6\">\n+                                            <div class=\"form-group\">\n+                                                <label>Booking No</label>\n+                                                <select name=\"booking_ids[]\" id=\"booking_ids\" class=\"select2 form-control\"  multiple>\n+                                                    @foreach($bookings as $booking)\n+                                                    <option value=\"{{$booking->id}}\">{{$booking->booking_number}}</option>\n+                                                    @endforeach\n+                                                </select>\n+                                            </div>\n+                                        </div>\n+                                        <div class=\"col-md-6\">\n+                                            <div class=\"form-group\">\n+                                                <label>Shipment ID</label>\n+                                                <input type=\"text\" class=\"form-control\" name=\"shipment_id\" value=\"{{$ships->shipment_id}}\" />\n+                                            </div>\n+\n+\n+                                        </div>\n+                                    </div>\n+                                </div>\n+\n+\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                <label>AWB id</label>\n+                                                <input type=\"text\" class=\"form-control\" name=\"awd_id\" value=\"{{$ships->awd_id}}\" />\n+\n+                                            </div>\n+                                        </div>\n+\n+                                        <div class=\"col-md-3\">\n+                                            <div class=\"form-group\">\n+                                            <label>Date</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                    <label>Shipment Status</label>\n+                                                    <select name=\"status_id\" class=\"form-control\" id=\"\">\n+                                                        @foreach ( status_list_admin() as $item)\n+                                                            <option\n+                                                                {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                                        @endforeach\n+                                                    </select>\n+                                                    @error('status_id')\n+                                                    <span class=\"text-danger\">{{ $message }}</span>\n+                                                    @enderror\n+                                                </div>\n+                                        </div>\n+\n+\n+\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Estimated Delivery</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->estimated_delivery) ? date('Y-m-d', strtotime($ships->estimated_delivery)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"estimated_delivery\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+                                </div>\n+\n+                                <div class=\"text-center\">\n+                                    <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                    <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit\n+                                    </button>\n+                                </div>\n+\n+                            </form>\n+\n+                        </div>\n+\n+\n+\n+                    </div>\n+                </div> -->\n+\n+\n+                <!-- <div class=\"row\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card-box\">\n+                            <form action=\"{{route('branch.ships.updatebookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+\n+                                @csrf\n+\n+                                <div class=\"col-md-12\">\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                                <label>Change Shipment Status</label>\n+                                                <select name=\"status_id\" class=\"form-control\" id=\"\">\n+                                                    @foreach (\\App\\Models\\Statuses::all() as $item)\n+                                                        <option\n+                                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                                    @endforeach\n+                                                </select>\n+                                                @error('status_id')\n+                                                <span class=\"text-danger\">{{ $message }}</span>\n+                                                @enderror\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Date</label>\n+                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n+                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n+                                                        placeholder=\"Enter title\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                            <div class=\"form-group\">\n+                                            <label>Tracking Url</label>\n+                                                    <input type=\"text\" value=\"\" max=\"\"\n+                                                        class=\"form-control\" id=\"tracking_url\" name=\"tracking_url\"\n+                                                        placeholder=\"Enter tracking url\">\n+                                            </div>\n+                                        </div>\n+                                    </div>\n+\n+                                    <div class=\"row\">\n+                                        <div class=\"col-md-4\">\n+                                        <div class=\"form-group\">\n+                                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n+                                                </button>\n+                                                </div>\n+\n+                                        </div>\n+                                    </div>\n+\n+                                    </div>\n+\n+                                </div>\n+\n+\n+\n+                            </form>\n+\n+                        </div>\n+\n+\n+\n+                    </div>\n+                </div> -->\n+\n+\n+\n+                <div class=\"row clearfix\">\n+                    <div class=\"col-md-12\">\n+                        <div class=\"card\">\n+\n+                            <div class=\"body\">\n+                                <div class=\"header\">\n+                                    <!-- <h4>Assigned Shipments</h4> -->\n+                                </div>\n+                                <div class=\"row detailHead\">\n+                                        <div class=\"col-md-6\">\n+                                            <h1>{{$ships->shipment_id}} / AWB NO: {{$ships->awb_number}}</h1>\n+                                            <h3>Boxes:<span class=\"fontRed\"> {{$totalPieces}}</span> , Weight: <span class=\"fontRed\">{{number_format($tot_weight,2)}} KG</span> </h3>\n+                                        </div>\n+                                        <div class=\"col-md-6\" style=\"margin-top:32px;\">\n+                                            <h5>&nbsp;</h5>\n+                                            <h5>FROM: <span class=\"fontRed\">{{$ships->portOfOrigins->name}}</span> To: <span class=\"fontRed\">{{$ships->portOfDestinations->name}}</span></h5>\n+                                        </div>\n+                                </div>\n+                                <div class=\"col-md-12 text-right \">\n+\n+                                    <div class=\"row floatRight\" >\n+                                        <a  href=\"{{route('branch.ships.deliverylistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Delivery List</a>\n+                                        <a  href=\"{{route('branch.ships.packinglistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Packing List </a>\n+                                        <a  href=\"{{route('branch.ships.customermanifestptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Customs Manifest</a>\n+                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light changeStatus mb-1\"  id=\"changeStatus\">Change Status</button>\n+\n+                                        <div class=\"modal fade\" id=\"printAllModal\" tabindex=\"-1\" aria-labelledby=\"printAllModalLabel\" aria-hidden=\"true\">\n+                                            <div class=\"modal-dialog\">\n+                                                <div class=\"modal-content w-75\">\n+                                                    <div class=\"modal-header\">\n+                                                        <h5 class=\"modal-title\" id=\"printAllModalLabel\">Print All Shipments</h5>\n+                                                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                                                    </div>\n+                                                    <div class=\"modal-body\">\n+                                                        <form action=\"{{ route('branch.shipment.printall') }}\" method=\"post\" target=\"_blank\">\n+                                                            @csrf\n+                                                            @foreach ($ship_bookingsList as $booking)\n+                                                                <input type=\"hidden\" name=\"booking_ids[]\" value=\"{{ $booking->id }}\">\n+                                                            @endforeach\n+                                                            <div class=\"row\">\n+                                                                <label class=\"ml-3\">Select Courier Company</label>\n+                                                                <div class=\"form-group col-md-12\">\n+                                                                    <input type=\"text\" name=\"awb_no\" value=\"{{$ships->awb_number}}\" class=\"d-none\">\n+                                                                    <select name=\"agency\" id=\"sender_id\" class=\"form-control\" required>\n+                                                                        @foreach ($agencies as $agency)\n+                                                                            <option value=\"{{$agency->id}}\">{{$agency->name}}</option>\n+                                                                        @endforeach\n+                                                                    </select>\n+                                                                </div>\n+                                                            </div>\n+                                                            <div class=\"col-12 text-center mt-2\" >\n+                                                                <button type=\"submit\"  class=\"btn btn-success p-2\" >Print all</button>\n+                                                            </div>\n+                                                        </form>\n+                                                    </div>\n+                                                </div>\n+                                            </div>\n+                                        </div>\n+\n+                                        <button type=\"submit\" id=\"printallButton\" class=\"btn btn-success waves-effect waves-light ml-2 mb-1\" data-bs-toggle=\"modal\" data-bs-target=\"#printAllModal\" disabled>\n+                                            <i class=\"fas fa-print\"> Print all</i>\n+                                        </button>\n+\n+                                        <form action=\"{{route('branch.shipment.loadingExport')}}\" class=\"m-l-10\" method=\"post\" target=\"_blank\">\n+                                            @csrf\n+                                            <input type=\"hidden\" value=\"\" class=\"hidShipIds\" name=\"shipmentId\" />\n+                                            <input type=\"hidden\" value=\"\" class=\"hidBoxIds\" name=\"boxId\" />\n+                                            <input type=\"hidden\" value=\"{{$shipId}}\" class=\"selectedShipIds\" name=\"shipIds\" />\n+\n+                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light loadingExport\"><i class=\"fas fa-print\"> Export Loading List</i>\n+                                            </button>\n+                                        </form>\n+\n+                                    </div>\n+                                </div>\n+                                <div class=\"table-responsive\">\n+                                    <table id=\"shipsTable\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                                        <thead>\n+                                        <tr >\n+                                            <th><input type=\"checkbox\" id=\"allcb\" name=\"shipBookId[]\" class=\"shipmentIds checkbox-item selectAll\" value=\"{{(!empty($booking->shipment->id))}}\" shipId=\"{{(!empty($booking->ship->id))}}\"></th>\n+                                            <th>Booking No</th>\n+                                            <th>State</th>\n+                                            <th>Shipment name</th>\n+                                            <th>Shipment <br>Type</th>\n+                                            <th>No of Pcs</th>\n+                                            <th>Box Numbers</th>\n+                                            <th>Total Weight</th>\n+                                            <th>Invoice value</th>\n+                                            <th>Status</th>\n+                                            <th>Booking Created Date</th>\n+                                            <th>Action</th>\n+                                        </tr>\n+                                        </thead>\n+                                        <tbody  id=\"bookingData\">\n+                                        <?php\n+                                        $tot_weight_exist = 0;\n+                                        $tot_value_exist = 0;\n+                                        $tot_temp_exist =0;\n+                                        $totalPieces =0;\n+                                        $boxList = [];\n+\n+                                        foreach( $ship_bookingsList as $booking) {\n+\n+                                            $tot_temp_exist= $booking->weight;\n+                                            $tot_weight_exist +=$tot_temp_exist;\n+                                            $tot_value_exist += $booking->packages->pluck('subtotal')->sum();\n+                                            $totalPieces += 1;\n+                                            $List = '';\n+                                            $ListValue = '';\n+                                            $boxList = [];\n+                                            $boxListValue = [];\n+\n+                                            $status = '';\n+                                            $lastStatus = '';\n+                                            if(($booking->boxStatuses != null)) {\n+                                                $status = collect($booking->boxStatuses)->last();\n+                                                $expectedDate = $status->expected_date;\n+                                                $comment = $status->comment;\n+                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n+                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n+                                                if($lastStatus == 'Pending') {\n+                                                    $style= \"background-color:#ec1616e6;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else if ($lastStatus == 'Shipment on hold') {\n+                                                    $style= \"background-color:#ffdb00;\";\n+                                                    $disabled = \"disabled='disabled'\";\n+                                                    $newClass =\"k-state-disabled\";\n+                                                } else {\n+                                                    $style= \"background-color:none;\";\n+                                                    $disabled = \"\";\n+                                                    $newClass = \"k-checkbox\";\n+                                                }\n+                                            }\n+\n+                                            ?>\n+                                            <tr style=\"{{ $style }}\">\n+                                                <td style=\"text-align:center\" ><input {{$disabled}} type=\"checkbox\" name=\"shipBookId[]\" class=\"shipmentIds {{$newClass}} shipmet_check\" value=\"{{$booking->shipment->id}}\" shipId=\"{{$booking->shipment_id}}\" boxId=\"{{$booking->id}}\"></td>\n+                                                <td style=\"text-align:center\" class=\"detailedBoxView\" value=\"{{$booking->id}}\" dateVal=\"{{date('Y-m-d')}}\" expectedDate=\"{{$expectedDate}}\" comment=\"{{$comment}}\">{{ $booking->shipment->booking_number}}</td>\n+                                                <td style=\"text-align:center\">{{$booking->shipment->receiver->address->state->name}}</td>\n+                                                <td style=\"text-align:center\">{{$ships->shipment_id}}</td>\n+                                                <td>{{$booking->shipment->shipMethType?$booking->shipment->shipMethType->name:''}}</td>\n+                                                <td style=\"text-align:center\">1</td>\n+                                                <td style=\"text-align:center\" class=\"boxName\" boxId=\"{{$booking->id}}\" ids=\"{{$ListValue}}\">{{ $booking->box_name }}</td>\n+                                                <td style=\"text-align:center\">{{ number_format($booking->weight,2) }}</td>\n+                                                {{-- <td style=\"text-align:center\">{{ number_format(floatval($booking->total_value) + floatval($booking->box_packing_charge),2)}}</td> --}}\n+                                                <td style=\"text-align:center\">{{$booking->packages->pluck('subtotal')->sum()}}</td>\n+\n+\n+                                                <td style=\"text-align:center\">{{$lastStatus}}</td>\n+                                                <td style=\"text-align:center\">{{ !empty($booking->created_at) ? date('d-m-Y', strtotime($booking->created_at)) : '' }}</td>\n+                                                <td>\n+                                                    <a href=\"#\" title=\"View\"\n+                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n+                                                        <i class=\"fas fa-eye\"></i>\n+                                                    </a>\n+                                                    <a href=\"/branch/shipment/single_print/{{$booking->id}}\" title=\"Print\" target=\"_blank\"\n+                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n+                                                        <i class=\"fas fa-print\"></i>\n+                                                    </a>\n+                                                        <a href=\"{{route('branch.ships.undoaddbooking',$booking->id)}}\" title=\"Remove\"\n+                                                        class=\"btn btn-icon waves-effect waves-light btn-dark icons\">\n+                                                            <i class=\"fas fa-undo\"></i>\n+                                                        </a>\n+                                                </td>\n+                                            </tr>\n+                                        <?php\n+                                        }\n+                                        ?>\n+                                            <tr>\n+                                                <td  colspan=\"5\"> </td><td style=\"text-align:center\">{{ $totalPieces}}</td>\n+                                                <td  colspan=\"1\"> </td><td style=\"text-align:center\">{{ number_format($tot_weight_exist,2)}}</td>\n+                                                <td style=\"text-align:center\" >{{ number_format($tot_value_exist,2) }}</td>\n+                                                <td colspan=\"3\"  >\n+                                                    <div class=\"row\"><div class=\"col-6\">Average : {{$tot_weight_exist?number_format($tot_value_exist * $ships->exchange_rate/$tot_weight_exist,3):'0'}}  </div> <div class=\"col-6\">Duty : {{$tot_weight_exist?number_format($tot_value_exist*$ships->exchange_rate/$tot_weight_exist*77.28/100,3):'0'}}</div></div>\n+\n+                                                </td>\n+                                            </tr>\n+\n+\n+\n+                                            <!-- <tr id=\"bookingData\">\n+                                                <td>4545454</td>\n+                                                <td>Shipment 112</td>\n+                                                <td>3</td>\n+                                                <td>10</td>\n+                                                <td>25</td>\n+                                                <td>Shipment Forwarded</td>\n+                                                <td>\n+                                                @can(permission_edit())\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n+                                                            <i class=\"fas fa-pencil-alt\"></i>\n+                                                        </a>\n+                                                    @endcan\n+                                                    @can(permission_view())\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n+                                                            <i class=\"fas fa-eye\"></i>\n+                                                        </a>\n+                                                    @endcan\n+                                                    @can('shipment-print')\n+                                                    <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n+                                                            <i class=\"fas fa-eye\"></i>\n+                                                        </a>\n+\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n+                                                            <i class=\"fas fa-print\"></i>\n+                                                        </a>\n+\n+                                                        <a href=\"#\"\n+                                                           class=\"btn btn-icon waves-effect waves-light btn-dark\">\n+                                                            <i class=\"fas fa-undo\"></i>\n+                                                        </a>\n+                                                    @endcan\n+\n+                                                </td>\n+                                            </tr> -->\n+\n+\n+                                        </tbody>\n+                                    </table>\n+                                </div>\n+\n+                            </div>\n+                        </div>\n+                        <div class=\"col-md-12 text-left \">\n+\n+                            <div class=\"floatLeft\" >\n+                                <select name=\"\" id=\"shipmentTypeSelect\" class=\"p-2 pb-0\">\n+                                    <option value=\"\">All</option>\n+                                    @foreach ($ship_types as $ship_types_data )\n+                                        <option value=\"{{$ship_types_data->id}}\">{{$ship_types_data->name}}</option>\n+                                    @endforeach\n+                                </select>\n+                            </div>\n+                        </div>\n+                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n+                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead style=\"font-size:14px;\">\n+                            <tr >\n+                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n+                                    <th>Collection Date <br> Collection Office</th>\n+                                    <th>ship metho</th>\n+                                    <th>Collection Staff<br> Collection Agent</th>\n+                                    <th>Customer<br>Sender/Receiver</th>\n+                                    <th>State/Emirates<br>Country</th>\n+                                    <th>Cargo No<br>Type</th>\n+                                    <th>Cargo Box<br>No</th>\n+                                    <th>Total<br>Weight</th>\n+                                    <th>Total<br>Amount</th>\n+                                    <th>Total<br>Value</th>\n+                                </tr>\n+                            </thead>\n+                            <tbody>\n+                                @foreach($boxes as $key=> $boxes)\n+                                    <?php\n+\n+                                        if(!empty($boxes->shipment->statusVal->name)){\n+                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n+                                                $showAddItems = true;\n+                                                $style =\"style=background-color:yellow;padding:5px;\";\n+                                            } else {\n+                                                $style =\"style=background-color:none\";\n+                                                $showAddItems = false;\n+\n+                                            }\n+                                        }\n+                                        $type = \"\";\n+                                        if(!empty($boxes->shipment->delivery_type)){\n+                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n+                                                $type = \"Door To Door\";\n+                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n+                                                $type =\"Door To Port\";\n+                                            }\n+                                            else {\n+                                                $type =\"\";\n+                                            }\n+                                        }\n+                                        if($boxes->is_select == 1) {\n+                                            $total_count += 1;\n+                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n+                                            $tot_sel_weight += $boxes->weight;\n+                                            $boxList[] = $boxes->id;\n+\n+                                        }\n+                                    ?>\n+                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n+                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n+                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n+                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n+                                        </td>\n+                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n+\n+                                        <td> @if($boxes->shipment->collected_by == 'driver')\n+                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n+                                                @else\n+                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n+                                                @endif\n+                                        </td>\n+                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n+                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n+                                        <td>{{ $boxes->box_name??\"\"}}</td>\n+                                        <td>{{ $boxes->weight??\"\"}}</td>\n+                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n+                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n+\n+                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n+                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n+\n+                                    </tr>\n+                                @endforeach\n+                                <?php\n+\n+                                $List = implode(', ', $boxList);\n+                                ?>\n+                            </tbody>\n+                        </table>\n+                        <div class=\"row m-t-50\">\n+                            <div class=\"col-md-12\">\n+                                <div class=\"\">\n+                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                        @csrf\n+                                        <div class=\"col-md-12\">\n+                                            <div class=\"row\">\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Selected Boxes</label>\n+                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Weight</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <div class=\"col-md-3\">\n+                                                    <div class=\"form-group\">\n+                                                        <label>Total Amount</label>\n+                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n+                                                    </div>\n+                                                </div>\n+                                                <script>\n+                                                    document.querySelector('form').addEventListener('submit', function(event) {\n+                                                        event.preventDefault();  // Prevent the form from submitting normally\n+                                                \n+                                                        // Get all the checkboxes in the table\n+                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n+                                                        let isChecked = false;\n+                                                \n+                                                        // Loop through the checkboxes and check if any is checked\n+                                                        checkboxes.forEach(function(checkbox) {\n+                                                            if (checkbox.checked) {\n+                                                                isChecked = true;\n+                                                            }\n+                                                        });\n+                                                \n+                                                        // If no checkbox is selected, show a custom alert and prevent submission\n+                                                        if (!isChecked) {\n+                                                            // Create custom alert message\n+                                                            const customAlert = document.createElement('div');\n+                                                            customAlert.style.position = 'fixed';\n+                                                            customAlert.style.top = '50%';\n+                                                            customAlert.style.left = '50%';\n+                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n+                                                            customAlert.style.backgroundColor = '#f44336';\n+                                                            customAlert.style.color = 'white';\n+                                                            customAlert.style.padding = '20px';\n+                                                            customAlert.style.borderRadius = '5px';\n+                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+                                                            customAlert.style.fontSize = '16px';\n+                                                            customAlert.style.zIndex = '1000';\n+                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n+                                                \n+                                                            // Append the custom alert to the body\n+                                                            document.body.appendChild(customAlert);\n+                                                \n+                                                            // Remove the custom alert after 3 seconds\n+                                                            setTimeout(functio\n+                                                \n+\n+                                                \n+                                                <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n+                                                    @csrf\n+                                                    <!-- form contents -->\n+                                                \n+                                                    <div class=\"col-md-2\" style=\"margin:30px;\">\n+                                                        <div class=\"form-group\">\n+                                                            <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n+                                                            <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n+                                                            <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n+                                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n+                                                        </div>\n+                                                    </div>\n+                                                </form>\n+                                                \n+                                            </div>\n+                                        </div>\n+                                    </form>\n+                                    \n+\n+                                </div>\n+                            </div>\n+                        </div>\n+                    </div>\n+                </div>\n+            </div>\n+            <!-- end container-fluid -->\n+\n+        </div>\n+        <!-- end content -->\n+<div id=\"statusModal\" class=\"modal fade\" role=\"dialog\">\n+  <div class=\"modal-dialog\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+                <div class=\"col-md-12\">\n+                <input type=\"hidden\" value=\"\" class=\"selectedShipIds\" name=\"shipIds\" />\n+                <input type=\"hidden\" value=\"\" class=\"selectedShipmentId\" name=\"shipmentIds\" />\n+                <input type=\"hidden\" value=\"\" class=\"selectedBoxId\" name=\"boxIds\" />\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                                <label>Change Shipment Status</label>\n+                                <select name=\"status_id\" class=\"form-control\" id=\"status_id\">\n+                                    @foreach (status_list_admin() as $item)\n+                                        <option\n+                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n+                                    @endforeach\n+                                </select>\n+                                @error('status_id')\n+                                <span class=\"text-danger\">{{ $message }}</span>\n+                                @enderror\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Comment</label>\n+                            <textarea name=\"comment\" id=\"status_comment\" cols=\"30\" rows=\"0\" class=\"form-control\"></textarea>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Date</label>\n+                                    <input type=\"date\" value=\"{{ date('Y-m-d') }}\" max=\"\"\n+                                        class=\"form-control\" id=\"created_date\" name=\"created_date\"\n+                                        placeholder=\"Enter title\">\n+                            </div>\n+                        </div>\n+                    </div>\n+                    \n+                     <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                            <label>Expected Date</label>\n+                                    <input type=\"date\" value=\"\" max=\"\"\n+                                        class=\"form-control\" id=\"expected_date\" name=\"expected_date\"\n+                                        placeholder=\"Enter title\">\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-4\">\n+                        <div class=\"form-group\">\n+                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light updateStatus\">Update\n+                                </button>\n+                                </div>\n+\n+                        </div>\n+                    </div>\n+                </div>\n+        </div>\n+      <div class=\"modal-footer\">\n+        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+      </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+<div id=\"statusModalSucess\" class=\"modal fade\" role=\"dialog\">\n+  <div class=\"modal-dialog\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+\n+                    <div class=\"row\">\n+                        <div class=\"col-md-12\">\n+                            <div class=\"form-group\">\n+                                <div class=\"successMsg\">Status Updated Successfully</div>\n+                            </div>\n+                        </div>\n+                    </div>\n+\n+                </div>\n+            </form>\n+        </div>\n+      <div class=\"modal-footer\">\n+        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+      </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+<div id=\"currentStatusModal\" class=\"modal fade bd-example-modal-lg\" role=\"dialog\">\n+  <div class=\"modal-dialog modal-lg\">\n+\n+    <!-- Modal content-->\n+    <div class=\"modal-content\">\n+        <div class=\"modal-header\">\n+          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n+          <h4 class=\"modal-title\"></h4>\n+        </div>\n+        <div class=\"modal-body\">\n+            <form action=\"{{route('branch.ships.boxStatusUpdatetoship')}}\" method=\"post\">\n+                @csrf\n+                <div class=\"col-md-12\">\n+                    <div class=\"row\">\n+                        <table id=\"shipsTable1\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n+                            <thead>\n+                            <tr>\n+                                <th>Box Name</th>\n+                                <th>Current Status</th>\n+                                <th>Dated on</th>\n+                                <th>Update Status</th>\n+                                <th>Update Status Date</th>\n+                                <th>Expected Date</th>\n+                                <th>Comment</th>\n+                            </tr>\n+                            </thead>\n+                            <tbody class=\"fetchData\" status=\"{{status_list_admin() }}\">\n+\n+                            </tbody>\n+                        </table>\n+                    </div>\n+                </div>\n+\n+                <div class=\"form-group\">\n+                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n+                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n+                        </button>\n+                </div>\n+            </form>\n+        </div>\n+        <div class=\"modal-footer\">\n+            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n+        </div>\n+    </div>\n+\n+  </div>\n+</div>\n+\n+@endsection\n+@section('styles')\n+    @include('layouts.datatables_style')\n+    <style>\n+        .floatRight {float:right;}\n+        .m-l-10 {margin-left:10px!important;}\n+        .detailedBoxView {color:#661ec2;}\n+        .modal-lg {max-width:1000px !important;}\n+        .successMsg {font-size:18px; color:green;}\n+        .fontRed {color:red;}\n+        .icons {padding: 5px; font-size: x-small;}\n+        #shipsTable {font-size:14px !important;}\n+        .detailHead {\n+            border: 1px solid #d6d6d6;\n+            margin: 25px 80px;\n+            background-color: #d6d6d6;\n+        }\n+        #bookingList {font-size:14px !important;}\n+        #bookingList thead{font-size:14px !important;}\n+        #bookingList_length {display:none;}\n+        .m-t-50 {margin-top:50px;}\n+    </style>\n+@endsection\n+\n+@section('scripts')\n+<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\n+    @include('layouts.datatables_js')\n+\n+    <script>\n+        $(document).ready(function() {\n+\n+            $('.shipmet_check').change(function(){\n+                if($(this).is(':checked')){\n+                    $('#printallButton').prop('disabled', false);\n+                } else {\n+                    $('#printallButton').prop('disabled', true);\n+                }\n+            });\n+\n+            $('#allcb').change(function(){\n+                if($(this).is(':checked')){\n+                    console.log('hhhhhhhhhhhhhhhhhhhhhhhhhh');\n+                    $('#printallButton').prop('disabled', false);\n+                } else {\n+                    $('#printallButton').prop('disabled', true);\n+                }\n+            });\n+\n+\n+            $('#bookingList_checkbox').click(function() {\n+                $('.bookingSelection').prop('checked', $(this).prop('checked')).change();\n+                window.location.reload();\n+\n+            });\n+\n+\n+\n+\n+            $(document).ready(function() {\n+                // Check if any .bookingSelection checkboxes are checked on page load\n+                if ($('.bookingSelection:checked').length > 0) {\n+                    $('#bookingList_checkbox').prop('checked', true);\n+                } else {\n+                    $('#bookingList_checkbox').prop('checked', false);\n+                }\n+\n+                // Handle changes in .bookingSelection checkboxes\n+                $('.bookingSelection').change(function() {\n+                    if ($('.bookingSelection:checked').length > 0) {\n+                        $('#bookingList_checkbox').prop('checked', true);\n+                    } else {\n+                        $('#bookingList_checkbox').prop('checked', false);\n+                    }\n+                });\n+\n+\n+                $('#bookingList_checkbox').change(function() {\n+                    if (!$(this).prop('checked')) {\n+                        window.location.reload();\n+                    }\n+                });\n+\n+\n+            });\n+\n+\n+            $('#shipmentTypeSelect').change(function() {\n+                var selectedType = $(this).val();\n+                $('#bookingList tbody tr').hide().find('input.bookingSelection').removeClass('bookingSelection'); // Hide all rows and remove class from all td elements\n+                if (selectedType === \"\") { // Show all if \"All\" is selected\n+                    $('#bookingList tbody tr').show().find('input#bookingSelection').addClass('bookingSelection');\n+                } else if (selectedType) {\n+                    $('#bookingList tbody tr[data-shipment-type-id=\"' + selectedType + '\"]').show().find('input#bookingSelection').addClass('bookingSelection');\n+                }\n+            });\n+\n+        });\n+\n+    $(document).ready(function () {\n+        $('#bookingList').DataTable( {\n+            \"autoWidth\": false,\n+            \"scrollX\": true,\n+            \"aaSorting\": [ [0,'desc'] ],\n+            \"bSort\": false,\n+            \"responsive\": false\n+        });\n+\n+    });\n+\n+        $(function () {\n+            // validation needs name of the element\n+            // initialize after multiselect\n+\n+            $(document).ready(function () {\n+                $('.select2').select2();\n+                if (window.location.href.indexOf('reload')==-1) {\n+                    window.location.replace(window.location.href+'?reload');\n+                }\n+\n+            });\n+\n+\n+\n+            var $checkboxes = $('.checkbox-item');\n+            $('#allcb').click(function (e) {\n+                    var checkboxesLength = $checkboxes.length;\n+                    var checkedCheckboxesLength = $checkboxes.filter(':checked').length;\n+                    if(checkboxesLength == checkedCheckboxesLength) {\n+                        $('#allcb').prop('checked', true);\n+                    }else{\n+                        $('#allcb').prop('checked', false);\n+                    }\n+\n+                    // $('#allcb').click(function (e) {\n+                    if( $(\"#allcb\").prop('checked') == true) {\n+                        $.each($('td:not(.k-state-disabled) .k-checkbox'), function () {\n+                            $(this).prop(\"checked\", true)\n+                        });\n+                    }\n+                    else {\n+                        $('.k-checkbox').prop('checked', false);\n+                    }\n+                    // $(this).closest('table').find('td input:checkbox').prop('checked', this.checked);\n+                // });\n+            });\n+\n+            $(document).on('click', \".detailedBoxView\", function() {\n+                var boxId = $(this).attr('value');\n+                var dateVal = $(this).attr('dateVal');\n+                var boxName = $(this).closest('tr').find('.boxName').text();\n+                var expectedDate = $(this).attr('expecteddate');\n+                var comment = $(this).attr('comment');\n+                $(\"#currentStatusModal\").modal('show');\n+                var d = new Date();\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: `{{ route('branch.ship.list.getBoxDetails') }}`,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"boxId\":boxId, \"boxName\":boxName }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            var html = [];\n+                            $('.fetchData').html('');\n+                            // $.each(result, function (key, value) {\n+                                var selectOptionhtml = '';\n+                                var dt = new Date();\n+                                var newDate = '<input type=\"date\" name=\"statusDate[]\" class=\"form-control\" value=\"'+dateVal+'\">';\n+                                var expectedDateInput = '<input type=\"date\" name=\"expected_date[]\" class=\"form-control\" value=\"'+expectedDate+'\" >';\n+                                var commentInput  = '<input type=\"text\" name=\"comment[]\" class=\"form-control\" value=\"'+comment+'\" >';\n+                                var statusCount = result.box_statuses.length;\n+                                var lastNum = statusCount - 1;\n+                                var selectOption = JSON.parse($(\".fetchData\").attr(\"status\"));\n+                                selectOptionhtml += \"<select class='form-control class-form' name='status[]'><option value='0'>Select</option>\";\n+                                for (var i = 0; i < selectOption.length; i++) {\n+                                    // Check if the id matches\n+                                    var selected = selectOption[i].id === result.box_statuses[lastNum].status.id ? ' selected' : '';\n+\n+                                    // Append the option with the selected attribute if applicable\n+                                    selectOptionhtml += \"<option value='\" + selectOption[i].id + \"'\" + selected + \">\" + selectOption[i].name + \"</option>\";\n+                                }\n+                                selectOptionhtml += \"</select>\";\n+                                html += '<tr>'+\n+                                        '<td>'+result.box_name+'<input type=\"hidden\" name=\"boxIds[]\" value=\"'+result.id+'\"></td>';\n+                                        if(statusCount > 0) {\n+                                            html +=   '<td>'+result.box_statuses[lastNum].status.name+'</td>';\n+                                            html +=   '<td>'+result.dated+'</td>';\n+\n+                                            html +=   '<td>'+selectOptionhtml+'</td>';\n+                                            html +=   '<td>'+newDate+'</td>';\n+                                            html +=  '<td>'+expectedDateInput+'</td>';\n+                                            html +=  '<td>'+commentInput +'</td>';\n+                                        } else {\n+                                            html +=  '<td>--</td>';\n+                                            html +=  '<td>--</td>';\n+\n+                                            html +=  '<td>'+selectOptionhtml+'</td>';\n+                                            html +=  '<td>'+newDate+'</td>';\n+                                            html +=  '<td>'+expectedDateInput+'</td>';\n+                                            html +=  '<td>'+commentInput +'</td>';\n+                                        }\n+\n+                                        html += '</tr>';\n+                            // });\n+                            $('.fetchData').html(html);\n+                            $('.select2').select2();\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                }); // ajax call closing\n+            });\n+\n+            $(document).on('click',\"#changeStatus\", function() {\n+                var checked = $(\".shipmentIds\").is(\":checked\");\n+                if(checked == true) {\n+                    var boxesName = $(this).attr('boxesName');\n+                    var boxesVal = $(this).attr('boxesVal');\n+                    var shipmentId = $(\".shipmentIds\").attr('value');\n+                    $(\"#statusModal\").modal('show');\n+                }\n+            });\n+\n+            $(document).on('click', '.updateStatus', function(){\n+                var url = \"{{route('branch.ships.multiUpdatebookingtoship')}}\";\n+                var selectedShipIds = $(\".selectedShipIds\").val();\n+                var selectedShipmentId = $(\".selectedShipmentId\").val();\n+                var selectedBoxId = $(\".selectedBoxId\").val();\n+                var status_id = $(\"#status_id\").val();\n+                var status_comment = $(\"#status_comment\").val();\n+                var created_date = $(\"#created_date\").val();\n+                var expected_date = $(\"#expected_date\").val();\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: url,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"shipIds\":selectedShipIds,\"selectedBoxId\":selectedBoxId, \"shipmentIds\":selectedShipmentId, \"status_id\":status_id, \"created_date\":created_date, 'comment':status_comment, \"expected_date\":expected_date, }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            if(result.success == 'Status Updated Successfully') {\n+                                $(\"#statusModalSucess\").modal('show');\n+                            }\n+                            location.reload();\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                }); // ajax call closing\n+            });\n+\n+\n+            $(document).on('click', \".shipmentIds\", function() {\n+                var val = [];\n+                var valshipId = [];\n+                var boxesVal = [];\n+                var boxesName = [];\n+                $(':checkbox:checked').each(function(i){\n+                    val[i] = $(this).val();\n+                    valshipId[i] = $(this).attr('shipId');\n+                    boxesName[i] = $(this).closest('tr').find('.boxName').text();\n+                    boxesVal[i] = $(this).closest('tr').find('.boxName').attr('boxId');\n+                });\n+                $(\".hidShipIds\").val(val);\n+                $(\".hidBoxIds\").val(boxesVal);\n+                $(\".selectedBoxId\").val(boxesVal);\n+                $(\".selectedShipmentId\").val(val);\n+                $(\"#changeStatus\").attr('shipId',valshipId);\n+                $(\"#changeStatus\").attr('shipmentId',val);\n+                $(\"#changeStatus\").attr('boxesVal',boxesVal);\n+                $(\"#changeStatus\").attr('boxesName',boxesName);\n+            });\n+            var arr = [];\n+            var alreadyExist = [];\n+            var removeItem = [];\n+\n+            $(\"input:checkbox.bookingSelection\").change(function() {\n+\n+            });\n+\n+\n+            $(document).on('change',\".bookingSelection\", function() {\n+\n+                var ischecked= $(this).is(':checked');\n+                if(ischecked){\n+                // alert('checkd ' + $(this).val());\n+                arr.push($(this).val());\n+                $(\"#selected_box_id\").val(arr);\n+                }\n+                else {\n+                // alert('uncheckd ' + $(this).val());\n+                removeItem.push($(this).val());\n+                $(\"#hidSelectList\").val(removeItem);\n+                }\n+                var checked = $(this).is(\":checked\");\n+                var total_selected_boxes = $(\"#total_selected_boxes\").val();\n+                var total_weight = $(\"#total_weight\").val();\n+                var total_value = $(\"#total_value\").val();\n+                var boxesVal = $(this).attr('boxVal');\n+                var boxWt = $(this).attr('boxWt');\n+                var selectedBoxId = $(this).attr('selectBoxId');\n+                // $.each($(\":checkbox:checked\"), function(){\n+                //     arr.push($(this).val());\n+                // });\n+                $(\"#selected_box_id\").val(arr);\n+\n+                if(checked == true) {\n+                    var newBoxes = parseFloat(total_selected_boxes) + parseFloat(1);\n+                    var newWeight = parseFloat(total_weight) + parseFloat(boxWt);\n+                    var newValue = parseFloat(total_value) + parseFloat(boxesVal);\n+\n+                } else {\n+                    var newBoxes = parseFloat(total_selected_boxes) - parseFloat(1);\n+                    var newWeight = parseFloat(total_weight) - parseFloat(boxWt);\n+                    var newValue = parseFloat(total_value) - parseFloat(boxesVal);\n+                }\n+                $(\"#total_selected_boxes\").val(newBoxes);\n+                $(\"#total_weight\").val(newWeight);\n+                $(\"#total_value\").val(newValue);\n+                var selectedBoxes = $(\"#selected_box_id\").val();\n+                var hidSelectList = $(\"#hidSelectList\").val();\n+                var url = \"{{route('branch.ships.multiSelectionUpdate')}}\";\n+                $.ajax({\n+                        headers: {\n+                            \"content-type\" : \"application/json\",\n+                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n+                            },\n+                        url: url,\n+                        type: \"POST\",\n+                        async:false,\n+                        data: JSON.stringify({\"selectedBoxes\":selectedBoxes, \"hidSelectList\":hidSelectList, \"shipId\":\"1\" }),\n+                        cache: false,\n+                        contentType: false,\n+                        processData: false,\n+                        success: function (result) {\n+                            console.log(result);\n+                            var html = [];\n+                            html = result.boxes\n+                            $(\"#selected_box_id\").val(html);\n+                        },\n+                        error: function (err) {\n+                            console.log(err);\n+                        }\n+                });\n+                alreadyExist = [];\n+                arr = [];\n+            });\n+\n+        });\n+\n+</script>\n+\n+@endsection\n"
                },
                {
                    "date": 1733207429104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -576,1230 +576,87 @@\n                                                         <label>Total Amount</label>\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n-                                                <script>\n-                                                    document.querySelector('form').addEventListener('submit', function(event) {\n-                                                        event.preventDefault();  // Prevent the form from submitting normally\n-                                                \n-                                                        // Get all the checkboxes in the table\n-                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n-                                                        let isChecked = false;\n-                                                \n-                                                        // Loop through the checkboxes and check if any is checked\n-                                                        checkboxes.forEach(function(checkbox) {\n-                                                            if (checkbox.checked) {\n-                                                                isChecked = true;\n-                                                            }\n-                                                        });\n-                                                \n-                                                        // If no checkbox is selected, show a custom alert and prevent submission\n-                                                        if (!isChecked) {\n-                                                            // Create custom alert message\n-                                                            const customAlert = document.createElement('div');\n-                                                            customAlert.style.position = 'fixed';\n-                                                            customAlert.style.top = '50%';\n-                                                            customAlert.style.left = '50%';\n-                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n-                                                            customAlert.style.backgroundColor = '#f44336';\n-                                                            customAlert.style.color = 'white';\n-                                                            customAlert.style.padding = '20px';\n-                                                            customAlert.style.borderRadius = '5px';\n-                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-                                                            customAlert.style.fontSize = '16px';\n-                                                            customAlert.style.zIndex = '1000';\n-                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n-                                                \n-                                                            // Append the custom alert to the body\n-                                                            document.body.appendChild(customAlert);\n-                                                \n-                                                            // Remove the custom alert after 3 seconds\n-                                                            setTimeout(functio\n-                                                \n \n-                                                \n-                                                <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-                                                    @csrf\n-                                                    <!-- form contents -->\n-                                                \n-                                                    <div class=\"col-md-2\" style=\"margin:30px;\">\n-                                                        <div class=\"form-group\">\n-                                                            <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n-                                                            <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n-                                                            <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n-                                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n-                                                        </div>\n-                                                    </div>\n-                                                </form>\n-                                                \n-                                            </div>\n-                                        </div>\n-                                    </form>\n-                                    \n \n-                                </div>\n-                            </div>\n-                        </div>\n-                    </div>\n-                </div>\n-            </div>\n-            <!-- end container-fluid -->\n+                                               <script>\n+    document.querySelector('form').addEventListener('submit', function(event) {\n+        event.preventDefault();  // Prevent the form from submitting normally\n \n-        </div>\n-        <!-- end content -->\n-<div id=\"statusModal\" class=\"modal fade\" role=\"dialog\">\n-  <div class=\"modal-dialog\">\n+        // Get all the checkboxes in the table\n+        const checkboxes = document.querySelectorAll('.bookingSelection');\n+        let isChecked = false;\n \n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-                <div class=\"col-md-12\">\n-                <input type=\"hidden\" value=\"\" class=\"selectedShipIds\" name=\"shipIds\" />\n-                <input type=\"hidden\" value=\"\" class=\"selectedShipmentId\" name=\"shipmentIds\" />\n-                <input type=\"hidden\" value=\"\" class=\"selectedBoxId\" name=\"boxIds\" />\n+        // Loop through the checkboxes and check if any is checked\n+        checkboxes.forEach(function(checkbox) {\n+            if (checkbox.checked) {\n+                isChecked = true;\n+            }\n+        });\n \n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                                <label>Change Shipment Status</label>\n-                                <select name=\"status_id\" class=\"form-control\" id=\"status_id\">\n-                                    @foreach (status_list_admin() as $item)\n-                                        <option\n-                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                    @endforeach\n-                                </select>\n-                                @error('status_id')\n-                                <span class=\"text-danger\">{{ $message }}</span>\n-                                @enderror\n-                            </div>\n-                        </div>\n-                    </div>\n+        // If no checkbox is selected, show a custom alert and prevent submission\n+        if (!isChecked) {\n+            // Create custom alert message\n+            const customAlert = document.createElement('div');\n+            customAlert.style.position = 'fixed';\n+            customAlert.style.top = '50%';\n+            customAlert.style.left = '50%';\n+            customAlert.style.transform = 'translate(-50%, -50%)';\n+            customAlert.style.backgroundColor = '#f44336';\n+            customAlert.style.color = 'white';\n+            customAlert.style.padding = '20px';\n+            customAlert.style.borderRadius = '5px';\n+            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n+            customAlert.style.fontSize = '16px';\n+            customAlert.style.zIndex = '1000';\n+            customAlert.textContent = \"Please select at least one booking before submitting.\";\n \n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Comment</label>\n-                            <textarea name=\"comment\" id=\"status_comment\" cols=\"30\" rows=\"0\" class=\"form-control\"></textarea>\n-                            </div>\n-                        </div>\n-                    </div>\n+            // Append the custom alert to the body\n+            document.body.appendChild(customAlert);\n \n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Date</label>\n-                                    <input type=\"date\" value=\"{{ date('Y-m-d') }}\" max=\"\"\n-                                        class=\"form-control\" id=\"created_date\" name=\"created_date\"\n-                                        placeholder=\"Enter title\">\n-                            </div>\n-                        </div>\n-                    </div>\n-                    \n-                     <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                            <label>Expected Date</label>\n-                                    <input type=\"date\" value=\"\" max=\"\"\n-                                        class=\"form-control\" id=\"expected_date\" name=\"expected_date\"\n-                                        placeholder=\"Enter title\">\n-                            </div>\n-                        </div>\n-                    </div>\n+            // Remove the custom alert after 3 seconds\n+            setTimeout(function() {\n+                customAlert.remove();\n+            }, 3000);\n \n-                    <div class=\"row\">\n-                        <div class=\"col-md-4\">\n-                        <div class=\"form-group\">\n-                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light updateStatus\">Update\n-                                </button>\n-                                </div>\n-\n-                        </div>\n-                    </div>\n-                </div>\n-        </div>\n-      <div class=\"modal-footer\">\n-        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-      </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-<div id=\"statusModalSucess\" class=\"modal fade\" role=\"dialog\">\n-  <div class=\"modal-dialog\">\n-\n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-\n-                    <div class=\"row\">\n-                        <div class=\"col-md-12\">\n-                            <div class=\"form-group\">\n-                                <div class=\"successMsg\">Status Updated Successfully</div>\n-                            </div>\n-                        </div>\n-                    </div>\n-\n-                </div>\n-            </form>\n-        </div>\n-      <div class=\"modal-footer\">\n-        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-      </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-<div id=\"currentStatusModal\" class=\"modal fade bd-example-modal-lg\" role=\"dialog\">\n-  <div class=\"modal-dialog modal-lg\">\n-\n-    <!-- Modal content-->\n-    <div class=\"modal-content\">\n-        <div class=\"modal-header\">\n-          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n-          <h4 class=\"modal-title\"></h4>\n-        </div>\n-        <div class=\"modal-body\">\n-            <form action=\"{{route('branch.ships.boxStatusUpdatetoship')}}\" method=\"post\">\n-                @csrf\n-                <div class=\"col-md-12\">\n-                    <div class=\"row\">\n-                        <table id=\"shipsTable1\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                            <thead>\n-                            <tr>\n-                                <th>Box Name</th>\n-                                <th>Current Status</th>\n-                                <th>Dated on</th>\n-                                <th>Update Status</th>\n-                                <th>Update Status Date</th>\n-                                <th>Expected Date</th>\n-                                <th>Comment</th>\n-                            </tr>\n-                            </thead>\n-                            <tbody class=\"fetchData\" status=\"{{status_list_admin() }}\">\n-\n-                            </tbody>\n-                        </table>\n-                    </div>\n-                </div>\n-\n-                <div class=\"form-group\">\n-                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n-                        </button>\n-                </div>\n-            </form>\n-        </div>\n-        <div class=\"modal-footer\">\n-            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n-        </div>\n-    </div>\n-\n-  </div>\n-</div>\n-\n-@endsection\n-@section('styles')\n-    @include('layouts.datatables_style')\n-    <style>\n-        .floatRight {float:right;}\n-        .m-l-10 {margin-left:10px!important;}\n-        .detailedBoxView {color:#661ec2;}\n-        .modal-lg {max-width:1000px !important;}\n-        .successMsg {font-size:18px; color:green;}\n-        .fontRed {color:red;}\n-        .icons {padding: 5px; font-size: x-small;}\n-        #shipsTable {font-size:14px !important;}\n-        .detailHead {\n-            border: 1px solid #d6d6d6;\n-            margin: 25px 80px;\n-            background-color: #d6d6d6;\n+            return false;  // Prevent form submission if no checkbox is selected\n         }\n-        #bookingList {font-size:14px !important;}\n-        #bookingList thead{font-size:14px !important;}\n-        #bookingList_length {display:none;}\n-        .m-t-50 {margin-top:50px;}\n-    </style>\n-@endsection\n \n-@section('scripts')\n-<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\n-    @include('layouts.datatables_js')\n+        // If checkboxes are selected, prepare the data to be sent as JSON\n+        const formData = new FormData(event.target);  // Collect form data\n+        const dataObject = {};\n \n-    <script>\n-        $(document).ready(function() {\n-\n-            $('.shipmet_check').change(function(){\n-                if($(this).is(':checked')){\n-                    $('#printallButton').prop('disabled', false);\n-                } else {\n-                    $('#printallButton').prop('disabled', true);\n-                }\n-            });\n-\n-            $('#allcb').change(function(){\n-                if($(this).is(':checked')){\n-                    console.log('hhhhhhhhhhhhhhhhhhhhhhhhhh');\n-                    $('#printallButton').prop('disabled', false);\n-                } else {\n-                    $('#printallButton').prop('disabled', true);\n-                }\n-            });\n-\n-\n-            $('#bookingList_checkbox').click(function() {\n-                $('.bookingSelection').prop('checked', $(this).prop('checked')).change();\n-                window.location.reload();\n-\n-            });\n-\n-\n-\n-\n-            $(document).ready(function() {\n-                // Check if any .bookingSelection checkboxes are checked on page load\n-                if ($('.bookingSelection:checked').length > 0) {\n-                    $('#bookingList_checkbox').prop('checked', true);\n-                } else {\n-                    $('#bookingList_checkbox').prop('checked', false);\n-                }\n-\n-                // Handle changes in .bookingSelection checkboxes\n-                $('.bookingSelection').change(function() {\n-                    if ($('.bookingSelection:checked').length > 0) {\n-                        $('#bookingList_checkbox').prop('checked', true);\n-                    } else {\n-                        $('#bookingList_checkbox').prop('checked', false);\n-                    }\n-                });\n-\n-\n-                $('#bookingList_checkbox').change(function() {\n-                    if (!$(this).prop('checked')) {\n-                        window.location.reload();\n-                    }\n-                });\n-\n-\n-            });\n-\n-\n-            $('#shipmentTypeSelect').change(function() {\n-                var selectedType = $(this).val();\n-                $('#bookingList tbody tr').hide().find('input.bookingSelection').removeClass('bookingSelection'); // Hide all rows and remove class from all td elements\n-                if (selectedType === \"\") { // Show all if \"All\" is selected\n-                    $('#bookingList tbody tr').show().find('input#bookingSelection').addClass('bookingSelection');\n-                } else if (selectedType) {\n-                    $('#bookingList tbody tr[data-shipment-type-id=\"' + selectedType + '\"]').show().find('input#bookingSelection').addClass('bookingSelection');\n-                }\n-            });\n-\n+        // Convert FormData to a JSON object\n+        formData.forEach((value, key) => {\n+            dataObject[key] = value;\n         });\n \n-    $(document).ready(function () {\n-        $('#bookingList').DataTable( {\n-            \"autoWidth\": false,\n-            \"scrollX\": true,\n-            \"aaSorting\": [ [0,'desc'] ],\n-            \"bSort\": false,\n-            \"responsive\": false\n+        // Send the form data as JSON using Fetch API (AJAX)\n+        fetch('/your-json-endpoint', {\n+            method: 'POST',\n+            headers: {\n+                'Content-Type': 'application/json',\n+            },\n+            body: JSON.stringify(dataObject),\n+        })\n+        .then(response => response.json())\n+        .then(data => {\n+            // Handle the server response\n+            if (data.success) {\n+                alert('Booking added successfully!');\n+                // Optionally, handle the success, like redirecting or updating the page\n+            } else {\n+                alert('There was an error with the booking.');\n+            }\n+        })\n+        .catch(error => {\n+            alert('An error occurred while submitting the form.');\n         });\n-\n     });\n-\n-        $(function () {\n-            // validation needs name of the element\n-            // initialize after multiselect\n-\n-            $(document).ready(function () {\n-                $('.select2').select2();\n-                if (window.location.href.indexOf('reload')==-1) {\n-                    window.location.replace(window.location.href+'?reload');\n-                }\n-\n-            });\n-\n-\n-\n-            var $checkboxes = $('.checkbox-item');\n-            $('#allcb').click(function (e) {\n-                    var checkboxesLength = $checkboxes.length;\n-                    var checkedCheckboxesLength = $checkboxes.filter(':checked').length;\n-                    if(checkboxesLength == checkedCheckboxesLength) {\n-                        $('#allcb').prop('checked', true);\n-                    }else{\n-                        $('#allcb').prop('checked', false);\n-                    }\n-\n-                    // $('#allcb').click(function (e) {\n-                    if( $(\"#allcb\").prop('checked') == true) {\n-                        $.each($('td:not(.k-state-disabled) .k-checkbox'), function () {\n-                            $(this).prop(\"checked\", true)\n-                        });\n-                    }\n-                    else {\n-                        $('.k-checkbox').prop('checked', false);\n-                    }\n-                    // $(this).closest('table').find('td input:checkbox').prop('checked', this.checked);\n-                // });\n-            });\n-\n-            $(document).on('click', \".detailedBoxView\", function() {\n-                var boxId = $(this).attr('value');\n-                var dateVal = $(this).attr('dateVal');\n-                var boxName = $(this).closest('tr').find('.boxName').text();\n-                var expectedDate = $(this).attr('expecteddate');\n-                var comment = $(this).attr('comment');\n-                $(\"#currentStatusModal\").modal('show');\n-                var d = new Date();\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: `{{ route('branch.ship.list.getBoxDetails') }}`,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"boxId\":boxId, \"boxName\":boxName }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            var html = [];\n-                            $('.fetchData').html('');\n-                            // $.each(result, function (key, value) {\n-                                var selectOptionhtml = '';\n-                                var dt = new Date();\n-                                var newDate = '<input type=\"date\" name=\"statusDate[]\" class=\"form-control\" value=\"'+dateVal+'\">';\n-                                var expectedDateInput = '<input type=\"date\" name=\"expected_date[]\" class=\"form-control\" value=\"'+expectedDate+'\" >';\n-                                var commentInput  = '<input type=\"text\" name=\"comment[]\" class=\"form-control\" value=\"'+comment+'\" >';\n-                                var statusCount = result.box_statuses.length;\n-                                var lastNum = statusCount - 1;\n-                                var selectOption = JSON.parse($(\".fetchData\").attr(\"status\"));\n-                                selectOptionhtml += \"<select class='form-control class-form' name='status[]'><option value='0'>Select</option>\";\n-                                for (var i = 0; i < selectOption.length; i++) {\n-                                    // Check if the id matches\n-                                    var selected = selectOption[i].id === result.box_statuses[lastNum].status.id ? ' selected' : '';\n-\n-                                    // Append the option with the selected attribute if applicable\n-                                    selectOptionhtml += \"<option value='\" + selectOption[i].id + \"'\" + selected + \">\" + selectOption[i].name + \"</option>\";\n-                                }\n-                                selectOptionhtml += \"</select>\";\n-                                html += '<tr>'+\n-                                        '<td>'+result.box_name+'<input type=\"hidden\" name=\"boxIds[]\" value=\"'+result.id+'\"></td>';\n-                                        if(statusCount > 0) {\n-                                            html +=   '<td>'+result.box_statuses[lastNum].status.name+'</td>';\n-                                            html +=   '<td>'+result.dated+'</td>';\n-\n-                                            html +=   '<td>'+selectOptionhtml+'</td>';\n-                                            html +=   '<td>'+newDate+'</td>';\n-                                            html +=  '<td>'+expectedDateInput+'</td>';\n-                                            html +=  '<td>'+commentInput +'</td>';\n-                                        } else {\n-                                            html +=  '<td>--</td>';\n-                                            html +=  '<td>--</td>';\n-\n-                                            html +=  '<td>'+selectOptionhtml+'</td>';\n-                                            html +=  '<td>'+newDate+'</td>';\n-                                            html +=  '<td>'+expectedDateInput+'</td>';\n-                                            html +=  '<td>'+commentInput +'</td>';\n-                                        }\n-\n-                                        html += '</tr>';\n-                            // });\n-                            $('.fetchData').html(html);\n-                            $('.select2').select2();\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                }); // ajax call closing\n-            });\n-\n-            $(document).on('click',\"#changeStatus\", function() {\n-                var checked = $(\".shipmentIds\").is(\":checked\");\n-                if(checked == true) {\n-                    var boxesName = $(this).attr('boxesName');\n-                    var boxesVal = $(this).attr('boxesVal');\n-                    var shipmentId = $(\".shipmentIds\").attr('value');\n-                    $(\"#statusModal\").modal('show');\n-                }\n-            });\n-\n-            $(document).on('click', '.updateStatus', function(){\n-                var url = \"{{route('branch.ships.multiUpdatebookingtoship')}}\";\n-                var selectedShipIds = $(\".selectedShipIds\").val();\n-                var selectedShipmentId = $(\".selectedShipmentId\").val();\n-                var selectedBoxId = $(\".selectedBoxId\").val();\n-                var status_id = $(\"#status_id\").val();\n-                var status_comment = $(\"#status_comment\").val();\n-                var created_date = $(\"#created_date\").val();\n-                var expected_date = $(\"#expected_date\").val();\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: url,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"shipIds\":selectedShipIds,\"selectedBoxId\":selectedBoxId, \"shipmentIds\":selectedShipmentId, \"status_id\":status_id, \"created_date\":created_date, 'comment':status_comment, \"expected_date\":expected_date, }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            if(result.success == 'Status Updated Successfully') {\n-                                $(\"#statusModalSucess\").modal('show');\n-                            }\n-                            location.reload();\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                }); // ajax call closing\n-            });\n-\n-\n-            $(document).on('click', \".shipmentIds\", function() {\n-                var val = [];\n-                var valshipId = [];\n-                var boxesVal = [];\n-                var boxesName = [];\n-                $(':checkbox:checked').each(function(i){\n-                    val[i] = $(this).val();\n-                    valshipId[i] = $(this).attr('shipId');\n-                    boxesName[i] = $(this).closest('tr').find('.boxName').text();\n-                    boxesVal[i] = $(this).closest('tr').find('.boxName').attr('boxId');\n-                });\n-                $(\".hidShipIds\").val(val);\n-                $(\".hidBoxIds\").val(boxesVal);\n-                $(\".selectedBoxId\").val(boxesVal);\n-                $(\".selectedShipmentId\").val(val);\n-                $(\"#changeStatus\").attr('shipId',valshipId);\n-                $(\"#changeStatus\").attr('shipmentId',val);\n-                $(\"#changeStatus\").attr('boxesVal',boxesVal);\n-                $(\"#changeStatus\").attr('boxesName',boxesName);\n-            });\n-            var arr = [];\n-            var alreadyExist = [];\n-            var removeItem = [];\n-\n-            $(\"input:checkbox.bookingSelection\").change(function() {\n-\n-            });\n-\n-\n-            $(document).on('change',\".bookingSelection\", function() {\n-\n-                var ischecked= $(this).is(':checked');\n-                if(ischecked){\n-                // alert('checkd ' + $(this).val());\n-                arr.push($(this).val());\n-                $(\"#selected_box_id\").val(arr);\n-                }\n-                else {\n-                // alert('uncheckd ' + $(this).val());\n-                removeItem.push($(this).val());\n-                $(\"#hidSelectList\").val(removeItem);\n-                }\n-                var checked = $(this).is(\":checked\");\n-                var total_selected_boxes = $(\"#total_selected_boxes\").val();\n-                var total_weight = $(\"#total_weight\").val();\n-                var total_value = $(\"#total_value\").val();\n-                var boxesVal = $(this).attr('boxVal');\n-                var boxWt = $(this).attr('boxWt');\n-                var selectedBoxId = $(this).attr('selectBoxId');\n-                // $.each($(\":checkbox:checked\"), function(){\n-                //     arr.push($(this).val());\n-                // });\n-                $(\"#selected_box_id\").val(arr);\n-\n-                if(checked == true) {\n-                    var newBoxes = parseFloat(total_selected_boxes) + parseFloat(1);\n-                    var newWeight = parseFloat(total_weight) + parseFloat(boxWt);\n-                    var newValue = parseFloat(total_value) + parseFloat(boxesVal);\n-\n-                } else {\n-                    var newBoxes = parseFloat(total_selected_boxes) - parseFloat(1);\n-                    var newWeight = parseFloat(total_weight) - parseFloat(boxWt);\n-                    var newValue = parseFloat(total_value) - parseFloat(boxesVal);\n-                }\n-                $(\"#total_selected_boxes\").val(newBoxes);\n-                $(\"#total_weight\").val(newWeight);\n-                $(\"#total_value\").val(newValue);\n-                var selectedBoxes = $(\"#selected_box_id\").val();\n-                var hidSelectList = $(\"#hidSelectList\").val();\n-                var url = \"{{route('branch.ships.multiSelectionUpdate')}}\";\n-                $.ajax({\n-                        headers: {\n-                            \"content-type\" : \"application/json\",\n-                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n-                            },\n-                        url: url,\n-                        type: \"POST\",\n-                        async:false,\n-                        data: JSON.stringify({\"selectedBoxes\":selectedBoxes, \"hidSelectList\":hidSelectList, \"shipId\":\"1\" }),\n-                        cache: false,\n-                        contentType: false,\n-                        processData: false,\n-                        success: function (result) {\n-                            console.log(result);\n-                            var html = [];\n-                            html = result.boxes\n-                            $(\"#selected_box_id\").val(html);\n-                        },\n-                        error: function (err) {\n-                            console.log(err);\n-                        }\n-                });\n-                alreadyExist = [];\n-                arr = [];\n-            });\n-\n-        });\n-\n </script>\n \n-@endsection\n-@extends('layouts.app')\n-\n-@section('content')\n-\n-    <div class=\"content-page\" id=\"content-page\">\n-        <div class=\"content\">\n-\n-            <!-- Start Content-->\n-            <div class=\"container-fluid\">\n-\n-                <!-- start page title -->\n-                <div class=\"row\">\n-                    <div class=\"col-12\">\n-                        <div class=\"page-title-box\">\n-                            <div class=\"page-title-right\">\n-                                <ol class=\"breadcrumb m-0\">\n-                                    <li class=\"breadcrumb-item\"><a href=\"{{route('super-admin.dashboard') }}\">Home</a></li>\n-                                    <li class=\"breadcrumb-item\"><a href=\"{{route('branch.ship.create')}}\">Shipment List</a></li>\n-                                    <li class=\"breadcrumb-item active\">View Assigned</li>\n-\n-                                </ol>\n-                            </div>\n-                            <h4 class=\"page-title\">Assigned Shipments</h4>\n-\n-                        </div>\n-                    </div>\n-\n-                </div>\n-\n-                <?php\n-                    $selectedBoxId = [];\n-                    $res ='';\n-                    $total_count = 0;\n-                    $tot_sel_weight = 0;\n-                    $tot_sel_amt = 0;\n-                    $tot_weight = 0;\n-                    $tot_value = 0;\n-                    $tot_temp =0;\n-                    $tot_sel_temp =0;\n-                    $totalPieces =0;\n-\n-                    foreach( $ship_bookingsList as $booking) {\n-\n-                        $tot_temp= $booking->weight;\n-                        $tot_weight +=$tot_temp;\n-                        $tot_value += $booking->shipment->grand_total;\n-                        $totalPieces += 1;\n-                        // $totalPieces += $booking->shipment->number_of_pcs;\n-                        $List = '';\n-                        $ListValue = '';\n-                        $boxList = [];\n-                        $boxListValue = [];\n-\n-                        $status = '';\n-                        $lastStatus = '';\n-                        if(!empty($booking->shipment->bookingNumberStatus)) {\n-                            $status = collect($booking->shipment->bookingNumberStatus)->last();\n-\n-                            // $lastStatus = (!empty($status)) ? $status->status->name : $booking->ship->shipmentStatus->name ;\n-                        }\n-\n-                    }\n-                        ?>\n-                <!-- <div class=\"row\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card-box\">\n-                            <form action=\"{{route('branch.ships.createbookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-\n-                                @csrf\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-6\">\n-                                            <div class=\"form-group\">\n-                                                <label>Booking No</label>\n-                                                <select name=\"booking_ids[]\" id=\"booking_ids\" class=\"select2 form-control\"  multiple>\n-                                                    @foreach($bookings as $booking)\n-                                                    <option value=\"{{$booking->id}}\">{{$booking->booking_number}}</option>\n-                                                    @endforeach\n-                                                </select>\n-                                            </div>\n-                                        </div>\n-                                        <div class=\"col-md-6\">\n-                                            <div class=\"form-group\">\n-                                                <label>Shipment ID</label>\n-                                                <input type=\"text\" class=\"form-control\" name=\"shipment_id\" value=\"{{$ships->shipment_id}}\" />\n-                                            </div>\n-\n-\n-                                        </div>\n-                                    </div>\n-                                </div>\n-\n-\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                <label>AWB id</label>\n-                                                <input type=\"text\" class=\"form-control\" name=\"awd_id\" value=\"{{$ships->awd_id}}\" />\n-\n-                                            </div>\n-                                        </div>\n-\n-                                        <div class=\"col-md-3\">\n-                                            <div class=\"form-group\">\n-                                            <label>Date</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                    <label>Shipment Status</label>\n-                                                    <select name=\"status_id\" class=\"form-control\" id=\"\">\n-                                                        @foreach ( status_list_admin() as $item)\n-                                                            <option\n-                                                                {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                                        @endforeach\n-                                                    </select>\n-                                                    @error('status_id')\n-                                                    <span class=\"text-danger\">{{ $message }}</span>\n-                                                    @enderror\n-                                                </div>\n-                                        </div>\n-\n-\n-\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Estimated Delivery</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->estimated_delivery) ? date('Y-m-d', strtotime($ships->estimated_delivery)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"estimated_delivery\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-                                </div>\n-\n-                                <div class=\"text-center\">\n-                                    <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                    <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit\n-                                    </button>\n-                                </div>\n-\n-                            </form>\n-\n-                        </div>\n-\n-\n-\n-                    </div>\n-                </div> -->\n-\n-\n-                <!-- <div class=\"row\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card-box\">\n-                            <form action=\"{{route('branch.ships.updatebookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-\n-                                @csrf\n-\n-                                <div class=\"col-md-12\">\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                                <label>Change Shipment Status</label>\n-                                                <select name=\"status_id\" class=\"form-control\" id=\"\">\n-                                                    @foreach (\\App\\Models\\Statuses::all() as $item)\n-                                                        <option\n-                                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n-                                                    @endforeach\n-                                                </select>\n-                                                @error('status_id')\n-                                                <span class=\"text-danger\">{{ $message }}</span>\n-                                                @enderror\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Date</label>\n-                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n-                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n-                                                        placeholder=\"Enter title\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                            <div class=\"form-group\">\n-                                            <label>Tracking Url</label>\n-                                                    <input type=\"text\" value=\"\" max=\"\"\n-                                                        class=\"form-control\" id=\"tracking_url\" name=\"tracking_url\"\n-                                                        placeholder=\"Enter tracking url\">\n-                                            </div>\n-                                        </div>\n-                                    </div>\n-\n-                                    <div class=\"row\">\n-                                        <div class=\"col-md-4\">\n-                                        <div class=\"form-group\">\n-                                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n-                                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n-                                                </button>\n-                                                </div>\n-\n-                                        </div>\n-                                    </div>\n-\n-                                    </div>\n-\n-                                </div>\n-\n-\n-\n-                            </form>\n-\n-                        </div>\n-\n-\n-\n-                    </div>\n-                </div> -->\n-\n-\n-\n-                <div class=\"row clearfix\">\n-                    <div class=\"col-md-12\">\n-                        <div class=\"card\">\n-\n-                            <div class=\"body\">\n-                                <div class=\"header\">\n-                                    <!-- <h4>Assigned Shipments</h4> -->\n-                                </div>\n-                                <div class=\"row detailHead\">\n-                                        <div class=\"col-md-6\">\n-                                            <h1>{{$ships->shipment_id}} / AWB NO: {{$ships->awb_number}}</h1>\n-                                            <h3>Boxes:<span class=\"fontRed\"> {{$totalPieces}}</span> , Weight: <span class=\"fontRed\">{{number_format($tot_weight,2)}} KG</span> </h3>\n-                                        </div>\n-                                        <div class=\"col-md-6\" style=\"margin-top:32px;\">\n-                                            <h5>&nbsp;</h5>\n-                                            <h5>FROM: <span class=\"fontRed\">{{$ships->portOfOrigins->name}}</span> To: <span class=\"fontRed\">{{$ships->portOfDestinations->name}}</span></h5>\n-                                        </div>\n-                                </div>\n-                                <div class=\"col-md-12 text-right \">\n-\n-                                    <div class=\"row floatRight\" >\n-                                        <a  href=\"{{route('branch.ships.deliverylistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Delivery List</a>\n-                                        <a  href=\"{{route('branch.ships.packinglistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Packing List </a>\n-                                        <a  href=\"{{route('branch.ships.customermanifestptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Customs Manifest</a>\n-                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light changeStatus mb-1\"  id=\"changeStatus\">Change Status</button>\n-\n-                                        <div class=\"modal fade\" id=\"printAllModal\" tabindex=\"-1\" aria-labelledby=\"printAllModalLabel\" aria-hidden=\"true\">\n-                                            <div class=\"modal-dialog\">\n-                                                <div class=\"modal-content w-75\">\n-                                                    <div class=\"modal-header\">\n-                                                        <h5 class=\"modal-title\" id=\"printAllModalLabel\">Print All Shipments</h5>\n-                                                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                                                    </div>\n-                                                    <div class=\"modal-body\">\n-                                                        <form action=\"{{ route('branch.shipment.printall') }}\" method=\"post\" target=\"_blank\">\n-                                                            @csrf\n-                                                            @foreach ($ship_bookingsList as $booking)\n-                                                                <input type=\"hidden\" name=\"booking_ids[]\" value=\"{{ $booking->id }}\">\n-                                                            @endforeach\n-                                                            <div class=\"row\">\n-                                                                <label class=\"ml-3\">Select Courier Company</label>\n-                                                                <div class=\"form-group col-md-12\">\n-                                                                    <input type=\"text\" name=\"awb_no\" value=\"{{$ships->awb_number}}\" class=\"d-none\">\n-                                                                    <select name=\"agency\" id=\"sender_id\" class=\"form-control\" required>\n-                                                                        @foreach ($agencies as $agency)\n-                                                                            <option value=\"{{$agency->id}}\">{{$agency->name}}</option>\n-                                                                        @endforeach\n-                                                                    </select>\n-                                                                </div>\n-                                                            </div>\n-                                                            <div class=\"col-12 text-center mt-2\" >\n-                                                                <button type=\"submit\"  class=\"btn btn-success p-2\" >Print all</button>\n-                                                            </div>\n-                                                        </form>\n-                                                    </div>\n-                                                </div>\n-                                            </div>\n-                                        </div>\n-\n-                                        <button type=\"submit\" id=\"printallButton\" class=\"btn btn-success waves-effect waves-light ml-2 mb-1\" data-bs-toggle=\"modal\" data-bs-target=\"#printAllModal\" disabled>\n-                                            <i class=\"fas fa-print\"> Print all</i>\n-                                        </button>\n-\n-                                        <form action=\"{{route('branch.shipment.loadingExport')}}\" class=\"m-l-10\" method=\"post\" target=\"_blank\">\n-                                            @csrf\n-                                            <input type=\"hidden\" value=\"\" class=\"hidShipIds\" name=\"shipmentId\" />\n-                                            <input type=\"hidden\" value=\"\" class=\"hidBoxIds\" name=\"boxId\" />\n-                                            <input type=\"hidden\" value=\"{{$shipId}}\" class=\"selectedShipIds\" name=\"shipIds\" />\n-\n-                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light loadingExport\"><i class=\"fas fa-print\"> Export Loading List</i>\n-                                            </button>\n-                                        </form>\n-\n-                                    </div>\n-                                </div>\n-                                <div class=\"table-responsive\">\n-                                    <table id=\"shipsTable\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                                        <thead>\n-                                        <tr >\n-                                            <th><input type=\"checkbox\" id=\"allcb\" name=\"shipBookId[]\" class=\"shipmentIds checkbox-item selectAll\" value=\"{{(!empty($booking->shipment->id))}}\" shipId=\"{{(!empty($booking->ship->id))}}\"></th>\n-                                            <th>Booking No</th>\n-                                            <th>State</th>\n-                                            <th>Shipment name</th>\n-                                            <th>Shipment <br>Type</th>\n-                                            <th>No of Pcs</th>\n-                                            <th>Box Numbers</th>\n-                                            <th>Total Weight</th>\n-                                            <th>Invoice value</th>\n-                                            <th>Status</th>\n-                                            <th>Booking Created Date</th>\n-                                            <th>Action</th>\n-                                        </tr>\n-                                        </thead>\n-                                        <tbody  id=\"bookingData\">\n-                                        <?php\n-                                        $tot_weight_exist = 0;\n-                                        $tot_value_exist = 0;\n-                                        $tot_temp_exist =0;\n-                                        $totalPieces =0;\n-                                        $boxList = [];\n-\n-                                        foreach( $ship_bookingsList as $booking) {\n-\n-                                            $tot_temp_exist= $booking->weight;\n-                                            $tot_weight_exist +=$tot_temp_exist;\n-                                            $tot_value_exist += $booking->packages->pluck('subtotal')->sum();\n-                                            $totalPieces += 1;\n-                                            $List = '';\n-                                            $ListValue = '';\n-                                            $boxList = [];\n-                                            $boxListValue = [];\n-\n-                                            $status = '';\n-                                            $lastStatus = '';\n-                                            if(($booking->boxStatuses != null)) {\n-                                                $status = collect($booking->boxStatuses)->last();\n-                                                $expectedDate = $status->expected_date;\n-                                                $comment = $status->comment;\n-                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n-                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n-                                                if($lastStatus == 'Pending') {\n-                                                    $style= \"background-color:#ec1616e6;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else if ($lastStatus == 'Shipment on hold') {\n-                                                    $style= \"background-color:#ffdb00;\";\n-                                                    $disabled = \"disabled='disabled'\";\n-                                                    $newClass =\"k-state-disabled\";\n-                                                } else {\n-                                                    $style= \"background-color:none;\";\n-                                                    $disabled = \"\";\n-                                                    $newClass = \"k-checkbox\";\n-                                                }\n-                                            }\n-\n-                                            ?>\n-                                            <tr style=\"{{ $style }}\">\n-                                                <td style=\"text-align:center\" ><input {{$disabled}} type=\"checkbox\" name=\"shipBookId[]\" class=\"shipmentIds {{$newClass}} shipmet_check\" value=\"{{$booking->shipment->id}}\" shipId=\"{{$booking->shipment_id}}\" boxId=\"{{$booking->id}}\"></td>\n-                                                <td style=\"text-align:center\" class=\"detailedBoxView\" value=\"{{$booking->id}}\" dateVal=\"{{date('Y-m-d')}}\" expectedDate=\"{{$expectedDate}}\" comment=\"{{$comment}}\">{{ $booking->shipment->booking_number}}</td>\n-                                                <td style=\"text-align:center\">{{$booking->shipment->receiver->address->state->name}}</td>\n-                                                <td style=\"text-align:center\">{{$ships->shipment_id}}</td>\n-                                                <td>{{$booking->shipment->shipMethType?$booking->shipment->shipMethType->name:''}}</td>\n-                                                <td style=\"text-align:center\">1</td>\n-                                                <td style=\"text-align:center\" class=\"boxName\" boxId=\"{{$booking->id}}\" ids=\"{{$ListValue}}\">{{ $booking->box_name }}</td>\n-                                                <td style=\"text-align:center\">{{ number_format($booking->weight,2) }}</td>\n-                                                {{-- <td style=\"text-align:center\">{{ number_format(floatval($booking->total_value) + floatval($booking->box_packing_charge),2)}}</td> --}}\n-                                                <td style=\"text-align:center\">{{$booking->packages->pluck('subtotal')->sum()}}</td>\n-\n-\n-                                                <td style=\"text-align:center\">{{$lastStatus}}</td>\n-                                                <td style=\"text-align:center\">{{ !empty($booking->created_at) ? date('d-m-Y', strtotime($booking->created_at)) : '' }}</td>\n-                                                <td>\n-                                                    <a href=\"#\" title=\"View\"\n-                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n-                                                        <i class=\"fas fa-eye\"></i>\n-                                                    </a>\n-                                                    <a href=\"/branch/shipment/single_print/{{$booking->id}}\" title=\"Print\" target=\"_blank\"\n-                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n-                                                        <i class=\"fas fa-print\"></i>\n-                                                    </a>\n-                                                        <a href=\"{{route('branch.ships.undoaddbooking',$booking->id)}}\" title=\"Remove\"\n-                                                        class=\"btn btn-icon waves-effect waves-light btn-dark icons\">\n-                                                            <i class=\"fas fa-undo\"></i>\n-                                                        </a>\n-                                                </td>\n-                                            </tr>\n-                                        <?php\n-                                        }\n-                                        ?>\n-                                            <tr>\n-                                                <td  colspan=\"5\"> </td><td style=\"text-align:center\">{{ $totalPieces}}</td>\n-                                                <td  colspan=\"1\"> </td><td style=\"text-align:center\">{{ number_format($tot_weight_exist,2)}}</td>\n-                                                <td style=\"text-align:center\" >{{ number_format($tot_value_exist,2) }}</td>\n-                                                <td colspan=\"3\"  >\n-                                                    <div class=\"row\"><div class=\"col-6\">Average : {{$tot_weight_exist?number_format($tot_value_exist * $ships->exchange_rate/$tot_weight_exist,3):'0'}}  </div> <div class=\"col-6\">Duty : {{$tot_weight_exist?number_format($tot_value_exist*$ships->exchange_rate/$tot_weight_exist*77.28/100,3):'0'}}</div></div>\n-\n-                                                </td>\n-                                            </tr>\n-\n-\n-\n-                                            <!-- <tr id=\"bookingData\">\n-                                                <td>4545454</td>\n-                                                <td>Shipment 112</td>\n-                                                <td>3</td>\n-                                                <td>10</td>\n-                                                <td>25</td>\n-                                                <td>Shipment Forwarded</td>\n-                                                <td>\n-                                                @can(permission_edit())\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n-                                                            <i class=\"fas fa-pencil-alt\"></i>\n-                                                        </a>\n-                                                    @endcan\n-                                                    @can(permission_view())\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n-                                                            <i class=\"fas fa-eye\"></i>\n-                                                        </a>\n-                                                    @endcan\n-                                                    @can('shipment-print')\n-                                                    <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n-                                                            <i class=\"fas fa-eye\"></i>\n-                                                        </a>\n-\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n-                                                            <i class=\"fas fa-print\"></i>\n-                                                        </a>\n-\n-                                                        <a href=\"#\"\n-                                                           class=\"btn btn-icon waves-effect waves-light btn-dark\">\n-                                                            <i class=\"fas fa-undo\"></i>\n-                                                        </a>\n-                                                    @endcan\n-\n-                                                </td>\n-                                            </tr> -->\n-\n-\n-                                        </tbody>\n-                                    </table>\n-                                </div>\n-\n-                            </div>\n-                        </div>\n-                        <div class=\"col-md-12 text-left \">\n-\n-                            <div class=\"floatLeft\" >\n-                                <select name=\"\" id=\"shipmentTypeSelect\" class=\"p-2 pb-0\">\n-                                    <option value=\"\">All</option>\n-                                    @foreach ($ship_types as $ship_types_data )\n-                                        <option value=\"{{$ship_types_data->id}}\">{{$ship_types_data->name}}</option>\n-                                    @endforeach\n-                                </select>\n-                            </div>\n-                        </div>\n-                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n-                                   style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n-                            <thead style=\"font-size:14px;\">\n-                            <tr >\n-                                    <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n-                                    <th>Collection Date <br> Collection Office</th>\n-                                    <th>ship metho</th>\n-                                    <th>Collection Staff<br> Collection Agent</th>\n-                                    <th>Customer<br>Sender/Receiver</th>\n-                                    <th>State/Emirates<br>Country</th>\n-                                    <th>Cargo No<br>Type</th>\n-                                    <th>Cargo Box<br>No</th>\n-                                    <th>Total<br>Weight</th>\n-                                    <th>Total<br>Amount</th>\n-                                    <th>Total<br>Value</th>\n-                                </tr>\n-                            </thead>\n-                            <tbody>\n-                                @foreach($boxes as $key=> $boxes)\n-                                    <?php\n-\n-                                        if(!empty($boxes->shipment->statusVal->name)){\n-                                            if($boxes->shipment->statusVal->name == \"Enquiry collected\") {\n-                                                $showAddItems = true;\n-                                                $style =\"style=background-color:yellow;padding:5px;\";\n-                                            } else {\n-                                                $style =\"style=background-color:none\";\n-                                                $showAddItems = false;\n-\n-                                            }\n-                                        }\n-                                        $type = \"\";\n-                                        if(!empty($boxes->shipment->delivery_type)){\n-                                            if($boxes->shipment->delivery_type == \"door_to_door\") {\n-                                                $type = \"Door To Door\";\n-                                            } elseif($boxes->shipment->delivery_type == \"door_to_port\"){\n-                                                $type =\"Door To Port\";\n-                                            }\n-                                            else {\n-                                                $type =\"\";\n-                                            }\n-                                        }\n-                                        if($boxes->is_select == 1) {\n-                                            $total_count += 1;\n-                                            $tot_sel_amt += $boxes->packages->pluck('subtotal')->sum();\n-                                            $tot_sel_weight += $boxes->weight;\n-                                            $boxList[] = $boxes->id;\n-\n-                                        }\n-                                    ?>\n-                                    <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n-                                        <td><input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\" selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight??0}}\" boxVal=\"{{$boxes->packages->pluck('subtotal')->sum()??0}}\" @if($boxes->is_select == 1) checked @endif ></td>\n-                                        <td>{{ !empty($boxes->shipment->created_date)? date('d-m-Y', strtotime($boxes->shipment->created_date)):''  }}\n-                                            <br> {{ $boxes->shipment->agency?$boxes->shipment->agency->name:'-' }}\n-                                        </td>\n-                                        <td>{{$boxes->shipment->shipMethType?$boxes->shipment->shipMethType->name:''}}</td>\n-\n-                                        <td> @if($boxes->shipment->collected_by == 'driver')\n-                                                    {{ $boxes->shipment->driver?$boxes->shipment->driver->name:'-'}}\n-                                                @else\n-                                                    {{$boxes->shipment->staff?$boxes->shipment->staff->full_name:'-'}}\n-                                                @endif\n-                                        </td>\n-                                        <td>{{ $boxes->shipment->receiver->name??\"\"}} <br>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->receiver->address->country->name??\"\"}}</td>\n-                                        <td>{{ $boxes->shipment->booking_number??\"\"}} <br> {{ $type }}</td>\n-                                        <td>{{ $boxes->box_name??\"\"}}</td>\n-                                        <td>{{ $boxes->weight??\"\"}}</td>\n-                                        {{-- <td>{{ number_format(floatval($boxes->total_value),2)??\"\"}}</td> --}}\n-                                        <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n-\n-                                        {{-- <td class=\"boxVal\">{{ number_format((floatval($boxes->total_value) + floatval($boxes->box_packing_charge)),2) ?? \"\"}}</td> --}}\n-                                        <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight??0 }}</td>\n-\n-                                    </tr>\n-                                @endforeach\n-                                <?php\n-\n-                                $List = implode(', ', $boxList);\n-                                ?>\n-                            </tbody>\n-                        </table>\n-                        <div class=\"row m-t-50\">\n-                            <div class=\"col-md-12\">\n-                                <div class=\"\">\n-                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n-                                        @csrf\n-                                        <div class=\"col-md-12\">\n-                                            <div class=\"row\">\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Selected Boxes</label>\n-                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Weight</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n-                                                    </div>\n-                                                </div>\n-                                                <div class=\"col-md-3\">\n-                                                    <div class=\"form-group\">\n-                                                        <label>Total Amount</label>\n-                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n-                                                    </div>\n-                                                </div>\n                                                 \n-                                                <script>\n-                                                    document.querySelector('form').addEventListener('submit', function(event) {\n-                                                        // Get all the checkboxes in the table\n-                                                        const checkboxes = document.querySelectorAll('.bookingSelection');\n-                                                        let isChecked = false;\n-                                                \n-                                                        // Loop through the checkboxes and check if any is checked\n-                                                        checkboxes.forEach(function(checkbox) {\n-                                                            if (checkbox.checked) {\n-                                                                isChecked = true;\n-                                                            }\n-                                                        });\n-                                                \n-                                                        // If no checkbox is selected, show a custom alert and prevent form submission\n-                                                        if (!isChecked) {\n-                                                            event.preventDefault();  // Prevent the form from being submitted\n-                                                            \n-                                                            // Create custom alert message\n-                                                            const customAlert = document.createElement('div');\n-                                                            customAlert.style.position = 'fixed';\n-                                                            customAlert.style.top = '50%';\n-                                                            customAlert.style.left = '50%';\n-                                                            customAlert.style.transform = 'translate(-50%, -50%)';\n-                                                            customAlert.style.backgroundColor = '#f44336';\n-                                                            customAlert.style.color = 'white';\n-                                                            customAlert.style.padding = '20px';\n-                                                            customAlert.style.borderRadius = '5px';\n-                                                            customAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-                                                            customAlert.style.fontSize = '16px';\n-                                                            customAlert.style.zIndex = '1000';\n-                                                            customAlert.textContent = \"Please select at least one booking before submitting.\";\n-                                                \n-                                                            // Append the custom alert to the body\n-                                                            document.body.appendChild(customAlert);\n-                                                \n-                                                            // Remove the custom alert after 3 seconds\n-                                                            setTimeout(function() {\n-                                                                customAlert.remove();\n-                                                            }, 3000);\n-                                                \n-                                                            return false; // Prevent form submission if no checkbox is selected\n-                                                        }\n-                                                \n-                                                        // If a checkbox is selected, submit the form\n-                                                        return true;\n-                                                    });\n-                                                </script>\n-                                                \n-                                                \n                                                 <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                                     @csrf\n                                                     <!-- form contents -->\n                                                 \n"
                },
                {
                    "date": 1733207521824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -577,9 +577,9 @@\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n                                                 <script>\n-                                                    document.querySelector('form').addEventListener('submit', function(event) {\n+                                                    document.querySelector('#myForm').addEventListener('submit', function(event) {\n                                                         event.preventDefault();  // Prevent the form from submitting normally\n                                                 \n                                                         // Get all the checkboxes in the table\n                                                         const checkboxes = document.querySelectorAll('.bookingSelection');\n"
                },
                {
                    "date": 1733207952351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -577,63 +577,9 @@\n                                                         <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                     </div>\n                                                 </div>\n                                              \n-                                                document.querySelector('form').addEventListener('submit', function(event) {\n-                                                    event.preventDefault();  // Prevent the form from submitting normally\n                                                 \n-                                                    // Get all the checkboxes in the table\n-                                                    const checkboxes = document.querySelectorAll('.bookingSelection');\n-                                                    let isChecked = false;\n-                                                \n-                                                    // Loop through the checkboxes and check if any is checked\n-                                                    checkboxes.forEach(function(checkbox) {\n-                                                        if (checkbox.checked) {\n-                                                            isChecked = true;\n-                                                        }\n-                                                    });\n-                                                \n-                                                    // If no checkbox is selected, handle error and show custom alert\n-                                                    if (!isChecked) {\n-                                                        handleError(\"Please select at least one booking before submitting.\");\n-                                                        return false;  // Prevent form submission if no checkbox is selected\n-                                                    }\n-                                                \n-                                                    // If checkboxes are selected, proceed to handle the form submission\n-                                                    // Here you can handle the logic, e.g., submitting data via AJAX or saving it locally\n-                                                    alert('Form submitted with selected checkboxes!');\n-                                                    // For example, you can save data to localStorage, manipulate the UI, or perform further frontend tasks\n-                                                });\n-                                                \n-                                                // Function to handle the error display and error flag\n-                                                function handleError(errorMessage) {\n-                                                    // Create custom error alert message\n-                                                    const errorAlert = document.createElement('div');\n-                                                    errorAlert.style.position = 'fixed';\n-                                                    errorAlert.style.top = '50%';\n-                                                    errorAlert.style.left = '50%';\n-                                                    errorAlert.style.transform = 'translate(-50%, -50%)';\n-                                                    errorAlert.style.backgroundColor = '#f44336';\n-                                                    errorAlert.style.color = 'white';\n-                                                    errorAlert.style.padding = '20px';\n-                                                    errorAlert.style.borderRadius = '5px';\n-                                                    errorAlert.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';\n-                                                    errorAlert.style.fontSize = '16px';\n-                                                    errorAlert.style.zIndex = '1000';\n-                                                    errorAlert.textContent = errorMessage;\n-                                                \n-                                                    // Append the custom alert to the body\n-                                                    document.body.appendChild(errorAlert);\n-                                                \n-                                                    // Optionally, log the error for debugging\n-                                                    console.error(errorMessage);\n-                                                \n-                                                    // Remove the custom error alert after 3 seconds\n-                                                    setTimeout(function() {\n-                                                        errorAlert.remove();\n-                                                    }, 3000);\n-                                                }\n-                                                \n \n                                                 \n                                                 <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                                     @csrf\n"
                }
            ],
            "date": 1733202003731,
            "name": "Commit-0",
            "content": "@extends('layouts.app')\n\n@section('content')\n\n    <div class=\"content-page\" id=\"content-page\">\n        <div class=\"content\">\n\n            <!-- Start Content-->\n            <div class=\"container-fluid\">\n\n                <!-- start page title -->\n                <div class=\"row\">\n                    <div class=\"col-12\">\n                        <div class=\"page-title-box\">\n                            <div class=\"page-title-right\">\n                                <ol class=\"breadcrumb m-0\">\n                                    <li class=\"breadcrumb-item\"><a href=\"{{route('super-admin.dashboard') }}\">Home</a></li>\n                                    <li class=\"breadcrumb-item\"><a href=\"{{route('branch.ship.create')}}\">Shipment List</a></li>\n                                    <li class=\"breadcrumb-item active\">View Assigned</li>\n\n                                </ol>\n                            </div>\n                            <h4 class=\"page-title\">Assigned Shipments</h4>\n\n                        </div>\n                    </div>\n\n                </div>\n\n                <?php\n                    $selectedBoxId = [];\n                    $res ='';\n                    $total_count = 0;\n                    $tot_sel_weight = 0;\n                    $tot_sel_amt = 0;\n                    $tot_weight = 0;\n                    $tot_value = 0;\n                    $tot_temp =0;\n                    $tot_sel_temp =0;\n                    $totalPieces =0;\n\n                    foreach( $ship_bookingsList as $booking) {\n\n                        $tot_temp= $booking->weight;\n                        $tot_weight +=$tot_temp;\n                        $tot_value += $booking->shipment->grand_total;\n                        $totalPieces += 1;\n                        // $totalPieces += $booking->shipment->number_of_pcs;\n                        $List = '';\n                        $ListValue = '';\n                        $boxList = [];\n                        $boxListValue = [];\n\n                        $status = '';\n                        $lastStatus = '';\n                        if(!empty($booking->shipment->bookingNumberStatus)) {\n                            $status = collect($booking->shipment->bookingNumberStatus)->last();\n\n                            // $lastStatus = (!empty($status)) ? $status->status->name : $booking->ship->shipmentStatus->name ;\n                        }\n\n                    }\n                        ?>\n                <!-- <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <div class=\"card-box\">\n                            <form action=\"{{route('branch.ships.createbookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n\n                                @csrf\n                                <div class=\"col-md-12\">\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-6\">\n                                            <div class=\"form-group\">\n                                                <label>Booking No</label>\n                                                <select name=\"booking_ids[]\" id=\"booking_ids\" class=\"select2 form-control\"  multiple>\n                                                    @foreach($bookings as $booking)\n                                                    <option value=\"{{$booking->id}}\">{{$booking->booking_number}}</option>\n                                                    @endforeach\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <div class=\"form-group\">\n                                                <label>Shipment ID</label>\n                                                <input type=\"text\" class=\"form-control\" name=\"shipment_id\" value=\"{{$ships->shipment_id}}\" />\n                                            </div>\n\n\n                                        </div>\n                                    </div>\n                                </div>\n\n\n                                <div class=\"col-md-12\">\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                                <label>AWB id</label>\n                                                <input type=\"text\" class=\"form-control\" name=\"awd_id\" value=\"{{$ships->awd_id}}\" />\n\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-md-3\">\n                                            <div class=\"form-group\">\n                                            <label>Date</label>\n                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n                                                        placeholder=\"Enter title\">\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                                    <label>Shipment Status</label>\n                                                    <select name=\"status_id\" class=\"form-control\" id=\"\">\n                                                        @foreach ( status_list_admin() as $item)\n                                                            <option\n                                                                {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n                                                        @endforeach\n                                                    </select>\n                                                    @error('status_id')\n                                                    <span class=\"text-danger\">{{ $message }}</span>\n                                                    @enderror\n                                                </div>\n                                        </div>\n\n\n\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                            <label>Estimated Delivery</label>\n                                                    <input type=\"date\" value=\"{{ isset($ships->estimated_delivery) ? date('Y-m-d', strtotime($ships->estimated_delivery)) : ''}}\" max=\"\"\n                                                        class=\"form-control\" id=\"propertyname\" name=\"estimated_delivery\"\n                                                        placeholder=\"Enter title\">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"text-center\">\n                                    <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n                                    <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit\n                                    </button>\n                                </div>\n\n                            </form>\n\n                        </div>\n\n\n\n                    </div>\n                </div> -->\n\n\n                <!-- <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <div class=\"card-box\">\n                            <form action=\"{{route('branch.ships.updatebookingtoship')}}\" method=\"post\" enctype=\"multipart/form-data\">\n\n                                @csrf\n\n                                <div class=\"col-md-12\">\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                                <label>Change Shipment Status</label>\n                                                <select name=\"status_id\" class=\"form-control\" id=\"\">\n                                                    @foreach (\\App\\Models\\Statuses::all() as $item)\n                                                        <option\n                                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n                                                    @endforeach\n                                                </select>\n                                                @error('status_id')\n                                                <span class=\"text-danger\">{{ $message }}</span>\n                                                @enderror\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                            <label>Date</label>\n                                                    <input type=\"date\" value=\"{{ isset($ships->created_date) ? date('Y-m-d', strtotime($ships->created_date)) : ''}}\" max=\"\"\n                                                        class=\"form-control\" id=\"propertyname\" name=\"created_date\"\n                                                        placeholder=\"Enter title\">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                            <div class=\"form-group\">\n                                            <label>Tracking Url</label>\n                                                    <input type=\"text\" value=\"\" max=\"\"\n                                                        class=\"form-control\" id=\"tracking_url\" name=\"tracking_url\"\n                                                        placeholder=\"Enter tracking url\">\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                        <div class=\"form-group\">\n                                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n                                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n                                                </button>\n                                                </div>\n\n                                        </div>\n                                    </div>\n\n                                    </div>\n\n                                </div>\n\n\n\n                            </form>\n\n                        </div>\n\n\n\n                    </div>\n                </div> -->\n\n\n\n                <div class=\"row clearfix\">\n                    <div class=\"col-md-12\">\n                        <div class=\"card\">\n\n                            <div class=\"body\">\n                                <div class=\"header\">\n                                    <!-- <h4>Assigned Shipments</h4> -->\n                                </div>\n                                <div class=\"row detailHead\">\n                                        <div class=\"col-md-6\">\n                                            <h1>{{$ships->shipment_id}} / AWB NO: {{$ships->awb_number}}</h1>\n                                            <h3>Boxes:<span class=\"fontRed\"> {{$totalPieces}}</span> , Weight: <span class=\"fontRed\">{{number_format($tot_weight,2)}} KG</span> </h3>\n                                        </div>\n                                        <div class=\"col-md-6\" style=\"margin-top:32px;\">\n                                            <h5>&nbsp;</h5>\n                                            <h5>FROM: <span class=\"fontRed\">{{$ships->portOfOrigins->name}}</span> To: <span class=\"fontRed\">{{$ships->portOfDestinations->name}}</span></h5>\n                                        </div>\n                                </div>\n                                <div class=\"col-md-12 text-right \">\n\n                                    <div class=\"row floatRight\" >\n                                        <a  href=\"{{route('branch.ships.deliverylistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Delivery List</a>\n                                        <a  href=\"{{route('branch.ships.packinglistptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Packing List </a>\n                                        <a  href=\"{{route('branch.ships.customermanifestptint', array('ship_id' => $ships->id))}}\" class=\"btn btn-success mr-3 mb-1\"> Customs Manifest</a>\n                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light changeStatus mb-1\"  id=\"changeStatus\">Change Status</button>\n\n                                        <div class=\"modal fade\" id=\"printAllModal\" tabindex=\"-1\" aria-labelledby=\"printAllModalLabel\" aria-hidden=\"true\">\n                                            <div class=\"modal-dialog\">\n                                                <div class=\"modal-content w-75\">\n                                                    <div class=\"modal-header\">\n                                                        <h5 class=\"modal-title\" id=\"printAllModalLabel\">Print All Shipments</h5>\n                                                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                                                    </div>\n                                                    <div class=\"modal-body\">\n                                                        <form action=\"{{ route('branch.shipment.printall') }}\" method=\"post\" target=\"_blank\">\n                                                            @csrf\n                                                            @foreach ($ship_bookingsList as $booking)\n                                                                <input type=\"hidden\" name=\"booking_ids[]\" value=\"{{ $booking->id }}\">\n                                                            @endforeach\n                                                            <div class=\"row\">\n                                                                <label class=\"ml-3\">Select Courier Company</label>\n                                                                <div class=\"form-group col-md-12\">\n                                                                    <input type=\"text\" name=\"awb_no\" value=\"{{$ships->awb_number}}\" class=\"d-none\">\n                                                                    <select name=\"agency\" id=\"sender_id\" class=\"form-control\" required>\n                                                                        @foreach ($agencies as $agency)\n                                                                            <option value=\"{{$agency->id}}\">{{$agency->name}}</option>\n                                                                        @endforeach\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div class=\"col-12 text-center mt-2\" >\n                                                                <button type=\"submit\"  class=\"btn btn-success p-2\" >Print all</button>\n                                                            </div>\n                                                        </form>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <button type=\"submit\" id=\"printallButton\" class=\"btn btn-success waves-effect waves-light ml-2 mb-1\" data-bs-toggle=\"modal\" data-bs-target=\"#printAllModal\" disabled>\n                                            <i class=\"fas fa-print\"> Print all</i>\n                                        </button>\n\n                                        <form action=\"{{route('branch.shipment.loadingExport')}}\" class=\"m-l-10\" method=\"post\" target=\"_blank\">\n                                            @csrf\n                                            <input type=\"hidden\" value=\"\" class=\"hidShipIds\" name=\"shipmentId\" />\n                                            <input type=\"hidden\" value=\"\" class=\"hidBoxIds\" name=\"boxId\" />\n                                            <input type=\"hidden\" value=\"{{$shipId}}\" class=\"selectedShipIds\" name=\"shipIds\" />\n\n                                            <button type=\"submit\" class=\"btn btn-success waves-effect waves-light loadingExport\"><i class=\"fas fa-print\"> Export Loading List</i>\n                                            </button>\n                                        </form>\n\n                                    </div>\n                                </div>\n                                <div class=\"table-responsive\">\n                                    <table id=\"shipsTable\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n                                        <thead>\n                                        <tr >\n                                            <th><input type=\"checkbox\" id=\"allcb\" name=\"shipBookId[]\" class=\"shipmentIds checkbox-item selectAll\" value=\"{{(!empty($booking->shipment->id))}}\" shipId=\"{{(!empty($booking->ship->id))}}\"></th>\n                                            <th>Booking No</th>\n                                            <th>State</th>\n                                            <th>Shipment name</th>\n                                            <th>Shipment <br>Type</th>\n                                            <th>No of Pcs</th>\n                                            <th>Box Numbers</th>\n                                            <th>Total Weight</th>\n                                            <th>Invoice value</th>\n                                            <th>Status</th>\n                                            <th>Booking Created Date</th>\n                                            <th>Action</th>\n                                        </tr>\n                                        </thead>\n                                        <tbody  id=\"bookingData\">\n                                        <?php\n                                        $tot_weight_exist = 0;\n                                        $tot_value_exist = 0;\n                                        $tot_temp_exist =0;\n                                        $totalPieces =0;\n                                        $boxList = [];\n\n                                        foreach( $ship_bookingsList as $booking) {\n\n                                            $tot_temp_exist= $booking->weight;\n                                            $tot_weight_exist +=$tot_temp_exist;\n                                            $tot_value_exist += $booking->packages->pluck('subtotal')->sum();\n                                            $totalPieces += 1;\n                                            $List = '';\n                                            $ListValue = '';\n                                            $boxList = [];\n                                            $boxListValue = [];\n\n                                            $status = '';\n                                            $lastStatus = '';\n                                            if(($booking->boxStatuses != null)) {\n                                                $status = collect($booking->boxStatuses)->last();\n                                                $expectedDate = $status->expected_date;\n                                                $comment = $status->comment;\n                                                $shipmentStatus = collect($booking->shipment->shipmentStatus)->last();\n                                                $lastStatus = (!empty($status)) ? $status->status->name : $shipmentStatus->status->name ;\n                                                if($lastStatus == 'Pending') {\n                                                    $style= \"background-color:#ec1616e6;\";\n                                                    $disabled = \"disabled='disabled'\";\n                                                    $newClass =\"k-state-disabled\";\n                                                } else if ($lastStatus == 'Shipment on hold') {\n                                                    $style= \"background-color:#ffdb00;\";\n                                                    $disabled = \"disabled='disabled'\";\n                                                    $newClass =\"k-state-disabled\";\n                                                } else {\n                                                    $style= \"background-color:none;\";\n                                                    $disabled = \"\";\n                                                    $newClass = \"k-checkbox\";\n                                                }\n                                            }\n\n                                            ?>\n                                            <tr style=\"{{ $style }}\">\n                                                <td style=\"text-align:center\" ><input {{$disabled}} type=\"checkbox\" name=\"shipBookId[]\" class=\"shipmentIds {{$newClass}} shipmet_check\" value=\"{{$booking->shipment->id}}\" shipId=\"{{$booking->shipment_id}}\" boxId=\"{{$booking->id}}\"></td>\n                                                <td style=\"text-align:center\" class=\"detailedBoxView\" value=\"{{$booking->id}}\" dateVal=\"{{date('Y-m-d')}}\" expectedDate=\"{{$expectedDate}}\" comment=\"{{$comment}}\">{{ $booking->shipment->booking_number}}</td>\n                                                <td style=\"text-align:center\">{{$booking->shipment->receiver->address->state->name}}</td>\n                                                <td style=\"text-align:center\">{{$ships->shipment_id}}</td>\n                                                <td>{{$booking->shipment->shipMethType?$booking->shipment->shipMethType->name:''}}</td>\n                                                <td style=\"text-align:center\">1</td>\n                                                <td style=\"text-align:center\" class=\"boxName\" boxId=\"{{$booking->id}}\" ids=\"{{$ListValue}}\">{{ $booking->box_name }}</td>\n                                                <td style=\"text-align:center\">{{ number_format($booking->weight,2) }}</td>\n                                                {{-- <td style=\"text-align:center\">{{ number_format(floatval($booking->total_value) + floatval($booking->box_packing_charge),2)}}</td> --}}\n                                                <td style=\"text-align:center\">{{$booking->packages->pluck('subtotal')->sum()}}</td>\n\n\n                                                <td style=\"text-align:center\">{{$lastStatus}}</td>\n                                                <td style=\"text-align:center\">{{ !empty($booking->created_at) ? date('d-m-Y', strtotime($booking->created_at)) : '' }}</td>\n                                                <td>\n                                                    <a href=\"#\" title=\"View\"\n                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n                                                        <i class=\"fas fa-eye\"></i>\n                                                    </a>\n                                                    <a href=\"/branch/shipment/single_print/{{$booking->id}}\" title=\"Print\" target=\"_blank\"\n                                                    class=\"btn btn-icon waves-effect waves-light btn-success icons\">\n                                                        <i class=\"fas fa-print\"></i>\n                                                    </a>\n                                                        <a href=\"{{route('branch.ships.undoaddbooking',$booking->id)}}\" title=\"Remove\"\n                                                        class=\"btn btn-icon waves-effect waves-light btn-dark icons\">\n                                                            <i class=\"fas fa-undo\"></i>\n                                                        </a>\n                                                </td>\n                                            </tr>\n                                        <?php\n                                        }\n                                        ?>\n                                            <tr>\n                                                <td  colspan=\"5\"> </td><td style=\"text-align:center\">{{ $totalPieces}}</td>\n                                                <td  colspan=\"1\"> </td><td style=\"text-align:center\">{{ number_format($tot_weight_exist,2)}}</td>\n                                                <td style=\"text-align:center\" >{{ number_format($tot_value_exist,2) }}</td>\n                                                <td colspan=\"3\"  >\n                                                    <div class=\"row\"><div class=\"col-6\">Average : {{$tot_weight_exist?number_format($tot_value_exist * $ships->exchange_rate/$tot_weight_exist,3):'0'}}  </div> <div class=\"col-6\">Duty : {{$tot_weight_exist?number_format($tot_value_exist*$ships->exchange_rate/$tot_weight_exist*77.28/100,3):'0'}}</div></div>\n\n                                                </td>\n                                            </tr>\n\n\n\n                                            <!-- <tr id=\"bookingData\">\n                                                <td>4545454</td>\n                                                <td>Shipment 112</td>\n                                                <td>3</td>\n                                                <td>10</td>\n                                                <td>25</td>\n                                                <td>Shipment Forwarded</td>\n                                                <td>\n                                                @can(permission_edit())\n                                                        <a href=\"#\"\n                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n                                                            <i class=\"fas fa-pencil-alt\"></i>\n                                                        </a>\n                                                    @endcan\n                                                    @can(permission_view())\n                                                        <a href=\"#\"\n                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n                                                            <i class=\"fas fa-eye\"></i>\n                                                        </a>\n                                                    @endcan\n                                                    @can('shipment-print')\n                                                    <a href=\"#\"\n                                                           class=\"btn btn-icon waves-effect waves-light btn-warning\">\n                                                            <i class=\"fas fa-eye\"></i>\n                                                        </a>\n\n                                                        <a href=\"#\"\n                                                           class=\"btn btn-icon waves-effect waves-light btn-success\">\n                                                            <i class=\"fas fa-print\"></i>\n                                                        </a>\n\n                                                        <a href=\"#\"\n                                                           class=\"btn btn-icon waves-effect waves-light btn-dark\">\n                                                            <i class=\"fas fa-undo\"></i>\n                                                        </a>\n                                                    @endcan\n\n                                                </td>\n                                            </tr> -->\n\n\n                                        </tbody>\n                                    </table>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div class=\"col-md-12 text-left \">\n\n                            <div class=\"floatLeft\" >\n                                <select name=\"\" id=\"shipmentTypeSelect\" class=\"p-2 pb-0\">\n                                    <option value=\"\">All</option>\n                                    @foreach ($ship_types as $ship_types_data )\n                                        <option value=\"{{$ship_types_data->id}}\">{{$ship_types_data->name}}</option>\n                                    @endforeach\n                                </select>\n                            </div>\n                        </div>\n                        <table id=\"bookingList\" class=\"table table-striped table-bordered dt-responsive nowrap\"\n                        style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n                     <thead style=\"font-size:14px;\">\n                     <tr>\n                         <th><input type=\"checkbox\" id=\"bookingList_checkbox\"></th>\n                         <th>Collection Date <br> Collection Office</th>\n                         <th>ship metho</th>\n                         <th>Collection Staff<br> Collection Agent</th>\n                         <th>Customer<br>Sender/Receiver</th>\n                         <th>State/Emirates<br>Country</th>\n                         <th>Cargo No<br>Type</th>\n                         <th>Cargo Box<br>No</th>\n                         <th>Total<br>Weight</th>\n                         <th>Total<br>Amount</th>\n                         <th>Total<br>Value</th>\n                     </tr>\n                     </thead>\n                     <tbody>\n                     @foreach($boxes as $key => $boxes)\n                         <tr data-shipment-type-id=\"{{ $boxes->shipment->shipping_method_id }}\">\n                             <td>\n                                 <input type=\"checkbox\" name=\"bookingSelection[]\" class=\"bookingSelection\" id=\"bookingSelection\"\n                                        selectBoxId=\"{{$boxes->id}}\" value=\"{{$boxes->id}}\" boxWt=\"{{$boxes->weight ?? 0}}\"\n                                        boxVal=\"{{$boxes->packages->pluck('subtotal')->sum() ?? 0}}\" \n                                        @if($boxes->is_select == 1) checked @endif>\n                             </td>\n                             <td>{{ !empty($boxes->shipment->created_date) ? date('d-m-Y', strtotime($boxes->shipment->created_date)) : '' }}\n                                 <br> {{ $boxes->shipment->agency ? $boxes->shipment->agency->name : '-' }}\n                             </td>\n                             <td>{{$boxes->shipment->shipMethType ? $boxes->shipment->shipMethType->name : ''}}</td>\n                             <td>\n                                 @if($boxes->shipment->collected_by == 'driver')\n                                     {{ $boxes->shipment->driver ? $boxes->shipment->driver->name : '-' }}\n                                 @else\n                                     {{$boxes->shipment->staff ? $boxes->shipment->staff->full_name : '-'}}\n                                 @endif\n                             </td>\n                             <td>{{ $boxes->shipment->receiver->name ?? \"\"}} <br>{{ $boxes->shipment->receiver->address->country->name ?? \"\"}}</td>\n                             <td>{{ $boxes->shipment->receiver->address->country->name ?? \"\"}}</td>\n                             <td>{{ $boxes->shipment->booking_number ?? \"\"}} <br> {{ $type }}</td>\n                             <td>{{ $boxes->box_name ?? \"\"}}</td>\n                             <td>{{ $boxes->weight ?? \"\"}}</td>\n                             <td class=\"tot_amnt\">{{$boxes->packages->pluck('subtotal')->sum()}}</td>\n                             <td class=\"boxVal\">{{$boxes->shipment->amount_normal_weight ?? 0 }}</td>\n                         </tr>\n                     @endforeach\n                     </tbody>\n                 </table>\n                 \n                 <script>\n                     $(document).ready(function () {\n                         // Alert when a checkbox is selected or deselected\n                         $(\".bookingSelection\").on(\"change\", function () {\n                             if (this.checked) {\n                                 alert(\"You selected a box with ID: \" + $(this).val());\n                             } else {\n                                 alert(\"You deselected a box with ID: \" + $(this).val());\n                             }\n                         });\n                 \n                         // Select/Deselect all checkboxes\n                         $(\"#bookingList_checkbox\").on(\"change\", function () {\n                             var isChecked = $(this).is(\":checked\");\n                             $(\".bookingSelection\").prop(\"checked\", isChecked);\n                             alert(isChecked ? \"All boxes selected\" : \"All boxes deselected\");\n                         });\n                     });\n                 </script>\n                 \n                        <div class=\"row m-t-50\">\n                            <div class=\"col-md-12\">\n                                <div class=\"\">\n                                    <form action=\"{{route('branch.ships.addMultipleBookingtoshipSubmit')}}\" method=\"post\" enctype=\"multipart/form-data\">\n                                        @csrf\n                                        <div class=\"col-md-12\">\n                                            <div class=\"row\">\n                                                <div class=\"col-md-3\">\n                                                    <div class=\"form-group\">\n                                                        <label>Total Selected Boxes</label>\n                                                        <input type=\"text\" class=\"form-control\" id=\"total_selected_boxes\" value=\"{{$total_count}}\" name=\"total_selected_boxes\">\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-3\">\n                                                    <div class=\"form-group\">\n                                                        <label>Total Weight</label>\n                                                        <input type=\"text\" class=\"form-control\" name=\"total_weight\" id=\"total_weight\" value=\"{{$tot_sel_weight}}\" />\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-3\">\n                                                    <div class=\"form-group\">\n                                                        <label>Total Amount</label>\n                                                        <input type=\"text\" class=\"form-control\" name=\"total_value\" id=\"total_value\" value=\"{{$tot_sel_amt}}\" />\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-2\" style=\"margin:30px;\">\n                                                    <div class=\"form-group\">\n                                                        <input type=\"hidden\" class=\"form-control\" name=\"box_id\" value=\"{{($List) ? $List : ''}}\" id=\"selected_box_id\"/>\n                                                        <input type=\"hidden\" id=\"hidSelectList\" name=\"hidSelectList\" value=\"0\"/>\n                                                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\"/>\n                                                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Submit</button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </form>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- end container-fluid -->\n\n        </div>\n        <!-- end content -->\n<div id=\"statusModal\" class=\"modal fade\" role=\"dialog\">\n  <div class=\"modal-dialog\">\n\n    <!-- Modal content-->\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n          <h4 class=\"modal-title\"></h4>\n        </div>\n        <div class=\"modal-body\">\n                <div class=\"col-md-12\">\n                <input type=\"hidden\" value=\"\" class=\"selectedShipIds\" name=\"shipIds\" />\n                <input type=\"hidden\" value=\"\" class=\"selectedShipmentId\" name=\"shipmentIds\" />\n                <input type=\"hidden\" value=\"\" class=\"selectedBoxId\" name=\"boxIds\" />\n\n                    <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <div class=\"form-group\">\n                                <label>Change Shipment Status</label>\n                                <select name=\"status_id\" class=\"form-control\" id=\"status_id\">\n                                    @foreach (status_list_admin() as $item)\n                                        <option\n                                            {{ ( $ships->shipment_status==$item->id) ? 'selected' : \"\" }} value=\"{{ $item->id }}\">{{ $item->name }}</option>\n                                    @endforeach\n                                </select>\n                                @error('status_id')\n                                <span class=\"text-danger\">{{ $message }}</span>\n                                @enderror\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <div class=\"form-group\">\n                            <label>Comment</label>\n                            <textarea name=\"comment\" id=\"status_comment\" cols=\"30\" rows=\"0\" class=\"form-control\"></textarea>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <div class=\"form-group\">\n                            <label>Date</label>\n                                    <input type=\"date\" value=\"{{ date('Y-m-d') }}\" max=\"\"\n                                        class=\"form-control\" id=\"created_date\" name=\"created_date\"\n                                        placeholder=\"Enter title\">\n                            </div>\n                        </div>\n                    </div>\n                    \n                     <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <div class=\"form-group\">\n                            <label>Expected Date</label>\n                                    <input type=\"date\" value=\"\" max=\"\"\n                                        class=\"form-control\" id=\"expected_date\" name=\"expected_date\"\n                                        placeholder=\"Enter title\">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-4\">\n                        <div class=\"form-group\">\n                                <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n                                <button type=\"submit\" class=\"btn btn-success waves-effect waves-light updateStatus\">Update\n                                </button>\n                                </div>\n\n                        </div>\n                    </div>\n                </div>\n        </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n<div id=\"statusModalSucess\" class=\"modal fade\" role=\"dialog\">\n  <div class=\"modal-dialog\">\n\n    <!-- Modal content-->\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n          <h4 class=\"modal-title\"></h4>\n        </div>\n        <div class=\"modal-body\">\n\n                    <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <div class=\"form-group\">\n                                <div class=\"successMsg\">Status Updated Successfully</div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </form>\n        </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n<div id=\"currentStatusModal\" class=\"modal fade bd-example-modal-lg\" role=\"dialog\">\n  <div class=\"modal-dialog modal-lg\">\n\n    <!-- Modal content-->\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n          <h4 class=\"modal-title\"></h4>\n        </div>\n        <div class=\"modal-body\">\n            <form action=\"{{route('branch.ships.boxStatusUpdatetoship')}}\" method=\"post\">\n                @csrf\n                <div class=\"col-md-12\">\n                    <div class=\"row\">\n                        <table id=\"shipsTable1\" class=\"table table-striped table-bordered nowrap\" style=\"border-collapse: collapse; border-spacing: 0; width: 100%;\">\n                            <thead>\n                            <tr>\n                                <th>Box Name</th>\n                                <th>Current Status</th>\n                                <th>Dated on</th>\n                                <th>Update Status</th>\n                                <th>Update Status Date</th>\n                                <th>Expected Date</th>\n                                <th>Comment</th>\n                            </tr>\n                            </thead>\n                            <tbody class=\"fetchData\" status=\"{{status_list_admin() }}\">\n\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div class=\"form-group\">\n                        <input type=\"hidden\" id=\"ship_id\" name=\"ship_id\" value=\"{{$ships->id}}\" />\n                        <button type=\"submit\" class=\"btn btn-success waves-effect waves-light\">Update\n                        </button>\n                </div>\n            </form>\n        </div>\n        <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n        </div>\n    </div>\n\n  </div>\n</div>\n\n@endsection\n@section('styles')\n    @include('layouts.datatables_style')\n    <style>\n        .floatRight {float:right;}\n        .m-l-10 {margin-left:10px!important;}\n        .detailedBoxView {color:#661ec2;}\n        .modal-lg {max-width:1000px !important;}\n        .successMsg {font-size:18px; color:green;}\n        .fontRed {color:red;}\n        .icons {padding: 5px; font-size: x-small;}\n        #shipsTable {font-size:14px !important;}\n        .detailHead {\n            border: 1px solid #d6d6d6;\n            margin: 25px 80px;\n            background-color: #d6d6d6;\n        }\n        #bookingList {font-size:14px !important;}\n        #bookingList thead{font-size:14px !important;}\n        #bookingList_length {display:none;}\n        .m-t-50 {margin-top:50px;}\n    </style>\n@endsection\n\n@section('scripts')\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js\"></script>\n    @include('layouts.datatables_js')\n\n    <script>\n        $(document).ready(function() {\n\n            $('.shipmet_check').change(function(){\n                if($(this).is(':checked')){\n                    $('#printallButton').prop('disabled', false);\n                } else {\n                    $('#printallButton').prop('disabled', true);\n                }\n            });\n\n            $('#allcb').change(function(){\n                if($(this).is(':checked')){\n                    console.log('hhhhhhhhhhhhhhhhhhhhhhhhhh');\n                    $('#printallButton').prop('disabled', false);\n                } else {\n                    $('#printallButton').prop('disabled', true);\n                }\n            });\n\n\n            $('#bookingList_checkbox').click(function() {\n                $('.bookingSelection').prop('checked', $(this).prop('checked')).change();\n                window.location.reload();\n\n            });\n\n\n\n\n            $(document).ready(function() {\n                // Check if any .bookingSelection checkboxes are checked on page load\n                if ($('.bookingSelection:checked').length > 0) {\n                    $('#bookingList_checkbox').prop('checked', true);\n                } else {\n                    $('#bookingList_checkbox').prop('checked', false);\n                }\n\n                // Handle changes in .bookingSelection checkboxes\n                $('.bookingSelection').change(function() {\n                    if ($('.bookingSelection:checked').length > 0) {\n                        $('#bookingList_checkbox').prop('checked', true);\n                    } else {\n                        $('#bookingList_checkbox').prop('checked', false);\n                    }\n                });\n\n\n                $('#bookingList_checkbox').change(function() {\n                    if (!$(this).prop('checked')) {\n                        window.location.reload();\n                    }\n                });\n\n\n            });\n\n\n            $('#shipmentTypeSelect').change(function() {\n                var selectedType = $(this).val();\n                $('#bookingList tbody tr').hide().find('input.bookingSelection').removeClass('bookingSelection'); // Hide all rows and remove class from all td elements\n                if (selectedType === \"\") { // Show all if \"All\" is selected\n                    $('#bookingList tbody tr').show().find('input#bookingSelection').addClass('bookingSelection');\n                } else if (selectedType) {\n                    $('#bookingList tbody tr[data-shipment-type-id=\"' + selectedType + '\"]').show().find('input#bookingSelection').addClass('bookingSelection');\n                }\n            });\n\n        });\n\n    $(document).ready(function () {\n        $('#bookingList').DataTable( {\n            \"autoWidth\": false,\n            \"scrollX\": true,\n            \"aaSorting\": [ [0,'desc'] ],\n            \"bSort\": false,\n            \"responsive\": false\n        });\n\n    });\n\n        $(function () {\n            // validation needs name of the element\n            // initialize after multiselect\n\n            $(document).ready(function () {\n                $('.select2').select2();\n                if (window.location.href.indexOf('reload')==-1) {\n                    window.location.replace(window.location.href+'?reload');\n                }\n\n            });\n\n\n\n            var $checkboxes = $('.checkbox-item');\n            $('#allcb').click(function (e) {\n                    var checkboxesLength = $checkboxes.length;\n                    var checkedCheckboxesLength = $checkboxes.filter(':checked').length;\n                    if(checkboxesLength == checkedCheckboxesLength) {\n                        $('#allcb').prop('checked', true);\n                    }else{\n                        $('#allcb').prop('checked', false);\n                    }\n\n                    // $('#allcb').click(function (e) {\n                    if( $(\"#allcb\").prop('checked') == true) {\n                        $.each($('td:not(.k-state-disabled) .k-checkbox'), function () {\n                            $(this).prop(\"checked\", true)\n                        });\n                    }\n                    else {\n                        $('.k-checkbox').prop('checked', false);\n                    }\n                    // $(this).closest('table').find('td input:checkbox').prop('checked', this.checked);\n                // });\n            });\n\n            $(document).on('click', \".detailedBoxView\", function() {\n                var boxId = $(this).attr('value');\n                var dateVal = $(this).attr('dateVal');\n                var boxName = $(this).closest('tr').find('.boxName').text();\n                var expectedDate = $(this).attr('expecteddate');\n                var comment = $(this).attr('comment');\n                $(\"#currentStatusModal\").modal('show');\n                var d = new Date();\n                $.ajax({\n                        headers: {\n                            \"content-type\" : \"application/json\",\n                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                            },\n                        url: `{{ route('branch.ship.list.getBoxDetails') }}`,\n                        type: \"POST\",\n                        async:false,\n                        data: JSON.stringify({\"boxId\":boxId, \"boxName\":boxName }),\n                        cache: false,\n                        contentType: false,\n                        processData: false,\n                        success: function (result) {\n                            var html = [];\n                            $('.fetchData').html('');\n                            // $.each(result, function (key, value) {\n                                var selectOptionhtml = '';\n                                var dt = new Date();\n                                var newDate = '<input type=\"date\" name=\"statusDate[]\" class=\"form-control\" value=\"'+dateVal+'\">';\n                                var expectedDateInput = '<input type=\"date\" name=\"expected_date[]\" class=\"form-control\" value=\"'+expectedDate+'\" >';\n                                var commentInput  = '<input type=\"text\" name=\"comment[]\" class=\"form-control\" value=\"'+comment+'\" >';\n                                var statusCount = result.box_statuses.length;\n                                var lastNum = statusCount - 1;\n                                var selectOption = JSON.parse($(\".fetchData\").attr(\"status\"));\n                                selectOptionhtml += \"<select class='form-control class-form' name='status[]'><option value='0'>Select</option>\";\n                                for (var i = 0; i < selectOption.length; i++) {\n                                    // Check if the id matches\n                                    var selected = selectOption[i].id === result.box_statuses[lastNum].status.id ? ' selected' : '';\n\n                                    // Append the option with the selected attribute if applicable\n                                    selectOptionhtml += \"<option value='\" + selectOption[i].id + \"'\" + selected + \">\" + selectOption[i].name + \"</option>\";\n                                }\n                                selectOptionhtml += \"</select>\";\n                                html += '<tr>'+\n                                        '<td>'+result.box_name+'<input type=\"hidden\" name=\"boxIds[]\" value=\"'+result.id+'\"></td>';\n                                        if(statusCount > 0) {\n                                            html +=   '<td>'+result.box_statuses[lastNum].status.name+'</td>';\n                                            html +=   '<td>'+result.dated+'</td>';\n\n                                            html +=   '<td>'+selectOptionhtml+'</td>';\n                                            html +=   '<td>'+newDate+'</td>';\n                                            html +=  '<td>'+expectedDateInput+'</td>';\n                                            html +=  '<td>'+commentInput +'</td>';\n                                        } else {\n                                            html +=  '<td>--</td>';\n                                            html +=  '<td>--</td>';\n\n                                            html +=  '<td>'+selectOptionhtml+'</td>';\n                                            html +=  '<td>'+newDate+'</td>';\n                                            html +=  '<td>'+expectedDateInput+'</td>';\n                                            html +=  '<td>'+commentInput +'</td>';\n                                        }\n\n                                        html += '</tr>';\n                            // });\n                            $('.fetchData').html(html);\n                            $('.select2').select2();\n                        },\n                        error: function (err) {\n                            console.log(err);\n                        }\n                }); // ajax call closing\n            });\n\n            $(document).on('click',\"#changeStatus\", function() {\n                var checked = $(\".shipmentIds\").is(\":checked\");\n                if(checked == true) {\n                    var boxesName = $(this).attr('boxesName');\n                    var boxesVal = $(this).attr('boxesVal');\n                    var shipmentId = $(\".shipmentIds\").attr('value');\n                    $(\"#statusModal\").modal('show');\n                }\n            });\n\n            $(document).on('click', '.updateStatus', function(){\n                var url = \"{{route('branch.ships.multiUpdatebookingtoship')}}\";\n                var selectedShipIds = $(\".selectedShipIds\").val();\n                var selectedShipmentId = $(\".selectedShipmentId\").val();\n                var selectedBoxId = $(\".selectedBoxId\").val();\n                var status_id = $(\"#status_id\").val();\n                var status_comment = $(\"#status_comment\").val();\n                var created_date = $(\"#created_date\").val();\n                var expected_date = $(\"#expected_date\").val();\n                $.ajax({\n                        headers: {\n                            \"content-type\" : \"application/json\",\n                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                            },\n                        url: url,\n                        type: \"POST\",\n                        async:false,\n                        data: JSON.stringify({\"shipIds\":selectedShipIds,\"selectedBoxId\":selectedBoxId, \"shipmentIds\":selectedShipmentId, \"status_id\":status_id, \"created_date\":created_date, 'comment':status_comment, \"expected_date\":expected_date, }),\n                        cache: false,\n                        contentType: false,\n                        processData: false,\n                        success: function (result) {\n                            if(result.success == 'Status Updated Successfully') {\n                                $(\"#statusModalSucess\").modal('show');\n                            }\n                            location.reload();\n                        },\n                        error: function (err) {\n                            console.log(err);\n                        }\n                }); // ajax call closing\n            });\n\n\n            $(document).on('click', \".shipmentIds\", function() {\n                var val = [];\n                var valshipId = [];\n                var boxesVal = [];\n                var boxesName = [];\n                $(':checkbox:checked').each(function(i){\n                    val[i] = $(this).val();\n                    valshipId[i] = $(this).attr('shipId');\n                    boxesName[i] = $(this).closest('tr').find('.boxName').text();\n                    boxesVal[i] = $(this).closest('tr').find('.boxName').attr('boxId');\n                });\n                $(\".hidShipIds\").val(val);\n                $(\".hidBoxIds\").val(boxesVal);\n                $(\".selectedBoxId\").val(boxesVal);\n                $(\".selectedShipmentId\").val(val);\n                $(\"#changeStatus\").attr('shipId',valshipId);\n                $(\"#changeStatus\").attr('shipmentId',val);\n                $(\"#changeStatus\").attr('boxesVal',boxesVal);\n                $(\"#changeStatus\").attr('boxesName',boxesName);\n            });\n            var arr = [];\n            var alreadyExist = [];\n            var removeItem = [];\n\n            $(\"input:checkbox.bookingSelection\").change(function() {\n\n            });\n\n\n            $(document).on('change',\".bookingSelection\", function() {\n\n                var ischecked= $(this).is(':checked');\n                if(ischecked){\n                // alert('checkd ' + $(this).val());\n                arr.push($(this).val());\n                $(\"#selected_box_id\").val(arr);\n                }\n                else {\n                // alert('uncheckd ' + $(this).val());\n                removeItem.push($(this).val());\n                $(\"#hidSelectList\").val(removeItem);\n                }\n                var checked = $(this).is(\":checked\");\n                var total_selected_boxes = $(\"#total_selected_boxes\").val();\n                var total_weight = $(\"#total_weight\").val();\n                var total_value = $(\"#total_value\").val();\n                var boxesVal = $(this).attr('boxVal');\n                var boxWt = $(this).attr('boxWt');\n                var selectedBoxId = $(this).attr('selectBoxId');\n                // $.each($(\":checkbox:checked\"), function(){\n                //     arr.push($(this).val());\n                // });\n                $(\"#selected_box_id\").val(arr);\n\n                if(checked == true) {\n                    var newBoxes = parseFloat(total_selected_boxes) + parseFloat(1);\n                    var newWeight = parseFloat(total_weight) + parseFloat(boxWt);\n                    var newValue = parseFloat(total_value) + parseFloat(boxesVal);\n\n                } else {\n                    var newBoxes = parseFloat(total_selected_boxes) - parseFloat(1);\n                    var newWeight = parseFloat(total_weight) - parseFloat(boxWt);\n                    var newValue = parseFloat(total_value) - parseFloat(boxesVal);\n                }\n                $(\"#total_selected_boxes\").val(newBoxes);\n                $(\"#total_weight\").val(newWeight);\n                $(\"#total_value\").val(newValue);\n                var selectedBoxes = $(\"#selected_box_id\").val();\n                var hidSelectList = $(\"#hidSelectList\").val();\n                var url = \"{{route('branch.ships.multiSelectionUpdate')}}\";\n                $.ajax({\n                        headers: {\n                            \"content-type\" : \"application/json\",\n                            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                            },\n                        url: url,\n                        type: \"POST\",\n                        async:false,\n                        data: JSON.stringify({\"selectedBoxes\":selectedBoxes, \"hidSelectList\":hidSelectList, \"shipId\":\"1\" }),\n                        cache: false,\n                        contentType: false,\n                        processData: false,\n                        success: function (result) {\n                            console.log(result);\n                            var html = [];\n                            html = result.boxes\n                            $(\"#selected_box_id\").val(html);\n                        },\n                        error: function (err) {\n                            console.log(err);\n                        }\n                });\n                alreadyExist = [];\n                arr = [];\n            });\n\n        });\n\n</script>\n\n@endsection\n"
        }
    ]
}