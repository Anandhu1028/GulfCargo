{
    "sourceFile": "resources/views/branches/shipments/printview.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 27,
            "patches": [
                {
                    "date": 1733724247058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733724297074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{isset($shipment->agency->logo2)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n+                    <img src=\"{{isset(u}}\" alt=\"logo2\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n"
                },
                {
                    "date": 1733724310488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{isset($shipment->agency->logo2)?asset($shipment->agency->logo2):'' }}\" alt=\"logo2\">\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724384551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,734 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{ isset($shipment->agency->logo2) ? asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n+\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724421139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ isset($shipment->agency->logo2) ? asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n+                    <img src=\"{{ asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n@@ -731,1470 +731,4 @@\n     <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n </body>\n </html>\n @endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"{{isset($shipment->agency->logo2)?asset($shipment->agency->logo2):'' }}\" alt=\"logo2\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"{{isset(u}}\" alt=\"logo2\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n"
                },
                {
                    "date": 1733724430519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n+                    <img src=\"{{ asset('uploads/agency_logo_logo2/')}}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724446666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('uploads/agency_logo_logo2/')}}\" alt=\"logo2\">\n+                    <img src=\"{{ asset('uploads/agency_logo_logo2/'public/uploads/agency_logo)}}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724452973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('uploads/agency_logo_logo2/'public/uploads/agency_logo)}}\" alt=\"logo2\">\n+                    <img src=\"{{ asset('uuploads/agency_logo)}}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724485326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('uuploads/agency_logo)}}\" alt=\"logo2\">\n+                    <img src=\"{{ asset('')}}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724543483,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('')}}\" alt=\"logo2\">\n+                    \n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724583326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    \n+                    <img src=\"{{ asset('')}}\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724592072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('')}}\" alt=\"logo2\">\n+                    <img src=\"https://gulfcargodubai.cyenosure.co.in/uploads/agency_logo/11_1726632382.png\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724599312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"https://gulfcargodubai.cyenosure.co.in/uploads/agency_logo/11_1726632382.png\" alt=\"logo2\">\n+                    <img src=\"uploads/agency_logo/11_1726632382.png\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724605569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"uploads/agency_logo/11_1726632382.png\" alt=\"logo2\">\n+                    <img src=\"uploads/agency_logo/lo.png\" alt=\"logo2\">\n \n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n"
                },
                {
                    "date": 1733724674708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,734 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{ asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n+\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724706669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,10 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"{{ asset('uploads/agency_logo_logo2/' . $shipment->agency->logo2) : '' }}\" alt=\"logo2\">\n-\n+                    <img src=\"assets/Images/global.png\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n@@ -731,738 +730,4 @@\n     <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n </body>\n </html>\n @endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"uploads/agency_logo/lo.png\" alt=\"logo2\">\n-\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n"
                },
                {
                    "date": 1733724728800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"assets/Images/global.png\" alt=\"Logo\">\n+                    <img src=\"assets/uploads/global.png\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n"
                },
                {
                    "date": 1733724744122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"assets/uploads/global.png\" alt=\"Logo\">\n+                    <img src=\"assets/uploadspublic/uploads/agency_logo/global.png\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n"
                },
                {
                    "date": 1733724753125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"assets/uploadspublic/uploads/agency_logo/global.png\" alt=\"Logo\">\n+                    <img src=\"assets/uploads/agency_logo/global.png\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n"
                },
                {
                    "date": 1733724761154,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n         <div class=\"main\">\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n-                    <img src=\"assets/uploads/agency_logo/global.png\" alt=\"Logo\">\n+                    <img src=\"uploads/agency_logo/lo.png\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n"
                },
                {
                    "date": 1733724777760,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"uploads/agency_logo/logo2.png\" alt=\"Logo\">\n+                   <i><p class=\"logotext\">\"Ananhdu\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724800653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724836446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733724887242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                  \n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                },
                {
                    "date": 1733725124183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -259,741 +259,8 @@\n                     <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n-                  \n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n                     <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n                     <p>UAE | KSA | INDIA | SRILANKA</p>\n                     <div class=\"mail-div\">\n@@ -1463,2203 +730,4 @@\n     <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n </body>\n </html>\n @endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"uploads/agency_logo/logo2.png\" alt=\"Logo\">\n-                   <i><p class=\"logotext\">\"Ananhdu\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n-@if(isset($shipment->boxes))\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-<head>\n-    <title>Print View</title>\n-    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n-    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n-    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n-\n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n-    <style>\n-        @media print{\n-            body{\n-                width: 1100px !important;\n-            }\n-            .main{\n-                size: a4;\n-            }\n-            #printButton{\n-                display: none;\n-            }\n-            .address-line {\n-        word-wrap: break-word; /* Break long words at the container's edge */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n-    }\n-\n-        }\n-\n-\n-\n-\n-        #printButton {\n-          position: fixed;\n-          top: 30px;\n-          left: 30px;\n-          padding: 10px 20px;\n-          font-size: 16px;\n-          background-color: #c52014;\n-          color: #fff;\n-          border: none;\n-          border-radius: 15px;\n-          cursor: pointer;\n-          z-index: 1000;\n-          width: 95px\n-      }\n-      .\n-\n-      #printButton:hover {\n-          background-color: #009eb3;\n-      }\n-\n-      body {\n-            font-family: Arial, sans-serif;\n-            margin: 0;\n-            padding: 0;\n-            box-sizing: border-box;\n-        }\n-\n-        .header {\n-            text-align: center;\n-            margin-bottom: 20px;\n-        }\n-        .headermaindiv{\n-            display: flex;\n-            justify-content: space-evenly;\n-        }\n-        .header img {\n-            /* max-width: 120px;\n-            margin-bottom: 10px; */\n-            max-height: 150px;\n-        }\n-        .headerh1 {\n-            font-size: 22px;\n-            margin: 0;\n-        }\n-        .header p {\n-            font-size: 12px;\n-            margin: 5px 0;\n-        }\n-        .contact-info {\n-            text-align: right;\n-            margin-bottom: 20px;\n-            font-size: 12px;\n-        }\n-        .contact-info p {\n-            margin: 5px 0;\n-        }\n-        table {\n-            width: 100%;\n-            border-collapse: collapse;\n-            margin-bottom: 20px;\n-        }\n-        table, th, td {\n-            border: 1px solid black;\n-        }\n-        th, td {\n-            padding: 5px;\n-            text-align: center;\n-            font-size: 12px;\n-        }\n-        .notes {\n-            font-size: 10px;\n-            margin-top: 10px;\n-        }\n-        .notes p {\n-            margin: 5px 0;\n-        }\n-        .signature {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            text-align: center;\n-        }\n-        .signature div {\n-            display: inline-block;\n-            width: 30%;\n-        }\n-        .logotext{\n-            color: #262262;\n-        }\n-        .mail-div{\n-            display: flex;\n-            justify-content: space-around;\n-        }\n-        .tabledata {\n-            height: 30px;\n-        }\n-        .tableheadBackground {\n-            background-color: #d8d5de;\n-            color: #262262;\n-        }\n-        .shiptd{\n-            height: 150px;\n-            justify-content: start;\n-\n-        }\n-        .ship-consi-maindiv {\n-            display: flex;\n-            border: 1px solid #262262;\n-            height: 150px;\n-            justify-content: space-around;\n-            position: relative; /* Needed for positioning the pseudo-element */\n-            text-align: center;\n-        }\n-\n-        .ship-consi-maindiv::before {\n-            content: '';\n-            position: absolute;\n-            top: 0;\n-            bottom: 0;\n-            left: 50%;\n-            width: 1px;\n-            background-color: #262262;\n-            transform: translateX(-50%);\n-        }\n-        .shipper-div{\n-            font-size: small;\n-        }\n-        .consignee-div{\n-            font-size: small;\n-        }\n-        .main-small-div{\n-            display: flex;\n-            /* border-left: 1px solid #262262; */\n-            margin-bottom: 5px;\n-        }\n-        .small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 27px;\n-        }\n-        .sp-small-div{\n-            height: 25px;\n-            border-right:1px solid #262262;\n-            border-bottom: 1px solid#262262;\n-            width: 25px;\n-            background-color: #d8d5de;\n-            text-align: center;\n-            font-size: x-small;\n-            padding-top: 5px;\n-        }\n-        .tablemaindiv{\n-            display: flex;\n-            gap: 5px;\n-\n-        }\n-        .tablefirstrow{\n-            width:45px ;\n-        }\n-        .dec-value-main{\n-            display: flex;\n-            gap: 10px;\n-            height: 35px;\n-            width: 450px;\n-            border: 1px solid#262262;\n-        }\n-        .dec1-value{\n-            background-color:#d8d5de;\n-            width: fit-content;\n-            padding: 5px 5px 0px 5px;\n-        }\n-        .dec2-value{\n-            width: 10px;\n-        }\n-        .text{\n-            color: #262262;\n-        }\n-        p{\n-            color: #262262;\n-        }\n-        td{\n-            color: #262262;\n-        }\n-        th{\n-            color: #262262;\n-        }\n-        div{\n-            color: #262262;\n-        }\n-        .headarabic{\n-            color: red;\n-        }\n-        .mailimg{\n-            margin: 10px 3px 10px 3px;\n-        }\n-        .whatsappimg{\n-            margin: 3px 3px 3px 3px;\n-        }\n-        .contact-sub{\n-            display: flex;\n-        }\n-        .main{\n-            margin: 40px;\n-        }\n-        .address-line {\n-            overflow-wrap: break-word; /* Break long words */\n-            hyphens: auto; /* Add hyphens where possible */\n-        white-space: normal; /* Allow line breaks */\n-        max-width: 600px; /* Set a maximum width to control where text wraps */\n-        text-transform: capitalize !important;\n-    }\n-    </style>\n-</head>\n-\n-<body style=\"overflow-x: hidden; \" >\n-\n-    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n-    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n-{{-- @dd($shipment) --}}\n-<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n-\n-    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n-        <div class=\"main\">\n-            <div class=\"row mt-5\">\n-                <div class=\"headermaindiv\">\n-                <div class=\"header\">\n-                    <img src=\"uploads/agency_logo/lo.png\" alt=\"Logo\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n-                </div>\n-                <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n-                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n-                    <p>UAE | KSA | INDIA | SRILANKA</p>\n-                    <div class=\"mail-div\">\n-                        <div  class=\"mail-div\">\n-                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n-                            <p>www.gulfcargouae.com</p>\n-                        </div>\n-                       <div class=\"mail-div\">\n-                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n-                        <p>gulfcargouae@gmail.com</p>\n-                    </div>\n-\n-                    </div>\n-                </div>\n-\n-                <div class=\"contact-info\">\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 873 5100</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-                  <div class=\"contact-sub\">\n-\n-                    <p>+971 50 469 7200</p>\n-                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n-                  </div>\n-\n-\n-                </div>\n-                 </div>\n-                 <div class=\"table-responsive\">\n-                    <table style=\"border: 1px solid#262262;\">\n-                        <tr>\n-                            <th class=\"tableheadBackground\">Date</th>\n-                            <th class=\"tableheadBackground\">Origin</th>\n-                            <th class=\"tableheadBackground\">Destination</th>\n-                            <th class=\"tableheadBackground\">No. Pcs</th>\n-                            <th class=\"tableheadBackground\">Weight</th>\n-                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n-                            <th class=\"tableheadBackground\">Airway Bill</th>\n-                        </tr>\n-                        <tr>\n-                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n-                            <th>DUBAI</th>\n-                            <th>INDIA</th>\n-                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n-                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n-                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n-                            <th>{{$shipment->booking_number}}</th>\n-                        </tr>\n-                    </table>\n-\n-\n-                <div class=\"ship-consi-maindiv\">\n-                    <div class=\"shipper-div\">\n-                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n-                        <h6>\n-                            {{ $shipment->sender->name }} ,\n-                            {{ $shipment->sender->address->address }},\n-                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n-                            <br>\n-                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n-                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n-                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n-                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n-                            ,UAE\n-                            <br>\n-                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n-                            MOB:\n-                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n-                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n-                            <br>\n-                            ID - {{ $shipment->sender->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                    <div class=\"consignee-div\">\n-                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n-                        <h6>\n-                            {{ $shipment->receiver->name }} ,<br>\n-                           <div class=\"address-line\">\n-                                {{ strtolower($shipment->receiver->address->address )}},\n-                            </div>\n-                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n-                            \n-                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n-                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n-                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n-                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n-                             MOB:\n-                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n-                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n-                            <br>\n-                            ID - {{ $shipment->receiver->identification_number }}\n-                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n-                        </h6>\n-                    </div>\n-                </div>\n-            </div>\n-                <div class=\"main-small-div\">\n-                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">T</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"sp-small-div\">M</div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                    <div class=\"small-div\"></div>\n-                </div>\n-                <div class=\"tablemaindiv\">\n-    <!-- First Table for Odd Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Second Table for Even Rows -->\n-    <div class=\"w-50\">\n-        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n-            <thead>\n-                <tr>\n-                    <th class=\"tablefirstrow\">S.No</th>\n-                    <th>Box No</th>\n-                    <th>Weight</th>\n-                    <th>Items List</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @php\n-                    $prevBoxId = null;\n-                    $color = 'background-color: #FFFFFF'; // Default row color\n-                @endphp\n-                @foreach ($shipment->boxes as $index => $box)\n-                    @foreach ($box->packages as $packageIndex => $item)\n-                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n-                            @php\n-                                // Alternate row color\n-                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n-                            @endphp\n-                            <tr>\n-                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n-                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n-                                <td style=\"{{ $color }}\">\n-                                    {{ $item->description }} - {{ $item->quantity }}\n-                                </td>\n-                            </tr>\n-                        @endif\n-                    @endforeach\n-                @endforeach\n-            </tbody>\n-        </table>\n-        <table>\n-                            <tr>\n-                                <td class=\"w-50\">Total</td>\n-                                <td></td>\n-                            </tr>\n-                            <tr>\n-                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n-                                    <td>Duty</td>\n-                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n-                                    <td>Packing charge</td>\n-                                    <td>{{ $shipment->amount_msic_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n-                                    <td>Additional Packing charge</td>\n-                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n-                                    <td>Insurance</td>\n-                                    <td>{{ $shipment->amount_insurance }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n-                                    <td>AWB Fee</td>\n-                                    <td>{{ $shipment->amount_awbfee }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n-                                    <td>Volume weight</td>\n-                                    <td>{{ $shipment->amount_volume_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n-                                    <td>Discount</td>\n-                                    <td>{{ $shipment->amount_discount_weight }}</td>\n-                                @endif\n-                            </tr>\n-                            \n-                            <tr>\n-                                <td>VAT %</td>\n-                                <td>{{$shipment->amount_vat_amount}}</td>\n-                            </tr>\n-                            <tr>\n-                                <td>Net Total</td>\n-                                <td>{{$shipment->amount_grand_total}}</td>\n-                            </tr>\n-                        </table>\n-                    </div>\n-                </div>\n-                <center>\n-                <div class=\"dec-value-main\">\n-                    <div class=\"dec1-value\">Declared Value (AED)</div>\n-                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n-                </div>\n-            </center>\n-                <div class=\"notes\">\n-                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n-                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n-                         Complaints will not be entertained after five days of delivery date. <br>\n-                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n-                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n-                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n-                            Total cargo value should not be above INR 20,000/-.</p>\n-\n-                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n-                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n-                </div>\n-\n-                <div class=\"signature\">\n-                    <div>Signature of Shipper</div>\n-                    <div>Signature of Consignee</div>\n-                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n-                </div>\n-        </div>\n-    </div>\n-    \n-    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n-    <script>\n-\n-\n-\n-        function printPDF() {\n-            // Hide the print button while printing\n-            document.getElementById('printButton').style.display = 'none';\n-            // document.getElementById('printTiff').style.display = 'none';\n-\n-            // Print the content\n-            window.print();\n-\n-            // Show the print button again after printing is done\n-            document.getElementById('printButton').style.display = 'block';\n-            // document.getElementById('printTiff').style.display = 'block';\n-\n-        }\n-    </script>\n- <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n- <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n- <script>\n-\n-$(document).ready(function () {\n-    $(\"#printTiff\").on('click', async function () {\n-        $(\"#printTiff\").css('display', 'none');\n-        $(\".main_div\").css({\n-            \"margin-left\": \"25px\",\n-            \"margin-right\": \"80px\"\n-        });\n-        $(\".above_main_div\").css({\n-            \"width\": \"900px\",\n-            \"padding-top\": \"5px\",\n-            \"padding-bottom\": \"10px\"\n-        });\n-\n-        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n-        function delay(ms) {\n-            return new Promise(resolve => setTimeout(resolve, ms));\n-        }\n-        // Function to print each TIFF\n-        async function printAllTIFFs() {\n-            for (let i = 0; i < totalInvoice; i++) {\n-                await printTIFF(i); // Await each printTIFF operation\n-                // await delay(2000);\n-            }\n-            // await printTIFF(1);\n-        }\n-\n-        try {\n-            // Call the function to print all TIFFs\n-            await printAllTIFFs();\n-\n-            // After all TIFFs are printed, reload the page\n-            // window.location.reload();\n-        } catch (error) {\n-            console.error('Error printing TIFFs:', error);\n-            // Handle errors if necessary\n-        }\n-    });\n-});\n-\n-function printTIFF(a) {\n-    return new Promise((resolve, reject) => {\n-        var element = document.getElementById('myElement' + a);\n-        if (!element) {\n-            reject(new Error('Element not found'));\n-            return;\n-        }\n-        var inv_no = element.getAttribute('inv_no' + a);\n-        var rect = element.getBoundingClientRect();\n-        var scaleFactor = 9; // Adjusted scale factor to reduce size\n-        var marginRight = 450;\n-        var marginTop = 100;\n-        var marginBottom = 35;\n-\n-        // Create a wrapper element to apply the margin\n-        var wrapper = document.createElement('div');\n-        wrapper.style.marginLeft = marginRight + 'px';\n-        wrapper.style.marginTop = marginTop + 'px';\n-        wrapper.style.paddingBottom = marginBottom + 'px';\n-        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n-\n-        // Append the wrapper temporarily to the body to measure it\n-        document.body.appendChild(wrapper);\n-        var wrapperRect = wrapper.getBoundingClientRect();\n-        domtoimage.toPng(wrapper, {\n-            width: 8000,\n-            height: 11400,\n-            style: {\n-                transform: 'scale(' + scaleFactor + ')',\n-                transformOrigin: 'top left'\n-            },\n-            quality: 1, // Adjusted quality to reduce size\n-        })\n-        .then((dataUrl) => {\n-            // Create a Blob from the dataUrl\n-            fetch(dataUrl)\n-                .then(res => res.blob())\n-                .then((blob) => {\n-                    new Compressor(blob, {\n-                        quality: 10, // Lower quality for smaller size\n-                        maxWidth: 1050, // Resize if necessary\n-                        success(result) {\n-                            const compressedImg = new Image();\n-                            compressedImg.src = URL.createObjectURL(result);\n-\n-                            compressedImg.onload = function() {\n-                                const compressedCanvas = document.createElement('canvas');\n-                                compressedCanvas.width = compressedImg.width;\n-                                compressedCanvas.height = compressedImg.height;\n-\n-                                const compressedCtx = compressedCanvas.getContext('2d');\n-                                compressedCtx.drawImage(compressedImg, 0, 0);\n-\n-                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n-                                const rgbaData = imageData.data;\n-\n-                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n-                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n-\n-                                const a = document.createElement('a');\n-                                a.href = URL.createObjectURL(tiffBlob);\n-                                a.download = inv_no+'.tif';\n-                                document.body.appendChild(a);\n-                                a.click();\n-                                document.body.removeChild(a);\n-\n-                                // Resolve the promise once the operation completes\n-                                resolve();\n-                            };\n-                        },\n-                        error(err) {\n-                            console.error(err.message);\n-                            reject(err); // Reject promise on error\n-                        },\n-                    });\n-                });\n-        })\n-        .catch((error) => {\n-            console.error('Error:', error);\n-            reject(error); // Reject promise on error\n-        })\n-        .finally(() => {\n-            // Clean up: remove the wrapper element from the body\n-            document.body.removeChild(wrapper);\n-        });\n-    });\n-}\n-\n- </script>\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n-</body>\n-</html>\n-@endif\n"
                },
                {
                    "date": 1733725242641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -259,9 +259,9 @@\n                     <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n                    <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                 </div>\n                 <div class=\"header\">\n-                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n+                    <h1 class=\"headerh1\">Gulfinternational </h1>\n                     <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n                     <p>UAE | KSA | INDIA | SRILANKA</p>\n                     <div class=\"mail-div\">\n                         <div  class=\"mail-div\">\n"
                },
                {
                    "date": 1733726701263,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -256,9 +256,9 @@\n             <div class=\"row mt-5\">\n                 <div class=\"headermaindiv\">\n                 <div class=\"header\">\n                     <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n-                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                 ?\n                 </div>\n                 <div class=\"header\">\n                     <h1 class=\"headerh1\">Gulfinternational </h1>\n                     <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n"
                },
                {
                    "date": 1733726708809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,733 @@\n+@if(isset($shipment->boxes))\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <title>Print View</title>\n+    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n+    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n+    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n+    <style>\n+        @media print{\n+            body{\n+                width: 1100px !important;\n+            }\n+            .main{\n+                size: a4;\n+            }\n+            #printButton{\n+                display: none;\n+            }\n+            .address-line {\n+        word-wrap: break-word; /* Break long words at the container's edge */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n+    }\n+\n+        }\n+\n+\n+\n+\n+        #printButton {\n+          position: fixed;\n+          top: 30px;\n+          left: 30px;\n+          padding: 10px 20px;\n+          font-size: 16px;\n+          background-color: #c52014;\n+          color: #fff;\n+          border: none;\n+          border-radius: 15px;\n+          cursor: pointer;\n+          z-index: 1000;\n+          width: 95px\n+      }\n+      .\n+\n+      #printButton:hover {\n+          background-color: #009eb3;\n+      }\n+\n+      body {\n+            font-family: Arial, sans-serif;\n+            margin: 0;\n+            padding: 0;\n+            box-sizing: border-box;\n+        }\n+\n+        .header {\n+            text-align: center;\n+            margin-bottom: 20px;\n+        }\n+        .headermaindiv{\n+            display: flex;\n+            justify-content: space-evenly;\n+        }\n+        .header img {\n+            /* max-width: 120px;\n+            margin-bottom: 10px; */\n+            max-height: 150px;\n+        }\n+        .headerh1 {\n+            font-size: 22px;\n+            margin: 0;\n+        }\n+        .header p {\n+            font-size: 12px;\n+            margin: 5px 0;\n+        }\n+        .contact-info {\n+            text-align: right;\n+            margin-bottom: 20px;\n+            font-size: 12px;\n+        }\n+        .contact-info p {\n+            margin: 5px 0;\n+        }\n+        table {\n+            width: 100%;\n+            border-collapse: collapse;\n+            margin-bottom: 20px;\n+        }\n+        table, th, td {\n+            border: 1px solid black;\n+        }\n+        th, td {\n+            padding: 5px;\n+            text-align: center;\n+            font-size: 12px;\n+        }\n+        .notes {\n+            font-size: 10px;\n+            margin-top: 10px;\n+        }\n+        .notes p {\n+            margin: 5px 0;\n+        }\n+        .signature {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            text-align: center;\n+        }\n+        .signature div {\n+            display: inline-block;\n+            width: 30%;\n+        }\n+        .logotext{\n+            color: #262262;\n+        }\n+        .mail-div{\n+            display: flex;\n+            justify-content: space-around;\n+        }\n+        .tabledata {\n+            height: 30px;\n+        }\n+        .tableheadBackground {\n+            background-color: #d8d5de;\n+            color: #262262;\n+        }\n+        .shiptd{\n+            height: 150px;\n+            justify-content: start;\n+\n+        }\n+        .ship-consi-maindiv {\n+            display: flex;\n+            border: 1px solid #262262;\n+            height: 150px;\n+            justify-content: space-around;\n+            position: relative; /* Needed for positioning the pseudo-element */\n+            text-align: center;\n+        }\n+\n+        .ship-consi-maindiv::before {\n+            content: '';\n+            position: absolute;\n+            top: 0;\n+            bottom: 0;\n+            left: 50%;\n+            width: 1px;\n+            background-color: #262262;\n+            transform: translateX(-50%);\n+        }\n+        .shipper-div{\n+            font-size: small;\n+        }\n+        .consignee-div{\n+            font-size: small;\n+        }\n+        .main-small-div{\n+            display: flex;\n+            /* border-left: 1px solid #262262; */\n+            margin-bottom: 5px;\n+        }\n+        .small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 27px;\n+        }\n+        .sp-small-div{\n+            height: 25px;\n+            border-right:1px solid #262262;\n+            border-bottom: 1px solid#262262;\n+            width: 25px;\n+            background-color: #d8d5de;\n+            text-align: center;\n+            font-size: x-small;\n+            padding-top: 5px;\n+        }\n+        .tablemaindiv{\n+            display: flex;\n+            gap: 5px;\n+\n+        }\n+        .tablefirstrow{\n+            width:45px ;\n+        }\n+        .dec-value-main{\n+            display: flex;\n+            gap: 10px;\n+            height: 35px;\n+            width: 450px;\n+            border: 1px solid#262262;\n+        }\n+        .dec1-value{\n+            background-color:#d8d5de;\n+            width: fit-content;\n+            padding: 5px 5px 0px 5px;\n+        }\n+        .dec2-value{\n+            width: 10px;\n+        }\n+        .text{\n+            color: #262262;\n+        }\n+        p{\n+            color: #262262;\n+        }\n+        td{\n+            color: #262262;\n+        }\n+        th{\n+            color: #262262;\n+        }\n+        div{\n+            color: #262262;\n+        }\n+        .headarabic{\n+            color: red;\n+        }\n+        .mailimg{\n+            margin: 10px 3px 10px 3px;\n+        }\n+        .whatsappimg{\n+            margin: 3px 3px 3px 3px;\n+        }\n+        .contact-sub{\n+            display: flex;\n+        }\n+        .main{\n+            margin: 40px;\n+        }\n+        .address-line {\n+            overflow-wrap: break-word; /* Break long words */\n+            hyphens: auto; /* Add hyphens where possible */\n+        white-space: normal; /* Allow line breaks */\n+        max-width: 600px; /* Set a maximum width to control where text wraps */\n+        text-transform: capitalize !important;\n+    }\n+    </style>\n+</head>\n+\n+<body style=\"overflow-x: hidden; \" >\n+\n+    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n+    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n+{{-- @dd($shipment) --}}\n+<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n+\n+    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n+        <div class=\"main\">\n+            <div class=\"row mt-5\">\n+                <div class=\"headermaindiv\">\n+                <div class=\"header\">\n+                    <img src=\"{{isset($shipment->agency->logo)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n+                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n+                </div>\n+                <div class=\"header\">\n+                    <h1 class=\"headerh1\">Gulfinternational </h1>\n+                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n+                    <p>UAE | KSA | INDIA | SRILANKA</p>\n+                    <div class=\"mail-div\">\n+                        <div  class=\"mail-div\">\n+                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n+                            <p>www.gulfcargouae.com</p>\n+                        </div>\n+                       <div class=\"mail-div\">\n+                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n+                        <p>gulfcargouae@gmail.com</p>\n+                    </div>\n+\n+                    </div>\n+                </div>\n+\n+                <div class=\"contact-info\">\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 873 5100</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+                  <div class=\"contact-sub\">\n+\n+                    <p>+971 50 469 7200</p>\n+                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n+                  </div>\n+\n+\n+                </div>\n+                 </div>\n+                 <div class=\"table-responsive\">\n+                    <table style=\"border: 1px solid#262262;\">\n+                        <tr>\n+                            <th class=\"tableheadBackground\">Date</th>\n+                            <th class=\"tableheadBackground\">Origin</th>\n+                            <th class=\"tableheadBackground\">Destination</th>\n+                            <th class=\"tableheadBackground\">No. Pcs</th>\n+                            <th class=\"tableheadBackground\">Weight</th>\n+                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n+                            <th class=\"tableheadBackground\">Airway Bill</th>\n+                        </tr>\n+                        <tr>\n+                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n+                            <th>DUBAI</th>\n+                            <th>INDIA</th>\n+                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n+                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n+                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n+                            <th>{{$shipment->booking_number}}</th>\n+                        </tr>\n+                    </table>\n+\n+\n+                <div class=\"ship-consi-maindiv\">\n+                    <div class=\"shipper-div\">\n+                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n+                        <h6>\n+                            {{ $shipment->sender->name }} ,\n+                            {{ $shipment->sender->address->address }},\n+                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n+                            <br>\n+                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n+                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n+                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n+                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n+                            ,UAE\n+                            <br>\n+                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n+                            MOB:\n+                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n+                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n+                            <br>\n+                            ID - {{ $shipment->sender->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                    <div class=\"consignee-div\">\n+                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n+                        <h6>\n+                            {{ $shipment->receiver->name }} ,<br>\n+                           <div class=\"address-line\">\n+                                {{ strtolower($shipment->receiver->address->address )}},\n+                            </div>\n+                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n+                            \n+                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n+                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n+                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n+                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n+                             MOB:\n+                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n+                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n+                            <br>\n+                            ID - {{ $shipment->receiver->identification_number }}\n+                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n+                        </h6>\n+                    </div>\n+                </div>\n+            </div>\n+                <div class=\"main-small-div\">\n+                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">T</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"sp-small-div\">M</div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                    <div class=\"small-div\"></div>\n+                </div>\n+                <div class=\"tablemaindiv\">\n+    <!-- First Table for Odd Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Second Table for Even Rows -->\n+    <div class=\"w-50\">\n+        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n+            <thead>\n+                <tr>\n+                    <th class=\"tablefirstrow\">S.No</th>\n+                    <th>Box No</th>\n+                    <th>Weight</th>\n+                    <th>Items List</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @php\n+                    $prevBoxId = null;\n+                    $color = 'background-color: #FFFFFF'; // Default row color\n+                @endphp\n+                @foreach ($shipment->boxes as $index => $box)\n+                    @foreach ($box->packages as $packageIndex => $item)\n+                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n+                            @php\n+                                // Alternate row color\n+                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n+                            @endphp\n+                            <tr>\n+                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n+                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n+                                <td style=\"{{ $color }}\">\n+                                    {{ $item->description }} - {{ $item->quantity }}\n+                                </td>\n+                            </tr>\n+                        @endif\n+                    @endforeach\n+                @endforeach\n+            </tbody>\n+        </table>\n+        <table>\n+                            <tr>\n+                                <td class=\"w-50\">Total</td>\n+                                <td></td>\n+                            </tr>\n+                            <tr>\n+                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n+                                    <td>Duty</td>\n+                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n+                                    <td>Packing charge</td>\n+                                    <td>{{ $shipment->amount_msic_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n+                                    <td>Additional Packing charge</td>\n+                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n+                                    <td>Insurance</td>\n+                                    <td>{{ $shipment->amount_insurance }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n+                                    <td>AWB Fee</td>\n+                                    <td>{{ $shipment->amount_awbfee }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n+                                    <td>Volume weight</td>\n+                                    <td>{{ $shipment->amount_volume_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n+                                    <td>Discount</td>\n+                                    <td>{{ $shipment->amount_discount_weight }}</td>\n+                                @endif\n+                            </tr>\n+                            \n+                            <tr>\n+                                <td>VAT %</td>\n+                                <td>{{$shipment->amount_vat_amount}}</td>\n+                            </tr>\n+                            <tr>\n+                                <td>Net Total</td>\n+                                <td>{{$shipment->amount_grand_total}}</td>\n+                            </tr>\n+                        </table>\n+                    </div>\n+                </div>\n+                <center>\n+                <div class=\"dec-value-main\">\n+                    <div class=\"dec1-value\">Declared Value (AED)</div>\n+                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n+                </div>\n+            </center>\n+                <div class=\"notes\">\n+                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n+                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n+                         Complaints will not be entertained after five days of delivery date. <br>\n+                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n+                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n+                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n+                            Total cargo value should not be above INR 20,000/-.</p>\n+\n+                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n+                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n+                </div>\n+\n+                <div class=\"signature\">\n+                    <div>Signature of Shipper</div>\n+                    <div>Signature of Consignee</div>\n+                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n+                </div>\n+        </div>\n+    </div>\n+    \n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n+    <script>\n+\n+\n+\n+        function printPDF() {\n+            // Hide the print button while printing\n+            document.getElementById('printButton').style.display = 'none';\n+            // document.getElementById('printTiff').style.display = 'none';\n+\n+            // Print the content\n+            window.print();\n+\n+            // Show the print button again after printing is done\n+            document.getElementById('printButton').style.display = 'block';\n+            // document.getElementById('printTiff').style.display = 'block';\n+\n+        }\n+    </script>\n+ <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n+ <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n+ <script>\n+\n+$(document).ready(function () {\n+    $(\"#printTiff\").on('click', async function () {\n+        $(\"#printTiff\").css('display', 'none');\n+        $(\".main_div\").css({\n+            \"margin-left\": \"25px\",\n+            \"margin-right\": \"80px\"\n+        });\n+        $(\".above_main_div\").css({\n+            \"width\": \"900px\",\n+            \"padding-top\": \"5px\",\n+            \"padding-bottom\": \"10px\"\n+        });\n+\n+        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n+        function delay(ms) {\n+            return new Promise(resolve => setTimeout(resolve, ms));\n+        }\n+        // Function to print each TIFF\n+        async function printAllTIFFs() {\n+            for (let i = 0; i < totalInvoice; i++) {\n+                await printTIFF(i); // Await each printTIFF operation\n+                // await delay(2000);\n+            }\n+            // await printTIFF(1);\n+        }\n+\n+        try {\n+            // Call the function to print all TIFFs\n+            await printAllTIFFs();\n+\n+            // After all TIFFs are printed, reload the page\n+            // window.location.reload();\n+        } catch (error) {\n+            console.error('Error printing TIFFs:', error);\n+            // Handle errors if necessary\n+        }\n+    });\n+});\n+\n+function printTIFF(a) {\n+    return new Promise((resolve, reject) => {\n+        var element = document.getElementById('myElement' + a);\n+        if (!element) {\n+            reject(new Error('Element not found'));\n+            return;\n+        }\n+        var inv_no = element.getAttribute('inv_no' + a);\n+        var rect = element.getBoundingClientRect();\n+        var scaleFactor = 9; // Adjusted scale factor to reduce size\n+        var marginRight = 450;\n+        var marginTop = 100;\n+        var marginBottom = 35;\n+\n+        // Create a wrapper element to apply the margin\n+        var wrapper = document.createElement('div');\n+        wrapper.style.marginLeft = marginRight + 'px';\n+        wrapper.style.marginTop = marginTop + 'px';\n+        wrapper.style.paddingBottom = marginBottom + 'px';\n+        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n+\n+        // Append the wrapper temporarily to the body to measure it\n+        document.body.appendChild(wrapper);\n+        var wrapperRect = wrapper.getBoundingClientRect();\n+        domtoimage.toPng(wrapper, {\n+            width: 8000,\n+            height: 11400,\n+            style: {\n+                transform: 'scale(' + scaleFactor + ')',\n+                transformOrigin: 'top left'\n+            },\n+            quality: 1, // Adjusted quality to reduce size\n+        })\n+        .then((dataUrl) => {\n+            // Create a Blob from the dataUrl\n+            fetch(dataUrl)\n+                .then(res => res.blob())\n+                .then((blob) => {\n+                    new Compressor(blob, {\n+                        quality: 10, // Lower quality for smaller size\n+                        maxWidth: 1050, // Resize if necessary\n+                        success(result) {\n+                            const compressedImg = new Image();\n+                            compressedImg.src = URL.createObjectURL(result);\n+\n+                            compressedImg.onload = function() {\n+                                const compressedCanvas = document.createElement('canvas');\n+                                compressedCanvas.width = compressedImg.width;\n+                                compressedCanvas.height = compressedImg.height;\n+\n+                                const compressedCtx = compressedCanvas.getContext('2d');\n+                                compressedCtx.drawImage(compressedImg, 0, 0);\n+\n+                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n+                                const rgbaData = imageData.data;\n+\n+                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n+                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n+\n+                                const a = document.createElement('a');\n+                                a.href = URL.createObjectURL(tiffBlob);\n+                                a.download = inv_no+'.tif';\n+                                document.body.appendChild(a);\n+                                a.click();\n+                                document.body.removeChild(a);\n+\n+                                // Resolve the promise once the operation completes\n+                                resolve();\n+                            };\n+                        },\n+                        error(err) {\n+                            console.error(err.message);\n+                            reject(err); // Reject promise on error\n+                        },\n+                    });\n+                });\n+        })\n+        .catch((error) => {\n+            console.error('Error:', error);\n+            reject(error); // Reject promise on error\n+        })\n+        .finally(() => {\n+            // Clean up: remove the wrapper element from the body\n+            document.body.removeChild(wrapper);\n+        });\n+    });\n+}\n+\n+ </script>\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n+</body>\n+</html>\n+@endif\n"
                }
            ],
            "date": 1733724247058,
            "name": "Commit-0",
            "content": "@if(isset($shipment->boxes))\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <title>Print View</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n    <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js\"></script>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js\"></script>\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js\"></script>\n    <style>\n        @media print{\n            body{\n                width: 1100px !important;\n            }\n            .main{\n                size: a4;\n            }\n            #printButton{\n                display: none;\n            }\n            .address-line {\n        word-wrap: break-word; /* Break long words at the container's edge */\n        white-space: normal; /* Allow line breaks */\n        max-width: 400px !important; /* Set a maximum width to control where text wraps */\n    }\n\n        }\n\n\n\n\n        #printButton {\n          position: fixed;\n          top: 30px;\n          left: 30px;\n          padding: 10px 20px;\n          font-size: 16px;\n          background-color: #c52014;\n          color: #fff;\n          border: none;\n          border-radius: 15px;\n          cursor: pointer;\n          z-index: 1000;\n          width: 95px\n      }\n      .\n\n      #printButton:hover {\n          background-color: #009eb3;\n      }\n\n      body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        .header {\n            text-align: center;\n            margin-bottom: 20px;\n        }\n        .headermaindiv{\n            display: flex;\n            justify-content: space-evenly;\n        }\n        .header img {\n            /* max-width: 120px;\n            margin-bottom: 10px; */\n            max-height: 150px;\n        }\n        .headerh1 {\n            font-size: 22px;\n            margin: 0;\n        }\n        .header p {\n            font-size: 12px;\n            margin: 5px 0;\n        }\n        .contact-info {\n            text-align: right;\n            margin-bottom: 20px;\n            font-size: 12px;\n        }\n        .contact-info p {\n            margin: 5px 0;\n        }\n        table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n        }\n        table, th, td {\n            border: 1px solid black;\n        }\n        th, td {\n            padding: 5px;\n            text-align: center;\n            font-size: 12px;\n        }\n        .notes {\n            font-size: 10px;\n            margin-top: 10px;\n        }\n        .notes p {\n            margin: 5px 0;\n        }\n        .signature {\n            margin-top: 20px;\n            font-size: 12px;\n            text-align: center;\n        }\n        .signature div {\n            display: inline-block;\n            width: 30%;\n        }\n        .logotext{\n            color: #262262;\n        }\n        .mail-div{\n            display: flex;\n            justify-content: space-around;\n        }\n        .tabledata {\n            height: 30px;\n        }\n        .tableheadBackground {\n            background-color: #d8d5de;\n            color: #262262;\n        }\n        .shiptd{\n            height: 150px;\n            justify-content: start;\n\n        }\n        .ship-consi-maindiv {\n            display: flex;\n            border: 1px solid #262262;\n            height: 150px;\n            justify-content: space-around;\n            position: relative; /* Needed for positioning the pseudo-element */\n            text-align: center;\n        }\n\n        .ship-consi-maindiv::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 50%;\n            width: 1px;\n            background-color: #262262;\n            transform: translateX(-50%);\n        }\n        .shipper-div{\n            font-size: small;\n        }\n        .consignee-div{\n            font-size: small;\n        }\n        .main-small-div{\n            display: flex;\n            /* border-left: 1px solid #262262; */\n            margin-bottom: 5px;\n        }\n        .small-div{\n            height: 25px;\n            border-right:1px solid #262262;\n            border-bottom: 1px solid#262262;\n            width: 27px;\n        }\n        .sp-small-div{\n            height: 25px;\n            border-right:1px solid #262262;\n            border-bottom: 1px solid#262262;\n            width: 25px;\n            background-color: #d8d5de;\n            text-align: center;\n            font-size: x-small;\n            padding-top: 5px;\n        }\n        .tablemaindiv{\n            display: flex;\n            gap: 5px;\n\n        }\n        .tablefirstrow{\n            width:45px ;\n        }\n        .dec-value-main{\n            display: flex;\n            gap: 10px;\n            height: 35px;\n            width: 450px;\n            border: 1px solid#262262;\n        }\n        .dec1-value{\n            background-color:#d8d5de;\n            width: fit-content;\n            padding: 5px 5px 0px 5px;\n        }\n        .dec2-value{\n            width: 10px;\n        }\n        .text{\n            color: #262262;\n        }\n        p{\n            color: #262262;\n        }\n        td{\n            color: #262262;\n        }\n        th{\n            color: #262262;\n        }\n        div{\n            color: #262262;\n        }\n        .headarabic{\n            color: red;\n        }\n        .mailimg{\n            margin: 10px 3px 10px 3px;\n        }\n        .whatsappimg{\n            margin: 3px 3px 3px 3px;\n        }\n        .contact-sub{\n            display: flex;\n        }\n        .main{\n            margin: 40px;\n        }\n        .address-line {\n            overflow-wrap: break-word; /* Break long words */\n            hyphens: auto; /* Add hyphens where possible */\n        white-space: normal; /* Allow line breaks */\n        max-width: 600px; /* Set a maximum width to control where text wraps */\n        text-transform: capitalize !important;\n    }\n    </style>\n</head>\n\n<body style=\"overflow-x: hidden; \" >\n\n    <button id=\"printButton\" onclick=\"printPDF()\">Print</button><br>\n    {{-- <button id=\"printTiff\" >TIFF</button> --}}\n{{-- @dd($shipment) --}}\n<a href=\"#\" id=\"btn-Convert-Html2Image\" onclick=\"printTIFF()\" class=\"btn btn-info\" style=\"display:none;\">TIFF</a>\n\n    <div id=\"myElement\" inv_no={{$shipment->booking_number}}>\n        <div class=\"main\">\n            <div class=\"row mt-5\">\n                <div class=\"headermaindiv\">\n                <div class=\"header\">\n                    <img src=\"{{isset($shipment->agency->logo2)?asset($shipment->agency->logo):'' }}\" alt=\"Logo\">\n                   <i><p class=\"logotext\">\"where every shipment tells a story\"</p></i>\n                </div>\n                <div class=\"header\">\n                    <h1 class=\"headerh1\">Gulfinternational Cargo Packaging L.L.C</h1>\n                    <h1 class=\"headarabic\">الخليج الدولية لتغليف البضائع ذ.م.م</h1>\n                    <p>UAE | KSA | INDIA | SRILANKA</p>\n                    <div class=\"mail-div\">\n                        <div  class=\"mail-div\">\n                            <img class=\"mailimg\" src=\"assets/Images/global.png\" height=\"10px\" alt=\"\" >\n                            <p>www.gulfcargouae.com</p>\n                        </div>\n                       <div class=\"mail-div\">\n                        <img class=\"mailimg\" src=\"assets/Images/gmail.png\" height=\"10px\" alt=\"\">\n                        <p>gulfcargouae@gmail.com</p>\n                    </div>\n\n                    </div>\n                </div>\n\n                <div class=\"contact-info\">\n                  <div class=\"contact-sub\">\n\n                    <p>+971 50 873 5100</p>\n                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n                  </div>\n                  <div class=\"contact-sub\">\n\n                    <p>+971 50 469 7200</p>\n                    <img class=\"whatsappimg\" src=\"assets/Images/whatsapp.png\" alt=\"\" height=\"20px\">\n                  </div>\n\n\n                </div>\n                 </div>\n                 <div class=\"table-responsive\">\n                    <table style=\"border: 1px solid#262262;\">\n                        <tr>\n                            <th class=\"tableheadBackground\">Date</th>\n                            <th class=\"tableheadBackground\">Origin</th>\n                            <th class=\"tableheadBackground\">Destination</th>\n                            <th class=\"tableheadBackground\">No. Pcs</th>\n                            <th class=\"tableheadBackground\">Weight</th>\n                            <th class=\"tableheadBackground\">Mode of Shipment</th>\n                            <th class=\"tableheadBackground\">Airway Bill</th>\n                        </tr>\n                        <tr>\n                            <th class=\"tabledata\">{{!empty($shipment->created_date)? date('d-m-Y', strtotime($shipment->created_date)):''}}</th>\n                            <th>DUBAI</th>\n                            <th>INDIA</th>\n                            <th>{{ $shipment->number_of_pcs ? $shipment->number_of_pcs : ($shipment->number_of_pcs_create ? $shipment->number_of_pcs_create : 0) }}</th>\n                            <th>{{ round($shipment->grand_total_weight, 2) }}</th>\n                            <th>{{ $shipment->shipMethType ? $shipment->shipMethType->name : '' }}</th>\n                            <th>{{$shipment->booking_number}}</th>\n                        </tr>\n                    </table>\n\n\n                <div class=\"ship-consi-maindiv\">\n                    <div class=\"shipper-div\">\n                        <b>SHIPPER'S NAME AND ADDRESS:</b><br>\n                        <h6>\n                            {{ $shipment->sender->name }} ,\n                            {{ $shipment->sender->address->address }},\n                            {{ $shipment->sender->post? $shipment->sender->post.',' :''}}\n                            <br>\n                            {{ $shipment->sender->city_name ? $shipment->sender->city_name.',' : ''}}\n                            {{ $shipment->sender->address->district ? $shipment->sender->address->district->name.',' : ''}}\n                            {{ $shipment->sender->address->state ? $shipment->sender->address->state->name.',' : ''}}\n                            {{-- {{ $shipment->sender->address->country_id ? $shipment->sender->address->country->name.',' : ''}} --}}\n                            ,UAE\n                            <br>\n                            {{$shipment->sender->address ? 'PIN:-'.$shipment->sender->address->zip_code.',' : ''}}\n                            MOB:\n                            +{{ $shipment->sender->country_code_whatsapp}} {{ $shipment->sender->whatsapp_number }},\n                            +{{ $shipment->sender->country_code_phone}} {{ $shipment->sender->phone }},\n                            <br>\n                            ID - {{ $shipment->sender->identification_number }}\n                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->sender->user ? $shipment->sender->user->email : ''}}</span> --}}\n                        </h6>\n                    </div>\n                    <div class=\"consignee-div\">\n                        <b>CONSIGNEE'S NAME AND ADDRESS:</b>\n                        <h6>\n                            {{ $shipment->receiver->name }} ,<br>\n                           <div class=\"address-line\">\n                                {{ strtolower($shipment->receiver->address->address )}},\n                            </div>\n                            {{ $shipment->receiver->post?$shipment->receiver->post.',':'' }}\n                            \n                            {{ $shipment->receiver->city_name ? $shipment->receiver->city_name.',': ''}}\n                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->district->name .',': ''}}\n                            {{ $shipment->receiver->address->district ? $shipment->receiver->address->state->name .',': ''}}\n                            {{ $shipment->receiver->address->country_id ? $shipment->receiver->address->country->name.',' : ''}}<br>\n                            {{$shipment->receiver->address ? 'PIN:-'.$shipment->receiver->address->zip_code.',' : ''}}\n                             MOB:\n                            +{{ $shipment->receiver->country_code_whatsapp}} {{ $shipment->receiver->whatsapp_number }},\n                            +{{ $shipment->receiver->country_code_phone}} {{ $shipment->receiver->phone }},\n                            <br>\n                            ID - {{ $shipment->receiver->identification_number }}\n                            {{-- <span style=\"text-transform:lowercase !important;\">{{ $shipment->receiver->user ? $shipment->receiver->user->email : ''}}</span> --}}\n                        </h6>\n                    </div>\n                </div>\n            </div>\n                <div class=\"main-small-div\">\n                    <div class=\"sp-small-div\" style=\"border-left: 1px solid #262262;\">T</div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"sp-small-div\">M</div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"sp-small-div\">T</div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"sp-small-div\">M</div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                    <div class=\"small-div\"></div>\n                </div>\n                <div class=\"tablemaindiv\">\n    <!-- First Table for Odd Rows -->\n    <div class=\"w-50\">\n        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n            <thead>\n                <tr>\n                    <th class=\"tablefirstrow\">S.No</th>\n                    <th>Box No</th>\n                    <th>Weight</th>\n                    <th>Items List</th>\n                </tr>\n            </thead>\n            <tbody>\n                @php\n                    $prevBoxId = null;\n                    $color = 'background-color: #FFFFFF'; // Default row color\n                @endphp\n                @foreach ($shipment->boxes as $index => $box)\n                    @foreach ($box->packages as $packageIndex => $item)\n                        @if (($index + $packageIndex) % 2 === 0) <!-- Odd Row -->\n                            @php\n                                // Alternate row color\n                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n                            @endphp\n                            <tr>\n                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n                                <td style=\"{{ $color }}\">\n                                    {{ $item->description }} - {{ $item->quantity }}\n                                </td>\n                            </tr>\n                        @endif\n                    @endforeach\n                @endforeach\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Second Table for Even Rows -->\n    <div class=\"w-50\">\n        <table class=\"table table-responsive text-center\" style=\"width: 100%\">\n            <thead>\n                <tr>\n                    <th class=\"tablefirstrow\">S.No</th>\n                    <th>Box No</th>\n                    <th>Weight</th>\n                    <th>Items List</th>\n                </tr>\n            </thead>\n            <tbody>\n                @php\n                    $prevBoxId = null;\n                    $color = 'background-color: #FFFFFF'; // Default row color\n                @endphp\n                @foreach ($shipment->boxes as $index => $box)\n                    @foreach ($box->packages as $packageIndex => $item)\n                        @if (($index + $packageIndex) % 2 === 1) <!-- Even Row -->\n                            @php\n                                // Alternate row color\n                                $color = ($color === 'background-color: #C0C0C0') ? 'background-color: #FFFFFF' : 'background-color: #C0C0C0';\n                            @endphp\n                            <tr>\n                                <td style=\"{{ $color }}\">{{ $index + $packageIndex + 1 }}</td>\n                                <td style=\"{{ $color }}\">{{ $box->box_name }}</td>\n                                <td style=\"{{ $color }}\">{{ $box->weight }} kg</td>\n                                <td style=\"{{ $color }}\">\n                                    {{ $item->description }} - {{ $item->quantity }}\n                                </td>\n                            </tr>\n                        @endif\n                    @endforeach\n                @endforeach\n            </tbody>\n        </table>\n        <table>\n                            <tr>\n                                <td class=\"w-50\">Total</td>\n                                <td></td>\n                            </tr>\n                            <tr>\n                                @if (isset($shipment->amount_electronics_weight) && $shipment->amount_electronics_weight != 0)\n                                    <td>Duty</td>\n                                    <td>{{ $shipment->amount_electronics_weight }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_msic_weight) && $shipment->amount_msic_weight != 0)\n                                    <td>Packing charge</td>\n                                    <td>{{ $shipment->amount_msic_weight }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_add_pack_charge) && $shipment->amount_add_pack_charge != 0)\n                                    <td>Additional Packing charge</td>\n                                    <td>{{ $shipment->amount_add_pack_charge }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_insurance) && $shipment->amount_insurance != 0)\n                                    <td>Insurance</td>\n                                    <td>{{ $shipment->amount_insurance }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_awbfee) && $shipment->amount_awbfee != 0)\n                                    <td>AWB Fee</td>\n                                    <td>{{ $shipment->amount_awbfee }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_volume_weight) && $shipment->amount_volume_weight != 0)\n                                    <td>Volume weight</td>\n                                    <td>{{ $shipment->amount_volume_weight }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                @if (isset($shipment->amount_discount_weight) && $shipment->amount_discount_weight != 0)\n                                    <td>Discount</td>\n                                    <td>{{ $shipment->amount_discount_weight }}</td>\n                                @endif\n                            </tr>\n                            \n                            <tr>\n                                <td>VAT %</td>\n                                <td>{{$shipment->amount_vat_amount}}</td>\n                            </tr>\n                            <tr>\n                                <td>Net Total</td>\n                                <td>{{$shipment->amount_grand_total}}</td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n                <center>\n                <div class=\"dec-value-main\">\n                    <div class=\"dec1-value\">Declared Value (AED)</div>\n                    <div class=\"dec2-value\"><p style=\"margin-top:5px; \">{{$shipment->value_of_goods}}</p> </div>\n                </div>\n            </center>\n                <div class=\"notes\">\n                    <p><strong>TERMS AND CONDITIONS:</strong></p>\n                    <p>Any complaints regarding this consignment should be reported within five days. <br>\n                         Complaints will not be entertained after five days of delivery date. <br>\n                         GULF INTERNATIONAL CARGO L.L.C is not responsible for any damage of the items at the time of delivery. <br>\n                          GULF INTERNATIONAL CARGO L.L.C is not responsible for the shipment delay due to the government authorities or natural calamities. <br>\n                           Maximum payback for total lost will be Dhs.20/- per Kilogram. <br>\n                            Total cargo value should not be above INR 20,000/-.</p>\n\n                    <p><strong class=\"mt-3\">CUSTOMER DECLARTION:</strong></p>\n                    <p>I, {{ $shipment->sender->name }}, holder of Emirates ID number: {{ $shipment->sender->identification_number }}, hereby declare that all the above-said items are my personal effects/home appliances sending to my Family Mr./Mrs. {{ $shipment->receiver->name }} through GULF INTERNATIONAL CARGO L.L.C, P.O BOX, Dubai, United Arab Emirates vide their waybill number: ______ which is sent as the unaccompanied baggage of an international passenger. If any extra duty/penalties occurs I am bound to pay the amount concerned.</p>\n                </div>\n\n                <div class=\"signature\">\n                    <div>Signature of Shipper</div>\n                    <div>Signature of Consignee</div>\n                    <div>For GULF INTERNATIONAL CARGO L.L.C</div>\n                </div>\n        </div>\n    </div>\n    \n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js\"></script>\n    <script>\n\n\n\n        function printPDF() {\n            // Hide the print button while printing\n            document.getElementById('printButton').style.display = 'none';\n            // document.getElementById('printTiff').style.display = 'none';\n\n            // Print the content\n            window.print();\n\n            // Show the print button again after printing is done\n            document.getElementById('printButton').style.display = 'block';\n            // document.getElementById('printTiff').style.display = 'block';\n\n        }\n    </script>\n <script src=\"https://cdn.jsdelivr.net/npm/utif@2.0.1/UTIF.min.js\"></script>\n <script src=\"https://unpkg.com/compressorjs@latest/dist/compressor.min.js\"></script>\n <script>\n\n$(document).ready(function () {\n    $(\"#printTiff\").on('click', async function () {\n        $(\"#printTiff\").css('display', 'none');\n        $(\".main_div\").css({\n            \"margin-left\": \"25px\",\n            \"margin-right\": \"80px\"\n        });\n        $(\".above_main_div\").css({\n            \"width\": \"900px\",\n            \"padding-top\": \"5px\",\n            \"padding-bottom\": \"10px\"\n        });\n\n        var totalInvoice = Number(\"<?php echo count($shipment->boxes) ?>\");\n        function delay(ms) {\n            return new Promise(resolve => setTimeout(resolve, ms));\n        }\n        // Function to print each TIFF\n        async function printAllTIFFs() {\n            for (let i = 0; i < totalInvoice; i++) {\n                await printTIFF(i); // Await each printTIFF operation\n                // await delay(2000);\n            }\n            // await printTIFF(1);\n        }\n\n        try {\n            // Call the function to print all TIFFs\n            await printAllTIFFs();\n\n            // After all TIFFs are printed, reload the page\n            // window.location.reload();\n        } catch (error) {\n            console.error('Error printing TIFFs:', error);\n            // Handle errors if necessary\n        }\n    });\n});\n\nfunction printTIFF(a) {\n    return new Promise((resolve, reject) => {\n        var element = document.getElementById('myElement' + a);\n        if (!element) {\n            reject(new Error('Element not found'));\n            return;\n        }\n        var inv_no = element.getAttribute('inv_no' + a);\n        var rect = element.getBoundingClientRect();\n        var scaleFactor = 9; // Adjusted scale factor to reduce size\n        var marginRight = 450;\n        var marginTop = 100;\n        var marginBottom = 35;\n\n        // Create a wrapper element to apply the margin\n        var wrapper = document.createElement('div');\n        wrapper.style.marginLeft = marginRight + 'px';\n        wrapper.style.marginTop = marginTop + 'px';\n        wrapper.style.paddingBottom = marginBottom + 'px';\n        wrapper.appendChild(element.cloneNode(true)); // Clone the element to avoid moving the original one\n\n        // Append the wrapper temporarily to the body to measure it\n        document.body.appendChild(wrapper);\n        var wrapperRect = wrapper.getBoundingClientRect();\n        domtoimage.toPng(wrapper, {\n            width: 8000,\n            height: 11400,\n            style: {\n                transform: 'scale(' + scaleFactor + ')',\n                transformOrigin: 'top left'\n            },\n            quality: 1, // Adjusted quality to reduce size\n        })\n        .then((dataUrl) => {\n            // Create a Blob from the dataUrl\n            fetch(dataUrl)\n                .then(res => res.blob())\n                .then((blob) => {\n                    new Compressor(blob, {\n                        quality: 10, // Lower quality for smaller size\n                        maxWidth: 1050, // Resize if necessary\n                        success(result) {\n                            const compressedImg = new Image();\n                            compressedImg.src = URL.createObjectURL(result);\n\n                            compressedImg.onload = function() {\n                                const compressedCanvas = document.createElement('canvas');\n                                compressedCanvas.width = compressedImg.width;\n                                compressedCanvas.height = compressedImg.height;\n\n                                const compressedCtx = compressedCanvas.getContext('2d');\n                                compressedCtx.drawImage(compressedImg, 0, 0);\n\n                                const imageData = compressedCtx.getImageData(0, 0, compressedCanvas.width, compressedCanvas.height);\n                                const rgbaData = imageData.data;\n\n                                const tiffData = UTIF.encodeImage(rgbaData, compressedCanvas.width, compressedCanvas.height, 8, 3);\n                                const tiffBlob = new Blob([tiffData], { type: 'image/tiff' });\n\n                                const a = document.createElement('a');\n                                a.href = URL.createObjectURL(tiffBlob);\n                                a.download = inv_no+'.tif';\n                                document.body.appendChild(a);\n                                a.click();\n                                document.body.removeChild(a);\n\n                                // Resolve the promise once the operation completes\n                                resolve();\n                            };\n                        },\n                        error(err) {\n                            console.error(err.message);\n                            reject(err); // Reject promise on error\n                        },\n                    });\n                });\n        })\n        .catch((error) => {\n            console.error('Error:', error);\n            reject(error); // Reject promise on error\n        })\n        .finally(() => {\n            // Clean up: remove the wrapper element from the body\n            document.body.removeChild(wrapper);\n        });\n    });\n}\n\n </script>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n</body>\n</html>\n@endif\n"
        }
    ]
}